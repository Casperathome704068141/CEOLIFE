{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/layout/page-header.tsx"],"sourcesContent":["\"use client\";\n\nimport { motion } from \"framer-motion\";\nimport { ReactNode } from \"react\";\nimport { Button } from \"@/components/ui/button\";\n\ninterface PageHeaderProps {\n  title: string;\n  description?: string;\n  actions?: ReactNode;\n}\n\nexport function PageHeader({ title, description, actions }: PageHeaderProps) {\n  return (\n    <div className=\"flex flex-col gap-4 pb-8 lg:flex-row lg:items-center lg:justify-between\">\n      <div className=\"space-y-1\">\n        <motion.h1\n          className=\"text-3xl font-headline font-semibold tracking-tight text-primary\"\n          initial={{ opacity: 0, y: 12 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ type: \"spring\", stiffness: 120, damping: 16 }}\n        >\n          {title}\n        </motion.h1>\n        {description ? (\n          <motion.p\n            className=\"text-sm text-muted-foreground max-w-2xl\"\n            initial={{ opacity: 0, y: 8 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.05, duration: 0.3 }}\n          >\n            {description}\n          </motion.p>\n        ) : null}\n      </div>\n      {actions ? (\n        <motion.div\n          className=\"flex flex-wrap items-center gap-2\"\n          initial={{ opacity: 0, y: -6 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.1, duration: 0.2 }}\n        >\n          {actions}\n        </motion.div>\n      ) : null}\n    </div>\n  );\n}\n\nexport function PagePrimaryAction({ children }: { children: ReactNode }) {\n  return (\n    <Button\n      size=\"lg\"\n      className=\"relative overflow-hidden rounded-2xl bg-gradient-to-r from-cyan-500 via-sky-500 to-indigo-500 px-6 font-medium text-white shadow-xl shadow-cyan-900/40 transition hover:shadow-2xl focus-visible:ring-cyan-400\"\n    >\n      <span className=\"relative z-10\">{children}</span>\n      <span className=\"absolute inset-0 rounded-2xl bg-white/10 mix-blend-overlay\" />\n    </Button>\n  );\n}\n\nexport function PageSecondaryAction({ children }: { children: ReactNode }) {\n  return (\n    <Button\n      variant=\"outline\"\n      size=\"lg\"\n      className=\"rounded-2xl border-slate-700 bg-slate-900/40 text-slate-200 backdrop-blur transition hover:bg-slate-800\"\n    >\n      {children}\n    </Button>\n  );\n}\n"],"names":[],"mappings":";;;;;;AAEA;AAEA;AAJA;;;;AAYO,SAAS,WAAW,EAAE,KAAK,EAAE,WAAW,EAAE,OAAO,EAAmB;IACzE,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,0LAAA,CAAA,SAAM,CAAC,EAAE;wBACR,WAAU;wBACV,SAAS;4BAAE,SAAS;4BAAG,GAAG;wBAAG;wBAC7B,SAAS;4BAAE,SAAS;4BAAG,GAAG;wBAAE;wBAC5B,YAAY;4BAAE,MAAM;4BAAU,WAAW;4BAAK,SAAS;wBAAG;kCAEzD;;;;;;oBAEF,4BACC,8OAAC,0LAAA,CAAA,SAAM,CAAC,CAAC;wBACP,WAAU;wBACV,SAAS;4BAAE,SAAS;4BAAG,GAAG;wBAAE;wBAC5B,SAAS;4BAAE,SAAS;4BAAG,GAAG;wBAAE;wBAC5B,YAAY;4BAAE,OAAO;4BAAM,UAAU;wBAAI;kCAExC;;;;;+BAED;;;;;;;YAEL,wBACC,8OAAC,0LAAA,CAAA,SAAM,CAAC,GAAG;gBACT,WAAU;gBACV,SAAS;oBAAE,SAAS;oBAAG,GAAG,CAAC;gBAAE;gBAC7B,SAAS;oBAAE,SAAS;oBAAG,GAAG;gBAAE;gBAC5B,YAAY;oBAAE,OAAO;oBAAK,UAAU;gBAAI;0BAEvC;;;;;uBAED;;;;;;;AAGV;AAEO,SAAS,kBAAkB,EAAE,QAAQ,EAA2B;IACrE,qBACE,8OAAC,kIAAA,CAAA,SAAM;QACL,MAAK;QACL,WAAU;;0BAEV,8OAAC;gBAAK,WAAU;0BAAiB;;;;;;0BACjC,8OAAC;gBAAK,WAAU;;;;;;;;;;;;AAGtB;AAEO,SAAS,oBAAoB,EAAE,QAAQ,EAA2B;IACvE,qBACE,8OAAC,kIAAA,CAAA,SAAM;QACL,SAAQ;QACR,MAAK;QACL,WAAU;kBAET;;;;;;AAGP","debugId":null}},
    {"offset": {"line": 145, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/toggle.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport { cn } from \"@/lib/utils\";\n\ninterface ToggleProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  pressed?: boolean;\n  onPressedChange?: (pressed: boolean) => void;\n}\n\nexport const Toggle = React.forwardRef<HTMLButtonElement, ToggleProps>(\n  ({ pressed = false, onPressedChange, className, children, ...props }, ref) => {\n    return (\n      <button\n        type=\"button\"\n        ref={ref}\n        data-state={pressed ? \"on\" : \"off\"}\n        onClick={(event) => {\n          onPressedChange?.(!pressed);\n          props.onClick?.(event);\n        }}\n        className={cn(\n          \"inline-flex items-center justify-center rounded-xl px-3 py-2 text-sm font-medium transition\",\n          pressed\n            ? \"bg-cyan-500/20 text-cyan-200 ring-1 ring-cyan-500/60\"\n            : \"text-slate-300 hover:bg-slate-800/60\",\n          className,\n        )}\n        {...props}\n      >\n        {children}\n      </button>\n    );\n  },\n);\nToggle.displayName = \"Toggle\";\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AAUO,MAAM,uBAAS,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EACnC,CAAC,EAAE,UAAU,KAAK,EAAE,eAAe,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE;IACpE,qBACE,8OAAC;QACC,MAAK;QACL,KAAK;QACL,cAAY,UAAU,OAAO;QAC7B,SAAS,CAAC;YACR,kBAAkB,CAAC;YACnB,MAAM,OAAO,GAAG;QAClB;QACA,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,+FACA,UACI,yDACA,wCACJ;QAED,GAAG,KAAK;kBAER;;;;;;AAGP;AAEF,OAAO,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 180, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/vault/VaultDropzone.tsx"],"sourcesContent":["\"use client\";\n\nimport { useCallback } from \"react\";\nimport { useDropzone } from \"react-dropzone\";\nimport { motion } from \"framer-motion\";\nimport { cn } from \"@/lib/utils\";\nimport { UploadCloud } from \"lucide-react\";\n\ninterface VaultDropzoneProps {\n  onFiles?: (files: File[]) => void | Promise<void>;\n  disabled?: boolean;\n}\n\nexport function VaultDropzone({ onFiles, disabled }: VaultDropzoneProps) {\n  const handleDrop = useCallback(\n    (accepted: File[]) => {\n      if (!accepted.length || disabled) return;\n      void onFiles?.(accepted);\n    },\n    [disabled, onFiles],\n  );\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    onDrop: handleDrop,\n    multiple: true,\n    disabled,\n  });\n\n  return (\n    <motion.div\n      {...getRootProps({\n        className: cn(\n          \"relative flex h-56 cursor-pointer flex-col items-center justify-center rounded-[32px] border-2 border-dashed border-cyan-500/40 bg-slate-950/60 text-center transition\",\n          disabled ? \"cursor-not-allowed opacity-60\" : \"hover:border-cyan-400 hover:bg-slate-900/40\",\n          isDragActive ? \"border-cyan-400 bg-slate-900/30\" : undefined,\n        ),\n      })}\n      initial={{ opacity: 0, y: 8 }}\n      animate={{ opacity: 1, y: 0 }}\n      role=\"button\"\n      aria-label=\"Drop receipts or documents\"\n      tabIndex={0}\n    >\n      <input {...getInputProps()} aria-hidden />\n      <div className=\"flex flex-col items-center gap-4 px-6\">\n        <span className=\"flex h-16 w-16 items-center justify-center rounded-full bg-cyan-500/15 text-cyan-300\">\n          <UploadCloud className=\"h-8 w-8\" />\n        </span>\n        <div className=\"space-y-1\">\n          <p className=\"text-lg font-semibold text-white\">\n            Drop receipts or documents — encrypted client-side\n          </p>\n          <p className=\"text-sm text-slate-400\">\n            Beno extracts insights automatically with on-device encryption and background OCR.\n          </p>\n        </div>\n        <span className=\"rounded-full bg-slate-900/70 px-4 py-1 text-xs uppercase tracking-wide text-slate-300\">\n          {isDragActive ? \"Release to upload\" : \"Click to browse\"}\n        </span>\n      </div>\n    </motion.div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AAAA;AACA;AACA;AACA;AANA;;;;;;;AAaO,SAAS,cAAc,EAAE,OAAO,EAAE,QAAQ,EAAsB;IACrE,MAAM,aAAa,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAC3B,CAAC;QACC,IAAI,CAAC,SAAS,MAAM,IAAI,UAAU;QAClC,KAAK,UAAU;IACjB,GACA;QAAC;QAAU;KAAQ;IAGrB,MAAM,EAAE,YAAY,EAAE,aAAa,EAAE,YAAY,EAAE,GAAG,CAAA,GAAA,wKAAA,CAAA,cAAW,AAAD,EAAE;QAChE,QAAQ;QACR,UAAU;QACV;IACF;IAEA,qBACE,8OAAC,0LAAA,CAAA,SAAM,CAAC,GAAG;QACR,GAAG,aAAa;YACf,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,0KACA,WAAW,kCAAkC,+CAC7C,eAAe,oCAAoC;QAEvD,EAAE;QACF,SAAS;YAAE,SAAS;YAAG,GAAG;QAAE;QAC5B,SAAS;YAAE,SAAS;YAAG,GAAG;QAAE;QAC5B,MAAK;QACL,cAAW;QACX,UAAU;;0BAEV,8OAAC;gBAAO,GAAG,eAAe;gBAAE,aAAW;;;;;;0BACvC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAK,WAAU;kCACd,cAAA,8OAAC,oNAAA,CAAA,cAAW;4BAAC,WAAU;;;;;;;;;;;kCAEzB,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAE,WAAU;0CAAmC;;;;;;0CAGhD,8OAAC;gCAAE,WAAU;0CAAyB;;;;;;;;;;;;kCAIxC,8OAAC;wBAAK,WAAU;kCACb,eAAe,sBAAsB;;;;;;;;;;;;;;;;;;AAKhD","debugId":null}},
    {"offset": {"line": 303, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/progress.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,yBAAW,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG9B,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,OAAO,EAAE,oBACjC,8OAAC,oKAAA,CAAA,OAAsB;QACrB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,iEACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,oKAAA,CAAA,YAA2B;YAC1B,WAAU;YACV,OAAO;gBAAE,WAAW,CAAC,YAAY,EAAE,MAAM,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC;YAAC;;;;;;;;;;;AAIhE,SAAS,WAAW,GAAG,oKAAA,CAAA,OAAsB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 342, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/scroll-area.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC,0KAAA,CAAA,OAAwB;QACvB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,4BAA4B;QACzC,GAAG,KAAK;;0BAET,8OAAC,0KAAA,CAAA,WAA4B;gBAAC,WAAU;0BACrC;;;;;;0BAEH,8OAAC;;;;;0BACD,8OAAC,0KAAA,CAAA,SAA0B;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,0KAAA,CAAA,OAAwB,CAAC,WAAW;AAE7D,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,cAAc,UAAU,EAAE,GAAG,OAAO,EAAE,oBACpD,8OAAC,0KAAA,CAAA,sBAAuC;QACtC,KAAK;QACL,aAAa;QACb,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,iDACA,gBAAgB,cACd,sDACF,gBAAgB,gBACd,wDACF;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,0KAAA,CAAA,kBAAmC;YAAC,WAAU;;;;;;;;;;;AAGnD,UAAU,WAAW,GAAG,0KAAA,CAAA,sBAAuC,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 410, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/vault/UploadDocumentDialog.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { FileIcon, Loader2 } from \"lucide-react\";\nimport { VaultDropzone } from \"./VaultDropzone\";\n\ninterface UploadDocumentDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onUpload: (files: File[]) => Promise<void>;\n}\n\nexport function UploadDocumentDialog({ open, onOpenChange, onUpload }: UploadDocumentDialogProps) {\n  const [files, setFiles] = useState<File[]>([]);\n  const [isUploading, setIsUploading] = useState(false);\n  const [progress, setProgress] = useState(0);\n\n  useEffect(() => {\n    if (!open) {\n      setFiles([]);\n      setProgress(0);\n      setIsUploading(false);\n    }\n  }, [open]);\n\n  const handleUpload = async () => {\n    if (!files.length) return;\n    setIsUploading(true);\n    setProgress(12);\n    try {\n      await onUpload(files);\n      setProgress(100);\n      setTimeout(() => {\n        onOpenChange(false);\n      }, 350);\n    } finally {\n      setIsUploading(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-2xl rounded-3xl border border-slate-800 bg-slate-950/95 text-slate-100\">\n        <DialogHeader>\n          <DialogTitle>Upload encrypted documents</DialogTitle>\n          <DialogDescription>\n            Files are encrypted locally with AES-GCM before leaving your device. We never receive plaintext copies.\n          </DialogDescription>\n        </DialogHeader>\n\n        <VaultDropzone\n          onFiles={(dropped) => setFiles((prev) => [...prev, ...dropped])}\n          disabled={isUploading}\n        />\n\n        <div className=\"rounded-2xl border border-slate-800/80 bg-slate-900/40 p-4\">\n          <div className=\"flex items-center justify-between text-sm text-slate-400\">\n            <span>Selected files</span>\n            <span>{files.length} total</span>\n          </div>\n          <ScrollArea className=\"mt-3 max-h-56\">\n            <div className=\"space-y-2\">\n              {files.length === 0 ? (\n                <p className=\"text-xs text-slate-500\">No files yet. Drag & drop receipts, bills, or PDFs.</p>\n              ) : (\n                files.map((file) => (\n                  <div\n                    key={`${file.name}-${file.lastModified}`}\n                    className=\"flex items-center justify-between rounded-xl bg-slate-950/60 px-4 py-2\"\n                  >\n                    <div className=\"flex items-center gap-3\">\n                      <span className=\"flex h-9 w-9 items-center justify-center rounded-xl bg-cyan-500/10 text-cyan-300\">\n                        <FileIcon className=\"h-4 w-4\" />\n                      </span>\n                      <div className=\"space-y-0.5\">\n                        <p className=\"text-sm font-medium text-white\">{file.name}</p>\n                        <p className=\"text-xs text-slate-400\">{(file.size / 1024).toFixed(1)} KB</p>\n                      </div>\n                    </div>\n                    <Badge variant=\"outline\" className=\"rounded-full border-cyan-500/60 text-cyan-200\">\n                      AES-GCM\n                    </Badge>\n                  </div>\n                ))\n              )}\n            </div>\n          </ScrollArea>\n        </div>\n\n        {isUploading ? (\n          <div className=\"space-y-2\">\n            <Progress value={progress} className=\"h-2 rounded-full bg-slate-800\" />\n            <p className=\"text-xs text-slate-400\">Encrypting and uploading…</p>\n          </div>\n        ) : null}\n\n        <DialogFooter className=\"flex items-center justify-between gap-2 sm:flex-row\">\n          <Button variant=\"ghost\" className=\"rounded-2xl\" onClick={() => onOpenChange(false)} disabled={isUploading}>\n            Cancel\n          </Button>\n          <Button\n            onClick={handleUpload}\n            className=\"rounded-2xl bg-gradient-to-r from-cyan-500 to-sky-500 text-white\"\n            disabled={isUploading || files.length === 0}\n          >\n            {isUploading ? (\n              <span className=\"flex items-center gap-2\">\n                <Loader2 className=\"h-4 w-4 animate-spin\" /> Uploading\n              </span>\n            ) : (\n              \"Encrypt & upload\"\n            )}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 713, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport {cn} from '@/lib/utils';\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, React.ComponentProps<'textarea'>>(\n  ({className, ...props}, ref) => {\n    return (\n      <textarea\n        className={cn(\n          'flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nTextarea.displayName = 'Textarea';\n\nexport {Textarea};\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AAEA,MAAM,yBAAW,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAC9B,CAAC,EAAC,SAAS,EAAE,GAAG,OAAM,EAAE;IACtB,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,qTACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,SAAS,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 741, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/vault/ScanAutoTagDialog.tsx"],"sourcesContent":["\"use client\";\n\nimport { ChangeEvent, useEffect, useMemo, useState } from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Input } from \"@/components/ui/input\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Camera, Loader2, Sparkles } from \"lucide-react\";\nimport Image from \"next/image\";\nimport type { AutoTagSuggestion, ScanResult } from \"@/lib/vault/useVault\";\n\ninterface ScanAutoTagDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onScan: (file: File) => Promise<ScanResult>;\n  onSave: (payload: {\n    file: File;\n    extracted?: ScanResult[\"extracted\"];\n    suggestions?: AutoTagSuggestion;\n    links?: ScanResult[\"links\"];\n  }) => Promise<void>;\n}\n\nexport function ScanAutoTagDialog({ open, onOpenChange, onScan, onSave }: ScanAutoTagDialogProps) {\n  const [file, setFile] = useState<File | null>(null);\n  const [preview, setPreview] = useState<string | null>(null);\n  const [result, setResult] = useState<ScanResult | null>(null);\n  const [isScanning, setIsScanning] = useState(false);\n  const { toast } = useToast();\n\n  useEffect(() => {\n    if (!open) {\n      setFile(null);\n      setPreview(null);\n      setResult(null);\n      setIsScanning(false);\n    }\n  }, [open]);\n\n  const handleFile = async (event: ChangeEvent<HTMLInputElement>) => {\n    const selected = event.target.files?.[0];\n    if (!selected) return;\n    setFile(selected);\n    setPreview(URL.createObjectURL(selected));\n    setIsScanning(true);\n    try {\n      const scan = await onScan(selected);\n      setResult(scan);\n    } catch (error) {\n      console.error(error);\n      toast({ title: \"Scan failed\", description: \"Unable to process the document.\" });\n    } finally {\n      setIsScanning(false);\n    }\n  };\n\n  const handleSave = async () => {\n    if (!file) return;\n    await onSave({ file, extracted: result?.extracted, suggestions: result?.suggestions, links: result?.links });\n    onOpenChange(false);\n  };\n\n  const detectedFields = useMemo(() => {\n    if (!result?.extracted?.fields) return [];\n    return Object.entries(result.extracted.fields);\n  }, [result]);\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-4xl rounded-3xl border border-slate-800 bg-slate-950/95 text-slate-100\">\n        <DialogHeader>\n          <DialogTitle>Scan & auto-tag</DialogTitle>\n          <DialogDescription>Capture a receipt or document, run OCR, and let Beno suggest structure.</DialogDescription>\n        </DialogHeader>\n        <div className=\"grid gap-6 lg:grid-cols-[1.2fr_1fr]\">\n          <div className=\"space-y-4\">\n            <label className=\"block rounded-2xl border border-slate-800/80 bg-slate-900/40 p-6 text-center\">\n              <input type=\"file\" accept=\"image/*,application/pdf\" className=\"hidden\" onChange={handleFile} />\n              <div className=\"flex flex-col items-center gap-3 text-slate-300\">\n                <span className=\"flex h-12 w-12 items-center justify-center rounded-full bg-cyan-500/15 text-cyan-300\">\n                  {isScanning ? <Loader2 className=\"h-6 w-6 animate-spin\" /> : <Camera className=\"h-6 w-6\" />}\n                </span>\n                <p className=\"text-sm font-medium\">{file ? file.name : \"Drop or capture a new document\"}</p>\n                <p className=\"text-xs text-slate-500\">Supports live photos, screenshots, and PDFs.</p>\n              </div>\n            </label>\n            <div className=\"rounded-2xl border border-slate-800/80 bg-slate-900/40 p-4\">\n              <h3 className=\"mb-2 text-sm font-semibold text-white\">Preview</h3>\n              <div className=\"flex h-64 items-center justify-center rounded-2xl bg-slate-950/60\">\n                {preview ? (\n                  <Image\n                    src={preview}\n                    alt=\"Document preview\"\n                    width={320}\n                    height={240}\n                    className=\"max-h-full rounded-2xl object-contain\"\n                  />\n                ) : (\n                  <div className=\"flex flex-col items-center gap-2 text-slate-500\">\n                    <Sparkles className=\"h-6 w-6\" />\n                    <p className=\"text-xs\">OCR results appear here after scanning.</p>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n          <div className=\"space-y-4\">\n            <div className=\"rounded-2xl border border-slate-800/80 bg-slate-900/40 p-4\">\n              <h3 className=\"text-sm font-semibold text-white\">Extracted text</h3>\n              <Textarea\n                value={result?.extracted?.text ?? \"\"}\n                onChange={(event) =>\n                  setResult((prev) =>\n                    prev\n                      ? {\n                          ...prev,\n                          extracted: { ...prev.extracted, text: event.target.value },\n                        }\n                      : prev,\n                  )\n                }\n                placeholder=\"OCR output will appear here\"\n                className=\"mt-2 h-40 rounded-2xl bg-slate-950/60\"\n              />\n            </div>\n            <div className=\"rounded-2xl border border-slate-800/80 bg-slate-900/40 p-4\">\n              <div className=\"mb-3 flex items-center justify-between\">\n                <h3 className=\"text-sm font-semibold text-white\">Detected fields</h3>\n                <Badge variant=\"outline\" className=\"rounded-full border-cyan-500/60 text-cyan-200\">\n                  Suggestions\n                </Badge>\n              </div>\n              <ScrollArea className=\"max-h-48 pr-4\">\n                {detectedFields.length === 0 ? (\n                  <p className=\"text-xs text-slate-500\">No structured fields detected yet.</p>\n                ) : (\n                  <div className=\"space-y-3\">\n                    {detectedFields.map(([key, value]) => (\n                      <div key={key} className=\"rounded-xl bg-slate-950/60 p-3 text-xs text-slate-200\">\n                        <p className=\"font-semibold uppercase tracking-wide text-slate-400\">{key}</p>\n                        <Input\n                          className=\"mt-1 h-9 rounded-xl bg-slate-900/60 text-sm\"\n                          value={String(value ?? \"\")}\n                          onChange={(event) =>\n                            setResult((prev) =>\n                              prev\n                                ? {\n                                    ...prev,\n                                    extracted: {\n                                      ...prev.extracted,\n                                      fields: {\n                                        ...prev.extracted?.fields,\n                                        [key]: event.target.value,\n                                      },\n                                    },\n                                  }\n                                : prev,\n                            )\n                          }\n                        />\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </ScrollArea>\n            </div>\n            {result?.suggestions ? (\n              <div className=\"rounded-2xl border border-slate-800/80 bg-slate-900/40 p-4\">\n                <h3 className=\"text-sm font-semibold text-white\">Suggested classification</h3>\n                <div className=\"mt-2 flex flex-wrap gap-2 text-xs text-slate-300\">\n                  {result.suggestions.type ? (\n                    <Badge className=\"rounded-full bg-cyan-500/20 text-cyan-200\">\n                      Type: {result.suggestions.type}\n                    </Badge>\n                  ) : null}\n                  {result.suggestions.tags?.map((tag) => (\n                    <Badge key={tag} variant=\"outline\" className=\"rounded-full border-cyan-500/60 text-cyan-200\">\n                      #{tag}\n                    </Badge>\n                  ))}\n                </div>\n              </div>\n            ) : null}\n          </div>\n        </div>\n        <DialogFooter className=\"flex items-center justify-between gap-2\">\n          <Button variant=\"ghost\" className=\"rounded-2xl\" onClick={() => onOpenChange(false)}>\n            Cancel\n          </Button>\n          <Button\n            onClick={handleSave}\n            className=\"rounded-2xl bg-gradient-to-r from-cyan-500 to-sky-500 text-white\"\n            disabled={!file || isScanning}\n          >\n            Save as document\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1217, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/vault/FiltersDrawer.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetFooter,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Badge } from \"@/components/ui/badge\";\n\nconst typeOptions = [\n  \"id\",\n  \"bill\",\n  \"receipt\",\n  \"medical\",\n  \"insurance\",\n  \"contract\",\n  \"education\",\n  \"vehicle\",\n  \"housing\",\n  \"other\",\n];\n\nconst sourceOptions = [\"upload\", \"scan\", \"email\"];\n\nexport interface VaultFilters {\n  types?: string[];\n  tags?: string[];\n  expiry?: \"active\" | \"90\" | \"expired\";\n  linkedStatus?: \"linked\" | \"unlinked\";\n  source?: string[];\n}\n\ninterface FiltersDrawerProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  filters: VaultFilters;\n  onApply: (filters: VaultFilters) => void;\n}\n\nexport function FiltersDrawer({ open, onOpenChange, filters, onApply }: FiltersDrawerProps) {\n  const [local, setLocal] = useState<VaultFilters>({});\n  const [tagInput, setTagInput] = useState(\"\");\n\n  useEffect(() => {\n    if (open) {\n      setLocal(filters);\n      setTagInput(\"\");\n    }\n  }, [open, filters]);\n\n  const toggleValue = (key: keyof VaultFilters, value: string) => {\n    setLocal((prev) => {\n      const list = new Set(prev[key] as string[] | undefined);\n      if (list.has(value)) {\n        list.delete(value);\n      } else {\n        list.add(value);\n      }\n      return { ...prev, [key]: Array.from(list) };\n    });\n  };\n\n  const apply = () => {\n    onApply(local);\n    onOpenChange(false);\n  };\n\n  const addTag = () => {\n    if (!tagInput.trim()) return;\n    setLocal((prev) => ({\n      ...prev,\n      tags: Array.from(new Set([...(prev.tags ?? []), tagInput.trim().toLowerCase()])),\n    }));\n    setTagInput(\"\");\n  };\n\n  return (\n    <Sheet open={open} onOpenChange={onOpenChange}>\n      <SheetContent side=\"right\" className=\"flex w-full max-w-md flex-col gap-6 bg-slate-950/95 text-slate-100\">\n        <SheetHeader>\n          <SheetTitle>Filters</SheetTitle>\n          <SheetDescription>Refine the documents shown in this workspace.</SheetDescription>\n        </SheetHeader>\n        <div className=\"space-y-6\">\n          <section className=\"space-y-2\">\n            <h3 className=\"text-sm font-semibold text-white\">Types</h3>\n            <div className=\"flex flex-wrap gap-2\">\n              {typeOptions.map((type) => (\n                <Button\n                  key={type}\n                  variant={local.types?.includes(type) ? \"default\" : \"secondary\"}\n                  className=\"rounded-full\"\n                  onClick={() => toggleValue(\"types\", type)}\n                >\n                  {type}\n                </Button>\n              ))}\n            </div>\n          </section>\n          <section className=\"space-y-2\">\n            <h3 className=\"text-sm font-semibold text-white\">Tags</h3>\n            <div className=\"flex items-center gap-2\">\n              <Input\n                value={tagInput}\n                onChange={(event) => setTagInput(event.target.value)}\n                placeholder=\"Add tag\"\n                className=\"h-9 rounded-2xl bg-slate-900/60\"\n              />\n              <Button className=\"rounded-2xl\" onClick={addTag}>\n                Add\n              </Button>\n            </div>\n            <div className=\"flex flex-wrap gap-2\">\n              {local.tags?.map((tag) => (\n                <Badge key={tag} className=\"rounded-full bg-cyan-500/20 text-cyan-200\">\n                  #{tag}\n                </Badge>\n              ))}\n            </div>\n          </section>\n          <section className=\"space-y-2\">\n            <h3 className=\"text-sm font-semibold text-white\">Expiry</h3>\n            <div className=\"flex flex-wrap gap-2\">\n              {[\n                { label: \"Active\", value: \"active\" },\n                { label: \"Expiring 90d\", value: \"90\" },\n                { label: \"Expired\", value: \"expired\" },\n              ].map((option) => (\n                <Button\n                  key={option.value}\n                  variant={local.expiry === option.value ? \"default\" : \"secondary\"}\n                  className=\"rounded-full\"\n                  onClick={() => setLocal((prev) => ({ ...prev, expiry: option.value as VaultFilters[\"expiry\"] }))}\n                >\n                  {option.label}\n                </Button>\n              ))}\n            </div>\n          </section>\n          <section className=\"space-y-2\">\n            <h3 className=\"text-sm font-semibold text-white\">Linked status</h3>\n            <div className=\"flex gap-2\">\n              <Button\n                variant={local.linkedStatus === \"linked\" ? \"default\" : \"secondary\"}\n                className=\"rounded-full\"\n                onClick={() => setLocal((prev) => ({ ...prev, linkedStatus: \"linked\" }))}\n              >\n                Linked\n              </Button>\n              <Button\n                variant={local.linkedStatus === \"unlinked\" ? \"default\" : \"secondary\"}\n                className=\"rounded-full\"\n                onClick={() => setLocal((prev) => ({ ...prev, linkedStatus: \"unlinked\" }))}\n              >\n                Unlinked\n              </Button>\n            </div>\n          </section>\n          <section className=\"space-y-2\">\n            <h3 className=\"text-sm font-semibold text-white\">Source</h3>\n            <div className=\"flex flex-wrap gap-2\">\n              {sourceOptions.map((source) => (\n                <Button\n                  key={source}\n                  variant={local.source?.includes(source) ? \"default\" : \"secondary\"}\n                  className=\"rounded-full\"\n                  onClick={() => toggleValue(\"source\", source)}\n                >\n                  {source}\n                </Button>\n              ))}\n            </div>\n          </section>\n        </div>\n        <SheetFooter className=\"mt-auto flex gap-2\">\n          <Button variant=\"ghost\" className=\"rounded-2xl\" onClick={() => onApply({})}>\n            Reset\n          </Button>\n          <Button className=\"rounded-2xl bg-gradient-to-r from-cyan-500 to-sky-500 text-white\" onClick={apply}>\n            Apply filters\n          </Button>\n        </SheetFooter>\n      </SheetContent>\n    </Sheet>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1608, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/checkbox.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,yBAAW,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG9B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,oKAAA,CAAA,OAAsB;QACrB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,kTACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,oKAAA,CAAA,YAA2B;YAC1B,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE;sBAEd,cAAA,8OAAC,oMAAA,CAAA,QAAK;gBAAC,WAAU;;;;;;;;;;;;;;;;AAIvB,SAAS,WAAW,GAAG,oKAAA,CAAA,OAAsB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 1653, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG1B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,4DACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,sDACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 1734, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/vault/DocCard.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { motion } from \"framer-motion\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card } from \"@/components/ui/card\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { cn } from \"@/lib/utils\";\nimport type { VaultDocument } from \"@/lib/vault/useVault\";\nimport { CalendarClock, Edit3, ExternalLink, Link2, MoreHorizontal, Share2, Tags, Trash2 } from \"lucide-react\";\nimport * as Lucide from \"lucide-react\";\nimport { Input } from \"@/components/ui/input\";\n\nconst typeIcons: Record<string, Lucide.LucideIcon> = {\n  bill: Lucide.Receipt,\n  receipt: Lucide.Receipt,\n  medical: Lucide.Stethoscope,\n  contract: Lucide.FileSignature,\n  insurance: Lucide.ShieldCheck,\n  id: Lucide.IdCard,\n  education: Lucide.GraduationCap,\n  vehicle: Lucide.Car,\n  housing: Lucide.Home,\n  other: Lucide.FileText,\n};\n\ninterface DocCardProps {\n  doc: VaultDocument;\n  viewMode: \"grid\" | \"list\";\n  bulkMode?: boolean;\n  selected?: boolean;\n  onToggleSelect: (id: string) => void;\n  onOpen: (doc: VaultDocument) => void;\n  onRename: (doc: VaultDocument) => void;\n  onTags: (doc: VaultDocument, tag: string) => void;\n  onSetExpiry: (doc: VaultDocument) => void;\n  onLink: (doc: VaultDocument) => void;\n  onShare: (doc: VaultDocument) => void;\n  onMove: (doc: VaultDocument) => void;\n  onDelete: (ids: string[]) => void;\n  onDownload: (doc: VaultDocument, mode: \"encrypted\" | \"decrypted\") => void;\n}\n\nexport function DocCard({\n  doc,\n  viewMode,\n  bulkMode,\n  selected,\n  onToggleSelect,\n  onOpen,\n  onRename,\n  onTags,\n  onSetExpiry,\n  onLink,\n  onShare,\n  onMove,\n  onDelete,\n  onDownload,\n}: DocCardProps) {\n  const Icon = typeIcons[doc.type ?? \"\"] ?? Lucide.FileText;\n  const [isEditing, setIsEditing] = useState(false);\n  const [name, setName] = useState(doc.filename);\n\n  const handleRename = () => {\n    if (!name.trim()) return;\n    onRename({ ...doc, filename: name.trim() });\n    setIsEditing(false);\n  };\n\n  const layoutClass = viewMode === \"grid\" ? \"flex-col items-start\" : \"flex-row items-center\";\n\n  const content = (\n    <Card\n      className={cn(\n        \"group relative flex h-full w-full gap-3 rounded-3xl border border-slate-900/60 bg-slate-950/70 p-4 transition\",\n        selected ? \"border-cyan-500/60 bg-slate-900/70\" : \"hover:border-cyan-500/40\",\n      )}\n      role=\"article\"\n      aria-label={`${doc.filename} document`}\n    >\n      <div className=\"flex w-full gap-4\">\n        <div className=\"flex flex-col items-center gap-3\">\n          <span className=\"flex h-12 w-12 items-center justify-center rounded-2xl bg-cyan-500/15 text-cyan-300\">\n            <Icon className=\"h-6 w-6\" />\n          </span>\n          {bulkMode ? (\n            <Checkbox\n              checked={selected}\n              onCheckedChange={() => onToggleSelect(doc.id)}\n              aria-label={`Select ${doc.filename}`}\n            />\n          ) : null}\n        </div>\n        <div className={cn(\"flex flex-1\", layoutClass, viewMode === \"list\" ? \"gap-4\" : \"gap-3\")}> \n          <div className=\"flex-1 space-y-1\">\n            {isEditing ? (\n              <div className=\"flex items-center gap-2\">\n                <Input\n                  value={name}\n                  onChange={(event) => setName(event.target.value)}\n                  onKeyDown={(event) => {\n                    if (event.key === \"Enter\") handleRename();\n                    if (event.key === \"Escape\") {\n                      setIsEditing(false);\n                      setName(doc.filename);\n                    }\n                  }}\n                  className=\"h-9 rounded-xl bg-slate-900/60\"\n                  aria-label=\"Document name\"\n                  autoFocus\n                />\n                <Button size=\"sm\" className=\"rounded-xl\" onClick={handleRename}>\n                  Save\n                </Button>\n              </div>\n            ) : (\n              <button\n                className=\"text-left text-base font-semibold text-white hover:text-cyan-200\"\n                onClick={() => onOpen(doc)}\n              >\n                {doc.filename}\n              </button>\n            )}\n            <p className=\"text-xs text-slate-400\">\n              Updated {doc.updatedAtFormatted ?? \"just now\"} • {doc.type ?? \"Unclassified\"}\n            </p>\n            <div className=\"flex flex-wrap gap-2\">\n              {doc.tags?.map((tag) => (\n                <Badge key={tag} variant=\"outline\" className=\"rounded-full border-cyan-500/50 text-cyan-200\">\n                  #{tag}\n                </Badge>\n              ))}\n              {doc.tags?.length === 0 ? (\n                <button\n                  className=\"text-xs text-cyan-300\"\n                  onClick={() => onTags(doc, \"review\")}\n                  type=\"button\"\n                >\n                  + tag\n                </button>\n              ) : null}\n            </div>\n          </div>\n          <div className=\"flex flex-col gap-2 text-xs text-slate-400\">\n            {doc.expireDate ? (\n              <Badge className=\"self-start rounded-full bg-amber-500/20 text-amber-300\">\n                Expires {doc.expireDateFormatted}\n              </Badge>\n            ) : null}\n            {doc.links ? (\n              <div className=\"flex flex-col gap-1\">\n                {doc.links.billId ? <LinkBadge label=\"Bill\" /> : null}\n                {doc.links.txnId ? <LinkBadge label=\"Transaction\" /> : null}\n                {doc.links.eventId ? <LinkBadge label=\"Event\" /> : null}\n                {doc.links.medId ? <LinkBadge label=\"Medication\" /> : null}\n              </div>\n            ) : null}\n          </div>\n        </div>\n        <div className=\"flex items-start justify-end\">\n          <DropdownMenu>\n            <DropdownMenuTrigger asChild>\n              <Button variant=\"ghost\" size=\"icon\" className=\"rounded-full text-slate-400 hover:text-white\">\n                <MoreHorizontal className=\"h-4 w-4\" />\n              </Button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent className=\"w-48 rounded-xl border border-slate-800 bg-slate-950\">\n              <DropdownMenuLabel>Quick actions</DropdownMenuLabel>\n              <DropdownMenuSeparator />\n              <DropdownMenuItem onClick={() => onOpen(doc)}>\n                <ExternalLink className=\"mr-2 h-4 w-4\" /> Open\n              </DropdownMenuItem>\n              <DropdownMenuItem onClick={() => setIsEditing(true)}>\n                <Edit3 className=\"mr-2 h-4 w-4\" /> Rename\n              </DropdownMenuItem>\n              <DropdownMenuItem onClick={() => onSetExpiry(doc)}>\n                <CalendarClock className=\"mr-2 h-4 w-4\" /> Set expiry\n              </DropdownMenuItem>\n              <DropdownMenuItem onClick={() => onLink(doc)}>\n                <Link2 className=\"mr-2 h-4 w-4\" /> Link entities\n              </DropdownMenuItem>\n              <DropdownMenuItem onClick={() => onShare(doc)}>\n                <Share2 className=\"mr-2 h-4 w-4\" /> Share access\n              </DropdownMenuItem>\n              <DropdownMenuItem onClick={() => onMove(doc)}>\n                <Tags className=\"mr-2 h-4 w-4\" /> Move to folder\n              </DropdownMenuItem>\n              <DropdownMenuSeparator />\n              <DropdownMenuItem onClick={() => onDownload(doc, \"encrypted\")}>Encrypted download</DropdownMenuItem>\n              <DropdownMenuItem onClick={() => onDownload(doc, \"decrypted\")}>Download decrypted</DropdownMenuItem>\n              <DropdownMenuSeparator />\n              <DropdownMenuItem onClick={() => onDelete([doc.id])} className=\"text-red-400\">\n                <Trash2 className=\"mr-2 h-4 w-4\" /> Delete\n              </DropdownMenuItem>\n            </DropdownMenuContent>\n          </DropdownMenu>\n        </div>\n      </div>\n    </Card>\n  );\n\n  return viewMode === \"grid\" ? (\n    <motion.div layout className=\"h-full\">\n      {content}\n    </motion.div>\n  ) : (\n    <motion.div layout className=\"h-full\">\n      {content}\n    </motion.div>\n  );\n}\n\nfunction LinkBadge({ label }: { label: string }) {\n  return (\n    <Badge variant=\"outline\" className=\"rounded-full border-slate-700 text-slate-200\">\n      Linked {label}\n    </Badge>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2261, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/vault/DocGrid.tsx"],"sourcesContent":["\"use client\";\n\nimport { Fragment } from \"react\";\nimport { DocCard } from \"./DocCard\";\nimport type { VaultDocument } from \"@/lib/vault/useVault\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { motion } from \"framer-motion\";\n\ninterface DocGridProps {\n  docs: VaultDocument[];\n  viewMode: \"grid\" | \"list\";\n  bulkMode?: boolean;\n  selectedIds: string[];\n  isLoading?: boolean;\n  onToggleSelect: (id: string) => void;\n  onOpen: (doc: VaultDocument) => void;\n  onRename: (doc: VaultDocument) => void;\n  onTags: (doc: VaultDocument, tag: string) => void;\n  onSetExpiry: (doc: VaultDocument) => void;\n  onLink: (doc: VaultDocument) => void;\n  onShare: (doc: VaultDocument) => void;\n  onMove: (doc: VaultDocument) => void;\n  onDelete: (ids: string[]) => void;\n  onDownload: (doc: VaultDocument, mode: \"encrypted\" | \"decrypted\") => void;\n}\n\nexport function DocGrid({\n  docs,\n  viewMode,\n  bulkMode,\n  selectedIds,\n  isLoading,\n  onToggleSelect,\n  onOpen,\n  onRename,\n  onTags,\n  onSetExpiry,\n  onLink,\n  onShare,\n  onMove,\n  onDelete,\n  onDownload,\n}: DocGridProps) {\n  if (isLoading) {\n    return (\n      <div className=\"grid gap-4 md:grid-cols-2 xl:grid-cols-3\">\n        {Array.from({ length: 6 }).map((_, index) => (\n          <Skeleton key={index} className=\"h-48 rounded-3xl bg-slate-900/60\" />\n        ))}\n      </div>\n    );\n  }\n\n  if (!docs.length) {\n    return (\n      <motion.div\n        className=\"rounded-3xl border border-dashed border-slate-800/70 bg-slate-950/60 p-12 text-center text-slate-400\"\n        initial={{ opacity: 0, y: 12 }}\n        animate={{ opacity: 1, y: 0 }}\n      >\n        <p className=\"text-lg font-medium text-slate-200\">No documents match your filters.</p>\n        <p className=\"text-sm text-slate-400\">Upload a file or adjust filters to see items in your vault.</p>\n      </motion.div>\n    );\n  }\n\n  if (viewMode === \"list\") {\n    return (\n      <div className=\"space-y-3\">\n        {docs.map((doc) => (\n          <DocCard\n            key={doc.id}\n            doc={doc}\n            viewMode={viewMode}\n            bulkMode={bulkMode}\n            selected={selectedIds.includes(doc.id)}\n            onToggleSelect={onToggleSelect}\n            onOpen={onOpen}\n            onRename={onRename}\n            onTags={onTags}\n            onSetExpiry={onSetExpiry}\n            onLink={onLink}\n            onShare={onShare}\n            onMove={onMove}\n            onDelete={onDelete}\n            onDownload={onDownload}\n          />\n        ))}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"grid gap-4 md:grid-cols-2 xl:grid-cols-3\">\n      {docs.map((doc) => (\n        <Fragment key={doc.id}>\n          <DocCard\n            doc={doc}\n            viewMode={viewMode}\n            bulkMode={bulkMode}\n            selected={selectedIds.includes(doc.id)}\n            onToggleSelect={onToggleSelect}\n            onOpen={onOpen}\n            onRename={onRename}\n            onTags={onTags}\n            onSetExpiry={onSetExpiry}\n            onLink={onLink}\n            onShare={onShare}\n            onMove={onMove}\n            onDelete={onDelete}\n            onDownload={onDownload}\n          />\n        </Fragment>\n      ))}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AACA;AANA;;;;;;AA0BO,SAAS,QAAQ,EACtB,IAAI,EACJ,QAAQ,EACR,QAAQ,EACR,WAAW,EACX,SAAS,EACT,cAAc,EACd,MAAM,EACN,QAAQ,EACR,MAAM,EACN,WAAW,EACX,MAAM,EACN,OAAO,EACP,MAAM,EACN,QAAQ,EACR,UAAU,EACG;IACb,IAAI,WAAW;QACb,qBACE,8OAAC;YAAI,WAAU;sBACZ,MAAM,IAAI,CAAC;gBAAE,QAAQ;YAAE,GAAG,GAAG,CAAC,CAAC,GAAG,sBACjC,8OAAC,oIAAA,CAAA,WAAQ;oBAAa,WAAU;mBAAjB;;;;;;;;;;IAIvB;IAEA,IAAI,CAAC,KAAK,MAAM,EAAE;QAChB,qBACE,8OAAC,0LAAA,CAAA,SAAM,CAAC,GAAG;YACT,WAAU;YACV,SAAS;gBAAE,SAAS;gBAAG,GAAG;YAAG;YAC7B,SAAS;gBAAE,SAAS;gBAAG,GAAG;YAAE;;8BAE5B,8OAAC;oBAAE,WAAU;8BAAqC;;;;;;8BAClD,8OAAC;oBAAE,WAAU;8BAAyB;;;;;;;;;;;;IAG5C;IAEA,IAAI,aAAa,QAAQ;QACvB,qBACE,8OAAC;YAAI,WAAU;sBACZ,KAAK,GAAG,CAAC,CAAC,oBACT,8OAAC,sIAAA,CAAA,UAAO;oBAEN,KAAK;oBACL,UAAU;oBACV,UAAU;oBACV,UAAU,YAAY,QAAQ,CAAC,IAAI,EAAE;oBACrC,gBAAgB;oBAChB,QAAQ;oBACR,UAAU;oBACV,QAAQ;oBACR,aAAa;oBACb,QAAQ;oBACR,SAAS;oBACT,QAAQ;oBACR,UAAU;oBACV,YAAY;mBAdP,IAAI,EAAE;;;;;;;;;;IAmBrB;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACZ,KAAK,GAAG,CAAC,CAAC,oBACT,8OAAC,qMAAA,CAAA,WAAQ;0BACP,cAAA,8OAAC,sIAAA,CAAA,UAAO;oBACN,KAAK;oBACL,UAAU;oBACV,UAAU;oBACV,UAAU,YAAY,QAAQ,CAAC,IAAI,EAAE;oBACrC,gBAAgB;oBAChB,QAAQ;oBACR,UAAU;oBACV,QAAQ;oBACR,aAAa;oBACb,QAAQ;oBACR,SAAS;oBACT,QAAQ;oBACR,UAAU;oBACV,YAAY;;;;;;eAfD,IAAI,EAAE;;;;;;;;;;AAqB7B","debugId":null}},
    {"offset": {"line": 2398, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/tabs.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,OAAO,gKAAA,CAAA,OAAkB;AAE/B,MAAM,yBAAW,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG9B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,gKAAA,CAAA,OAAkB;QACjB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,8FACA;QAED,GAAG,KAAK;;;;;;AAGb,SAAS,WAAW,GAAG,gKAAA,CAAA,OAAkB,CAAC,WAAW;AAErD,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,gKAAA,CAAA,UAAqB;QACpB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,uYACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,gKAAA,CAAA,UAAqB,CAAC,WAAW;AAE3D,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,gKAAA,CAAA,UAAqB;QACpB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,mIACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,gKAAA,CAAA,UAAqB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 2451, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/vault/DocViewerModal.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { toast } from \"@/hooks/use-toast\";\nimport { CalendarClock, Copy, Download, Link2, Printer, Share2, Tag, XCircle } from \"lucide-react\";\nimport type { VaultDocument } from \"@/lib/vault/useVault\";\n\ninterface DocViewerModalProps {\n  doc: VaultDocument | null;\n  onClose: () => void;\n  onUpdate: (id: string, payload: Partial<VaultDocument>) => Promise<void> | void;\n  onLink: () => void;\n  onShare: () => void;\n  onSetExpiry: () => void;\n  onOpenRoute: (route: string) => void;\n}\n\nexport function DocViewerModal({ doc, onClose, onUpdate, onLink, onShare, onSetExpiry, onOpenRoute }: DocViewerModalProps) {\n  const [notes, setNotes] = useState(\"\");\n  const [tagDraft, setTagDraft] = useState(\"\");\n\n  useEffect(() => {\n    if (doc) {\n      setNotes(doc.extracted?.text ?? \"\");\n      setTagDraft(\"\");\n    }\n  }, [doc]);\n\n  const fieldEntries = useMemo(() => {\n    if (!doc?.extracted?.fields) return [];\n    return Object.entries(doc.extracted.fields);\n  }, [doc]);\n\n  if (!doc) return null;\n\n  const handleCopy = async () => {\n    try {\n      await navigator.clipboard.writeText(doc.extracted?.text ?? \"\");\n      toast({ title: \"Copied\", description: \"OCR text copied to clipboard.\" });\n    } catch {\n      toast({ title: \"Copy failed\", description: \"Unable to copy text.\" });\n    }\n  };\n\n  const handleDownload = (mode: \"encrypted\" | \"decrypted\") => {\n    toast({\n      title: mode === \"decrypted\" ? \"Preparing decrypted copy\" : \"Downloading encrypted file\",\n      description: \"A secure download will start shortly.\",\n    });\n  };\n\n  const handleAddTag = () => {\n    if (!tagDraft.trim()) return;\n    const updated = Array.from(new Set([...(doc.tags ?? []), tagDraft.trim()]));\n    onUpdate(doc.id, { tags: updated });\n    setTagDraft(\"\");\n  };\n\n  return (\n    <Dialog open={Boolean(doc)} onOpenChange={(open) => (!open ? onClose() : undefined)}>\n      <DialogContent className=\"max-w-6xl overflow-hidden rounded-[32px] border border-slate-800 bg-slate-950/95 text-slate-100\">\n        <DialogHeader className=\"space-y-1\">\n          <DialogTitle className=\"text-2xl font-semibold text-white\">{doc.filename}</DialogTitle>\n          <DialogDescription>Securely decrypted on the client. Close to wipe from memory.</DialogDescription>\n        </DialogHeader>\n        <div className=\"grid gap-6 lg:grid-cols-[2fr_1fr]\">\n          <div className=\"space-y-4\">\n            <div className=\"flex flex-wrap items-center gap-2\">\n              <Button variant=\"secondary\" className=\"rounded-2xl\" onClick={handleCopy}>\n                <Copy className=\"mr-2 h-4 w-4\" /> Copy text\n              </Button>\n              <Button variant=\"secondary\" className=\"rounded-2xl\" onClick={() => handleDownload(\"encrypted\")}>\n                <Download className=\"mr-2 h-4 w-4\" /> Download\n              </Button>\n              <Button variant=\"secondary\" className=\"rounded-2xl\" onClick={() => handleDownload(\"decrypted\")}>\n                <Printer className=\"mr-2 h-4 w-4\" /> Print (secure)\n              </Button>\n            </div>\n            <Tabs defaultValue=\"preview\" className=\"rounded-3xl border border-slate-900/70 bg-slate-950/60 p-4\">\n              <TabsList className=\"grid h-10 grid-cols-2 rounded-2xl bg-slate-900/40\">\n                <TabsTrigger value=\"preview\">Document</TabsTrigger>\n                <TabsTrigger value=\"text\">OCR text</TabsTrigger>\n              </TabsList>\n              <TabsContent value=\"preview\" className=\"mt-4\">\n                <div className=\"flex h-[420px] items-center justify-center rounded-2xl bg-slate-900/40\">\n                  <p className=\"text-sm text-slate-500\">Encrypted file preview placeholder.</p>\n                </div>\n              </TabsContent>\n              <TabsContent value=\"text\" className=\"mt-4\">\n                <Textarea\n                  value={notes}\n                  onChange={(event) => {\n                    setNotes(event.target.value);\n                    onUpdate(doc.id, {\n                      extracted: { ...doc.extracted, text: event.target.value },\n                    });\n                  }}\n                  className=\"h-[420px] rounded-2xl bg-slate-900/40\"\n                />\n              </TabsContent>\n            </Tabs>\n          </div>\n          <ScrollArea className=\"h-[560px] rounded-3xl border border-slate-900/70 bg-slate-950/60 p-5\">\n            <div className=\"space-y-5\">\n              <section>\n                <h3 className=\"text-sm font-semibold text-white\">Details</h3>\n                <p className=\"mt-2 text-xs text-slate-400\">Uploaded {doc.createdAtFormatted}</p>\n                {doc.expireDate ? (\n                  <div className=\"mt-2 flex items-center gap-2 text-sm text-amber-200\">\n                    <CalendarClock className=\"h-4 w-4\" /> Expires {doc.expireDateFormatted}\n                  </div>\n                ) : (\n                  <Button variant=\"ghost\" className=\"mt-2 rounded-2xl text-slate-300\" onClick={onSetExpiry}>\n                    <CalendarClock className=\"mr-2 h-4 w-4\" /> Set expiry\n                  </Button>\n                )}\n              </section>\n              <Separator className=\"border-slate-800\" />\n              <section>\n                <h3 className=\"text-sm font-semibold text-white\">Tags</h3>\n                <div className=\"mt-2 flex flex-wrap gap-2\">\n                  {doc.tags?.map((tag) => (\n                    <Badge key={tag} className=\"rounded-full bg-cyan-500/20 text-cyan-200\">\n                      #{tag}\n                    </Badge>\n                  ))}\n                </div>\n                <div className=\"mt-3 flex gap-2\">\n                  <Input\n                    value={tagDraft}\n                    onChange={(event) => setTagDraft(event.target.value)}\n                    placeholder=\"Add tag\"\n                    className=\"h-9 rounded-xl bg-slate-900/60\"\n                  />\n                  <Button size=\"sm\" className=\"rounded-xl\" onClick={handleAddTag}>\n                    <Tag className=\"mr-1 h-4 w-4\" /> Add\n                  </Button>\n                </div>\n              </section>\n              <Separator className=\"border-slate-800\" />\n              <section>\n                <h3 className=\"text-sm font-semibold text-white\">Extracted fields</h3>\n                <div className=\"mt-3 space-y-3\">\n                  {fieldEntries.length === 0 ? (\n                    <p className=\"text-xs text-slate-500\">No structured fields captured yet.</p>\n                  ) : (\n                    fieldEntries.map(([key, value]) => (\n                      <div key={key} className=\"rounded-2xl bg-slate-900/40 p-3 text-xs text-slate-200\">\n                        <p className=\"font-semibold uppercase tracking-wide text-slate-400\">{key}</p>\n                        <Input\n                          value={String(value ?? \"\")}\n                          className=\"mt-1 h-9 rounded-xl bg-slate-950/60 text-sm\"\n                          onChange={(event) =>\n                            onUpdate(doc.id, {\n                              extracted: {\n                                ...doc.extracted,\n                                fields: {\n                                  ...doc.extracted?.fields,\n                                  [key]: event.target.value,\n                                },\n                              },\n                            })\n                          }\n                        />\n                      </div>\n                    ))\n                  )}\n                </div>\n              </section>\n              <Separator className=\"border-slate-800\" />\n              <section className=\"space-y-2\">\n                <h3 className=\"text-sm font-semibold text-white\">Linked entities</h3>\n                {doc.links ? (\n                  <div className=\"flex flex-col gap-2 text-xs text-cyan-200\">\n                    {doc.links.billId ? (\n                      <Button\n                        variant=\"ghost\"\n                        className=\"justify-start rounded-xl text-cyan-200 hover:bg-cyan-500/10\"\n                        onClick={() => onOpenRoute(`/finance/transactions?doc=${doc.id}`)}\n                      >\n                        <Link2 className=\"mr-2 h-4 w-4\" /> Open in Finance\n                      </Button>\n                    ) : null}\n                    {doc.links.eventId ? (\n                      <Button\n                        variant=\"ghost\"\n                        className=\"justify-start rounded-xl text-cyan-200 hover:bg-cyan-500/10\"\n                        onClick={() => onOpenRoute(`/schedule/calendar?event=${doc.links?.eventId}`)}\n                      >\n                        <Link2 className=\"mr-2 h-4 w-4\" /> Open in Schedule\n                      </Button>\n                    ) : null}\n                    {doc.links.medId ? (\n                      <Button\n                        variant=\"ghost\"\n                        className=\"justify-start rounded-xl text-cyan-200 hover:bg-cyan-500/10\"\n                        onClick={() => onOpenRoute(`/household/care?med=${doc.links?.medId}`)}\n                      >\n                        <Link2 className=\"mr-2 h-4 w-4\" /> Open in Care\n                      </Button>\n                    ) : null}\n                  </div>\n                ) : (\n                  <p className=\"text-xs text-slate-500\">No links yet.</p>\n                )}\n                <Button variant=\"secondary\" className=\"rounded-2xl\" onClick={onLink}>\n                  <Link2 className=\"mr-2 h-4 w-4\" /> Manage links\n                </Button>\n              </section>\n              <Separator className=\"border-slate-800\" />\n              <section className=\"space-y-2\">\n                <h3 className=\"text-sm font-semibold text-white\">Sharing</h3>\n                <Button variant=\"secondary\" className=\"rounded-2xl\" onClick={onShare}>\n                  <Share2 className=\"mr-2 h-4 w-4\" /> Manage sharing\n                </Button>\n                <Button\n                  variant=\"ghost\"\n                  className=\"justify-start rounded-2xl text-red-300 hover:bg-red-500/10\"\n                  onClick={onClose}\n                >\n                  <XCircle className=\"mr-2 h-4 w-4\" /> Close & purge cache\n                </Button>\n              </section>\n            </div>\n          </ScrollArea>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3157, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/calendar.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n"],"names":[],"mappings":";;;;AAGA;AAAA;AACA;AAEA;AACA;AAPA;;;;;;AAWA,SAAS,SAAS,EAChB,SAAS,EACT,UAAU,EACV,kBAAkB,IAAI,EACtB,GAAG,OACW;IACd,qBACE,8OAAC,8JAAA,CAAA,YAAS;QACR,iBAAiB;QACjB,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,OAAO;QACrB,YAAY;YACV,QAAQ;YACR,OAAO;YACP,SAAS;YACT,eAAe;YACf,KAAK;YACL,YAAY,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACX,CAAA,GAAA,kIAAA,CAAA,iBAAc,AAAD,EAAE;gBAAE,SAAS;YAAU,IACpC;YAEF,qBAAqB;YACrB,iBAAiB;YACjB,OAAO;YACP,UAAU;YACV,WACE;YACF,KAAK;YACL,MAAM;YACN,KAAK,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACJ,CAAA,GAAA,kIAAA,CAAA,iBAAc,AAAD,EAAE;gBAAE,SAAS;YAAQ,IAClC;YAEF,eAAe;YACf,cACE;YACF,WAAW;YACX,aACE;YACF,cAAc;YACd,kBACE;YACF,YAAY;YACZ,GAAG,UAAU;QACf;QACA,YAAY;YACV,UAAU,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,iBAChC,8OAAC,oNAAA,CAAA,cAAW;oBAAC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,WAAW;oBAAa,GAAG,KAAK;;;;;;YAE7D,WAAW,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,iBACjC,8OAAC,sNAAA,CAAA,eAAY;oBAAC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,WAAW;oBAAa,GAAG,KAAK;;;;;;QAEhE;QACC,GAAG,KAAK;;;;;;AAGf;AACA,SAAS,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 3237, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/toggle-group.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport { Toggle } from \"./toggle\";\n\ntype ToggleGroupContextValue = {\n  type: \"multiple\" | \"single\";\n  value: string[];\n  onValueChange: (value: string[]) => void;\n};\n\nconst ToggleGroupContext = React.createContext<ToggleGroupContextValue | null>(null);\n\ninterface ToggleGroupProps {\n  value: string[];\n  onValueChange: (value: string[]) => void;\n  type: \"multiple\" | \"single\";\n  className?: string;\n  children: React.ReactNode;\n}\n\nexport function ToggleGroup({ value, onValueChange, type, className, children }: ToggleGroupProps) {\n  return (\n    <ToggleGroupContext.Provider value={{ value, onValueChange, type }}>\n      <div className={cn(\"inline-flex flex-wrap gap-2\", className)}>{children}</div>\n    </ToggleGroupContext.Provider>\n  );\n}\n\ninterface ToggleGroupItemProps extends React.ComponentProps<typeof Toggle> {\n  value: string;\n}\n\nexport function ToggleGroupItem({ value, children, className, ...props }: ToggleGroupItemProps) {\n  const context = React.useContext(ToggleGroupContext);\n  if (!context) {\n    throw new Error(\"ToggleGroupItem must be used within a ToggleGroup\");\n  }\n  const pressed = context.value.includes(value);\n  return (\n    <Toggle\n      {...props}\n      className={cn(\"rounded-full\", className)}\n      pressed={pressed}\n      onPressedChange={(next) => {\n        if (context.type === \"single\") {\n          context.onValueChange(next ? [value] : []);\n        } else {\n          const set = new Set(context.value);\n          if (next) set.add(value);\n          else set.delete(value);\n          context.onValueChange(Array.from(set));\n        }\n      }}\n    >\n      {children}\n    </Toggle>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAYA,MAAM,mCAAqB,CAAA,GAAA,qMAAA,CAAA,gBAAmB,AAAD,EAAkC;AAUxE,SAAS,YAAY,EAAE,KAAK,EAAE,aAAa,EAAE,IAAI,EAAE,SAAS,EAAE,QAAQ,EAAoB;IAC/F,qBACE,8OAAC,mBAAmB,QAAQ;QAAC,OAAO;YAAE;YAAO;YAAe;QAAK;kBAC/D,cAAA,8OAAC;YAAI,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,+BAA+B;sBAAa;;;;;;;;;;;AAGrE;AAMO,SAAS,gBAAgB,EAAE,KAAK,EAAE,QAAQ,EAAE,SAAS,EAAE,GAAG,OAA6B;IAC5F,MAAM,UAAU,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAAE;IACjC,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,MAAM,UAAU,QAAQ,KAAK,CAAC,QAAQ,CAAC;IACvC,qBACE,8OAAC,kIAAA,CAAA,SAAM;QACJ,GAAG,KAAK;QACT,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,gBAAgB;QAC9B,SAAS;QACT,iBAAiB,CAAC;YAChB,IAAI,QAAQ,IAAI,KAAK,UAAU;gBAC7B,QAAQ,aAAa,CAAC,OAAO;oBAAC;iBAAM,GAAG,EAAE;YAC3C,OAAO;gBACL,MAAM,MAAM,IAAI,IAAI,QAAQ,KAAK;gBACjC,IAAI,MAAM,IAAI,GAAG,CAAC;qBACb,IAAI,MAAM,CAAC;gBAChB,QAAQ,aAAa,CAAC,MAAM,IAAI,CAAC;YACnC;QACF;kBAEC;;;;;;AAGP","debugId":null}},
    {"offset": {"line": 3307, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/vault/SetExpiryDialog.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Calendar } from \"@/components/ui/calendar\";\nimport { ToggleGroup, ToggleGroupItem } from \"@/components/ui/toggle-group\";\nimport type { VaultDocument } from \"@/lib/vault/useVault\";\n\nconst reminderOptions = [90, 60, 30, 7, 1];\n\ninterface SetExpiryDialogProps {\n  doc: VaultDocument | null;\n  onClose: () => void;\n  onSave: (id: string, payload: { expireDate: Date | null; reminders: number[] }) => Promise<void> | void;\n}\n\nexport function SetExpiryDialog({ doc, onClose, onSave }: SetExpiryDialogProps) {\n  const [date, setDate] = useState<Date | undefined>();\n  const [reminders, setReminders] = useState<number[]>([]);\n\n  useEffect(() => {\n    if (doc?.expireDate) {\n      setDate(new Date(doc.expireDate));\n    } else {\n      setDate(undefined);\n    }\n    setReminders([]);\n  }, [doc]);\n\n  if (!doc) return null;\n\n  const handleSave = () => {\n    onSave(doc.id, { expireDate: date ?? null, reminders });\n    onClose();\n  };\n\n  return (\n    <Dialog open={Boolean(doc)} onOpenChange={(open) => (!open ? onClose() : undefined)}>\n      <DialogContent className=\"max-w-lg rounded-3xl border border-slate-800 bg-slate-950/95 text-slate-100\">\n        <DialogHeader>\n          <DialogTitle>Set expiry reminder</DialogTitle>\n          <DialogDescription>\n            Choose a secure expiry date. Beno will notify you with the reminder cadence you choose.\n          </DialogDescription>\n        </DialogHeader>\n        <div className=\"flex flex-col gap-4\">\n          <Calendar\n            mode=\"single\"\n            selected={date}\n            onSelect={setDate}\n            className=\"rounded-2xl border border-slate-900/70 bg-slate-950/60\"\n          />\n          <div className=\"rounded-2xl border border-slate-900/70 bg-slate-950/60 p-4\">\n            <p className=\"text-sm font-semibold text-white\">Reminder offsets</p>\n            <ToggleGroup\n              type=\"multiple\"\n              className=\"mt-2 flex flex-wrap gap-2\"\n              value={reminders.map(String)}\n              onValueChange={(values) => setReminders(values.map((value) => Number(value)))}\n            >\n              {reminderOptions.map((option) => (\n                <ToggleGroupItem\n                  key={option}\n                  value={String(option)}\n                  className=\"rounded-full border border-cyan-500/40 bg-slate-900/60 text-cyan-200\"\n                >\n                  {option} days\n                </ToggleGroupItem>\n              ))}\n            </ToggleGroup>\n          </div>\n        </div>\n        <DialogFooter className=\"flex items-center justify-end gap-2\">\n          <Button variant=\"ghost\" className=\"rounded-2xl\" onClick={onClose}>\n            Cancel\n          </Button>\n          <Button className=\"rounded-2xl bg-gradient-to-r from-cyan-500 to-sky-500 text-white\" onClick={handleSave}>\n            Save\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AAQA;AACA;AACA;AAbA;;;;;;;AAgBA,MAAM,kBAAkB;IAAC;IAAI;IAAI;IAAI;IAAG;CAAE;AAQnC,SAAS,gBAAgB,EAAE,GAAG,EAAE,OAAO,EAAE,MAAM,EAAwB;IAC5E,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD;IAC/B,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAY,EAAE;IAEvD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,KAAK,YAAY;YACnB,QAAQ,IAAI,KAAK,IAAI,UAAU;QACjC,OAAO;YACL,QAAQ;QACV;QACA,aAAa,EAAE;IACjB,GAAG;QAAC;KAAI;IAER,IAAI,CAAC,KAAK,OAAO;IAEjB,MAAM,aAAa;QACjB,OAAO,IAAI,EAAE,EAAE;YAAE,YAAY,QAAQ;YAAM;QAAU;QACrD;IACF;IAEA,qBACE,8OAAC,kIAAA,CAAA,SAAM;QAAC,MAAM,QAAQ;QAAM,cAAc,CAAC,OAAU,CAAC,OAAO,YAAY;kBACvE,cAAA,8OAAC,kIAAA,CAAA,gBAAa;YAAC,WAAU;;8BACvB,8OAAC,kIAAA,CAAA,eAAY;;sCACX,8OAAC,kIAAA,CAAA,cAAW;sCAAC;;;;;;sCACb,8OAAC,kIAAA,CAAA,oBAAiB;sCAAC;;;;;;;;;;;;8BAIrB,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,oIAAA,CAAA,WAAQ;4BACP,MAAK;4BACL,UAAU;4BACV,UAAU;4BACV,WAAU;;;;;;sCAEZ,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAE,WAAU;8CAAmC;;;;;;8CAChD,8OAAC,2IAAA,CAAA,cAAW;oCACV,MAAK;oCACL,WAAU;oCACV,OAAO,UAAU,GAAG,CAAC;oCACrB,eAAe,CAAC,SAAW,aAAa,OAAO,GAAG,CAAC,CAAC,QAAU,OAAO;8CAEpE,gBAAgB,GAAG,CAAC,CAAC,uBACpB,8OAAC,2IAAA,CAAA,kBAAe;4CAEd,OAAO,OAAO;4CACd,WAAU;;gDAET;gDAAO;;2CAJH;;;;;;;;;;;;;;;;;;;;;;8BAUf,8OAAC,kIAAA,CAAA,eAAY;oBAAC,WAAU;;sCACtB,8OAAC,kIAAA,CAAA,SAAM;4BAAC,SAAQ;4BAAQ,WAAU;4BAAc,SAAS;sCAAS;;;;;;sCAGlE,8OAAC,kIAAA,CAAA,SAAM;4BAAC,WAAU;4BAAmE,SAAS;sCAAY;;;;;;;;;;;;;;;;;;;;;;;AAOpH","debugId":null}},
    {"offset": {"line": 3483, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/vault/LinkEntitiesDrawer.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetFooter,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport type { VaultDocument } from \"@/lib/vault/useVault\";\nimport { Badge } from \"@/components/ui/badge\";\n\ninterface LinkEntitiesDrawerProps {\n  doc: VaultDocument | null;\n  onClose: () => void;\n  onLink: (id: string, links: VaultDocument[\"links\"]) => Promise<void> | void;\n}\n\nexport function LinkEntitiesDrawer({ doc, onClose, onLink }: LinkEntitiesDrawerProps) {\n  const [links, setLinks] = useState<VaultDocument[\"links\"]>({});\n\n  useEffect(() => {\n    if (doc?.links) {\n      setLinks(doc.links);\n    } else {\n      setLinks({});\n    }\n  }, [doc]);\n\n  if (!doc) return null;\n\n  const handleSave = () => {\n    onLink(doc.id, links);\n    onClose();\n  };\n\n  return (\n    <Sheet open={Boolean(doc)} onOpenChange={(open) => (!open ? onClose() : undefined)}>\n      <SheetContent side=\"right\" className=\"flex w-full max-w-md flex-col gap-6 bg-slate-950/95 text-slate-100\">\n        <SheetHeader>\n          <SheetTitle>Link to other records</SheetTitle>\n          <SheetDescription>\n            Connect this document to bills, events, care plans, or transactions without leaving the vault.\n          </SheetDescription>\n        </SheetHeader>\n        <div className=\"space-y-4\">\n          <Field\n            label=\"Finance bill\"\n            value={links?.billId ?? \"\"}\n            placeholder=\"bill_123\"\n            helper=\"Shows due amount and timeline in Finance\"\n            onChange={(value) => setLinks((prev) => ({ ...prev, billId: value || undefined }))}\n          />\n          <Field\n            label=\"Transaction\"\n            value={links?.txnId ?? \"\"}\n            placeholder=\"txn_456\"\n            helper=\"Creates a deep link in transactions\"\n            onChange={(value) => setLinks((prev) => ({ ...prev, txnId: value || undefined }))}\n          />\n          <Field\n            label=\"Event\"\n            value={links?.eventId ?? \"\"}\n            placeholder=\"event_789\"\n            helper=\"Adds to household calendar\"\n            onChange={(value) => setLinks((prev) => ({ ...prev, eventId: value || undefined }))}\n          />\n          <Field\n            label=\"Medication\"\n            value={links?.medId ?? \"\"}\n            placeholder=\"med_321\"\n            helper=\"Pins document in Care module\"\n            onChange={(value) => setLinks((prev) => ({ ...prev, medId: value || undefined }))}\n          />\n          <div className=\"rounded-2xl border border-cyan-500/30 bg-cyan-500/10 p-3 text-xs text-cyan-100\">\n            Tips: Use “Open in …” links from the viewer to deep-link into the right module.\n          </div>\n        </div>\n        <SheetFooter className=\"mt-auto flex gap-2\">\n          <Button variant=\"ghost\" className=\"rounded-2xl\" onClick={onClose}>\n            Cancel\n          </Button>\n          <Button className=\"rounded-2xl bg-gradient-to-r from-cyan-500 to-sky-500 text-white\" onClick={handleSave}>\n            Save links\n          </Button>\n        </SheetFooter>\n      </SheetContent>\n    </Sheet>\n  );\n}\n\nfunction Field({\n  label,\n  value,\n  placeholder,\n  helper,\n  onChange,\n}: {\n  label: string;\n  value: string;\n  placeholder: string;\n  helper: string;\n  onChange: (value: string) => void;\n}) {\n  return (\n    <div className=\"space-y-2\">\n      <div className=\"flex items-center justify-between\">\n        <p className=\"text-sm font-semibold text-white\">{label}</p>\n        {value ? <Badge className=\"rounded-full bg-cyan-500/20 text-cyan-200\">Linked</Badge> : null}\n      </div>\n      <Input\n        value={value}\n        onChange={(event) => onChange(event.target.value)}\n        placeholder={placeholder}\n        className=\"h-10 rounded-2xl bg-slate-900/60\"\n      />\n      <p className=\"text-xs text-slate-500\">{helper}</p>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AAQA;AACA;AAEA;AAdA;;;;;;;AAsBO,SAAS,mBAAmB,EAAE,GAAG,EAAE,OAAO,EAAE,MAAM,EAA2B;IAClF,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAA0B,CAAC;IAE5D,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,KAAK,OAAO;YACd,SAAS,IAAI,KAAK;QACpB,OAAO;YACL,SAAS,CAAC;QACZ;IACF,GAAG;QAAC;KAAI;IAER,IAAI,CAAC,KAAK,OAAO;IAEjB,MAAM,aAAa;QACjB,OAAO,IAAI,EAAE,EAAE;QACf;IACF;IAEA,qBACE,8OAAC,iIAAA,CAAA,QAAK;QAAC,MAAM,QAAQ;QAAM,cAAc,CAAC,OAAU,CAAC,OAAO,YAAY;kBACtE,cAAA,8OAAC,iIAAA,CAAA,eAAY;YAAC,MAAK;YAAQ,WAAU;;8BACnC,8OAAC,iIAAA,CAAA,cAAW;;sCACV,8OAAC,iIAAA,CAAA,aAAU;sCAAC;;;;;;sCACZ,8OAAC,iIAAA,CAAA,mBAAgB;sCAAC;;;;;;;;;;;;8BAIpB,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BACC,OAAM;4BACN,OAAO,OAAO,UAAU;4BACxB,aAAY;4BACZ,QAAO;4BACP,UAAU,CAAC,QAAU,SAAS,CAAC,OAAS,CAAC;wCAAE,GAAG,IAAI;wCAAE,QAAQ,SAAS;oCAAU,CAAC;;;;;;sCAElF,8OAAC;4BACC,OAAM;4BACN,OAAO,OAAO,SAAS;4BACvB,aAAY;4BACZ,QAAO;4BACP,UAAU,CAAC,QAAU,SAAS,CAAC,OAAS,CAAC;wCAAE,GAAG,IAAI;wCAAE,OAAO,SAAS;oCAAU,CAAC;;;;;;sCAEjF,8OAAC;4BACC,OAAM;4BACN,OAAO,OAAO,WAAW;4BACzB,aAAY;4BACZ,QAAO;4BACP,UAAU,CAAC,QAAU,SAAS,CAAC,OAAS,CAAC;wCAAE,GAAG,IAAI;wCAAE,SAAS,SAAS;oCAAU,CAAC;;;;;;sCAEnF,8OAAC;4BACC,OAAM;4BACN,OAAO,OAAO,SAAS;4BACvB,aAAY;4BACZ,QAAO;4BACP,UAAU,CAAC,QAAU,SAAS,CAAC,OAAS,CAAC;wCAAE,GAAG,IAAI;wCAAE,OAAO,SAAS;oCAAU,CAAC;;;;;;sCAEjF,8OAAC;4BAAI,WAAU;sCAAiF;;;;;;;;;;;;8BAIlG,8OAAC,iIAAA,CAAA,cAAW;oBAAC,WAAU;;sCACrB,8OAAC,kIAAA,CAAA,SAAM;4BAAC,SAAQ;4BAAQ,WAAU;4BAAc,SAAS;sCAAS;;;;;;sCAGlE,8OAAC,kIAAA,CAAA,SAAM;4BAAC,WAAU;4BAAmE,SAAS;sCAAY;;;;;;;;;;;;;;;;;;;;;;;AAOpH;AAEA,SAAS,MAAM,EACb,KAAK,EACL,KAAK,EACL,WAAW,EACX,MAAM,EACN,QAAQ,EAOT;IACC,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAE,WAAU;kCAAoC;;;;;;oBAChD,sBAAQ,8OAAC,iIAAA,CAAA,QAAK;wBAAC,WAAU;kCAA4C;;;;;+BAAiB;;;;;;;0BAEzF,8OAAC,iIAAA,CAAA,QAAK;gBACJ,OAAO;gBACP,UAAU,CAAC,QAAU,SAAS,MAAM,MAAM,CAAC,KAAK;gBAChD,aAAa;gBACb,WAAU;;;;;;0BAEZ,8OAAC;gBAAE,WAAU;0BAA0B;;;;;;;;;;;;AAG7C","debugId":null}},
    {"offset": {"line": 3717, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/select.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3909, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/switch.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,uBAAS,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,OAAqB;QACpB,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,sXACA;QAED,GAAG,KAAK;QACT,KAAK;kBAEL,cAAA,8OAAC,kKAAA,CAAA,QAAsB;YACrB,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV;;;;;;;;;;;AAKR,OAAO,WAAW,GAAG,kKAAA,CAAA,OAAqB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 3945, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/label.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,gBAAgB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACtB;AAGF,MAAM,sBAAQ,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAI3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iKAAA,CAAA,OAAmB;QAClB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iBAAiB;QAC9B,GAAG,KAAK;;;;;;AAGb,MAAM,WAAW,GAAG,iKAAA,CAAA,OAAmB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 3977, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/vault/ShareAclDrawer.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetFooter,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Label } from \"@/components/ui/label\";\nimport { Badge } from \"@/components/ui/badge\";\nimport type { ShareAclPayload, VaultDocument } from \"@/lib/vault/useVault\";\nimport { toast } from \"@/hooks/use-toast\";\nimport { Loader2 } from \"lucide-react\";\n\ninterface ShareAclDrawerProps {\n  context: { ids: string[]; doc?: VaultDocument } | null;\n  onClose: () => void;\n  onShare: (ids: string[], payload: ShareAclPayload) => Promise<void> | void;\n}\n\nconst defaultEntry = { id: \"\", role: \"viewer\" as ShareAclPayload[\"people\"][number][\"role\"], expiresAt: \"\" };\n\nexport function ShareAclDrawer({ context, onClose, onShare }: ShareAclDrawerProps) {\n  const [entries, setEntries] = useState<ShareAclPayload[\"people\"]>([]);\n  const [maskSensitive, setMaskSensitive] = useState(true);\n  const [link, setLink] = useState<string | null>(null);\n  const [loadingLink, setLoadingLink] = useState(false);\n  const [accessWindow, setAccessWindow] = useState<{ start?: string; end?: string }>({});\n\n  useEffect(() => {\n    if (!context) {\n      setEntries([]);\n      setMaskSensitive(true);\n      setLink(null);\n      setAccessWindow({});\n      return;\n    }\n    setEntries([]);\n    setMaskSensitive(true);\n    setLink(null);\n    setAccessWindow({});\n  }, [context]);\n\n  if (!context) return null;\n\n  const handleAdd = () => {\n    setEntries((prev) => [...prev, { ...defaultEntry, id: \"\" }]);\n  };\n\n  const handleSave = async () => {\n    await onShare(context.ids, {\n      people: entries.filter((entry) => entry.id),\n      maskSensitive,\n      window: accessWindow,\n    });\n    onClose();\n  };\n\n  const handleGenerateLink = async () => {\n    try {\n      setLoadingLink(true);\n      const response = await fetch(\"/api/vault/sign\", { method: \"POST\" });\n      if (!response.ok) throw new Error(\"Failed to sign\");\n      const data = (await response.json()) as { url: string; expiresAt: string };\n      setLink(data.url);\n      toast({ title: \"Secure link ready\", description: `Expires ${data.expiresAt}` });\n    } catch (error) {\n      console.error(error);\n      toast({ title: \"Link error\", description: \"Could not generate a secure link.\" });\n    } finally {\n      setLoadingLink(false);\n    }\n  };\n\n  return (\n    <Sheet open={Boolean(context)} onOpenChange={(open) => (!open ? onClose() : undefined)}>\n      <SheetContent side=\"right\" className=\"flex w-full max-w-md flex-col gap-6 bg-slate-950/95 text-slate-100\">\n        <SheetHeader>\n          <SheetTitle>Manage sharing</SheetTitle>\n          <SheetDescription>\n            Grant secure access without leaving the vault. You’re sharing {context.ids.length} document(s).\n          </SheetDescription>\n        </SheetHeader>\n        <div className=\"space-y-4\">\n          {entries.map((entry, index) => (\n            <div key={index} className=\"rounded-2xl border border-slate-900/70 bg-slate-950/60 p-4 space-y-3\">\n              <div className=\"flex items-center justify-between\">\n                <Label className=\"text-sm text-slate-300\">Person</Label>\n                <Badge variant=\"outline\" className=\"rounded-full border-cyan-500/60 text-cyan-200\">\n                  {entry.role}\n                </Badge>\n              </div>\n              <Input\n                value={entry.id}\n                onChange={(event) =>\n                  setEntries((prev) =>\n                    prev.map((item, i) => (i === index ? { ...item, id: event.target.value } : item)),\n                  )\n                }\n                placeholder=\"Email or phone\"\n                className=\"h-10 rounded-2xl bg-slate-900/60\"\n              />\n              <Select\n                value={entry.role}\n                onValueChange={(role) =>\n                  setEntries((prev) => prev.map((item, i) => (i === index ? { ...item, role: role as typeof entry.role } : item)))\n                }\n              >\n                <SelectTrigger className=\"h-10 rounded-2xl bg-slate-900/60 text-slate-100\">\n                  <SelectValue placeholder=\"Viewer\" />\n                </SelectTrigger>\n                <SelectContent className=\"rounded-2xl border border-slate-800 bg-slate-950\">\n                  <SelectItem value=\"viewer\">Viewer</SelectItem>\n                  <SelectItem value=\"editor\">Editor</SelectItem>\n                  <SelectItem value=\"emergency\">Emergency access</SelectItem>\n                </SelectContent>\n              </Select>\n              {entry.role === \"emergency\" ? (\n                <div className=\"grid grid-cols-2 gap-2\">\n                  <Input\n                    type=\"datetime-local\"\n                    value={accessWindow.start ?? \"\"}\n                    onChange={(event) => setAccessWindow((prev) => ({ ...prev, start: event.target.value }))}\n                    className=\"h-10 rounded-2xl bg-slate-900/60\"\n                  />\n                  <Input\n                    type=\"datetime-local\"\n                    value={accessWindow.end ?? \"\"}\n                    onChange={(event) => setAccessWindow((prev) => ({ ...prev, end: event.target.value }))}\n                    className=\"h-10 rounded-2xl bg-slate-900/60\"\n                  />\n                </div>\n              ) : null}\n            </div>\n          ))}\n          <Button variant=\"secondary\" className=\"w-full rounded-2xl\" onClick={handleAdd}>\n            Add person\n          </Button>\n          <div className=\"flex items-center justify-between rounded-2xl border border-slate-900/70 bg-slate-950/60 p-4\">\n            <div>\n              <p className=\"text-sm font-semibold text-white\">Mask sensitive fields</p>\n              <p className=\"text-xs text-slate-500\">Hide account numbers and IDs when sharing.</p>\n            </div>\n            <Switch checked={maskSensitive} onCheckedChange={setMaskSensitive} />\n          </div>\n          <div className=\"rounded-2xl border border-slate-900/70 bg-slate-950/60 p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-semibold text-white\">Secure view link</p>\n                <p className=\"text-xs text-slate-500\">Generate a time-boxed read-only link.</p>\n              </div>\n              <Button\n                variant=\"secondary\"\n                className=\"rounded-2xl\"\n                onClick={handleGenerateLink}\n                disabled={loadingLink}\n              >\n                {loadingLink ? <Loader2 className=\"h-4 w-4 animate-spin\" /> : \"Generate\"}\n              </Button>\n            </div>\n            {link ? (\n              <p className=\"mt-2 truncate rounded-xl bg-slate-900/50 px-3 py-2 text-xs text-cyan-200\">{link}</p>\n            ) : null}\n          </div>\n        </div>\n        <SheetFooter className=\"mt-auto flex gap-2\">\n          <Button variant=\"ghost\" className=\"rounded-2xl\" onClick={onClose}>\n            Cancel\n          </Button>\n          <Button className=\"rounded-2xl bg-gradient-to-r from-cyan-500 to-sky-500 text-white\" onClick={handleSave}>\n            Save changes\n          </Button>\n        </SheetFooter>\n      </SheetContent>\n    </Sheet>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4419, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/vault/MoveToFolderDialog.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport type { VaultDocument } from \"@/lib/vault/useVault\";\n\ninterface MoveToFolderDialogProps {\n  context: { ids: string[]; doc?: VaultDocument } | null;\n  onClose: () => void;\n  onMove: (ids: string[], folder: string) => Promise<void> | void;\n}\n\nexport function MoveToFolderDialog({ context, onClose, onMove }: MoveToFolderDialogProps) {\n  const [folder, setFolder] = useState(\"\");\n\n  useEffect(() => {\n    if (!context) {\n      setFolder(\"\");\n    }\n  }, [context]);\n\n  if (!context) return null;\n\n  const handleSave = () => {\n    if (!folder.trim()) return;\n    onMove(context.ids, folder.trim());\n    onClose();\n  };\n\n  return (\n    <Dialog open={Boolean(context)} onOpenChange={(open) => (!open ? onClose() : undefined)}>\n      <DialogContent className=\"max-w-md rounded-3xl border border-slate-800 bg-slate-950/95 text-slate-100\">\n        <DialogHeader>\n          <DialogTitle>Move to folder</DialogTitle>\n          <DialogDescription>\n            Create lightweight folders to group documents without leaving the vault.\n          </DialogDescription>\n        </DialogHeader>\n        <div className=\"space-y-3\">\n          <Input\n            value={folder}\n            onChange={(event) => setFolder(event.target.value)}\n            placeholder=\"e.g. Taxes 2024\"\n            className=\"h-10 rounded-2xl bg-slate-900/60\"\n          />\n          <p className=\"text-xs text-slate-500\">Applies to {context.ids.length} document(s).</p>\n        </div>\n        <DialogFooter className=\"flex items-center justify-end gap-2\">\n          <Button variant=\"ghost\" className=\"rounded-2xl\" onClick={onClose}>\n            Cancel\n          </Button>\n          <Button className=\"rounded-2xl bg-gradient-to-r from-cyan-500 to-sky-500 text-white\" onClick={handleSave}>\n            Move\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AAQA;AACA;AAZA;;;;;;AAqBO,SAAS,mBAAmB,EAAE,OAAO,EAAE,OAAO,EAAE,MAAM,EAA2B;IACtF,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAErC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,CAAC,SAAS;YACZ,UAAU;QACZ;IACF,GAAG;QAAC;KAAQ;IAEZ,IAAI,CAAC,SAAS,OAAO;IAErB,MAAM,aAAa;QACjB,IAAI,CAAC,OAAO,IAAI,IAAI;QACpB,OAAO,QAAQ,GAAG,EAAE,OAAO,IAAI;QAC/B;IACF;IAEA,qBACE,8OAAC,kIAAA,CAAA,SAAM;QAAC,MAAM,QAAQ;QAAU,cAAc,CAAC,OAAU,CAAC,OAAO,YAAY;kBAC3E,cAAA,8OAAC,kIAAA,CAAA,gBAAa;YAAC,WAAU;;8BACvB,8OAAC,kIAAA,CAAA,eAAY;;sCACX,8OAAC,kIAAA,CAAA,cAAW;sCAAC;;;;;;sCACb,8OAAC,kIAAA,CAAA,oBAAiB;sCAAC;;;;;;;;;;;;8BAIrB,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,iIAAA,CAAA,QAAK;4BACJ,OAAO;4BACP,UAAU,CAAC,QAAU,UAAU,MAAM,MAAM,CAAC,KAAK;4BACjD,aAAY;4BACZ,WAAU;;;;;;sCAEZ,8OAAC;4BAAE,WAAU;;gCAAyB;gCAAY,QAAQ,GAAG,CAAC,MAAM;gCAAC;;;;;;;;;;;;;8BAEvE,8OAAC,kIAAA,CAAA,eAAY;oBAAC,WAAU;;sCACtB,8OAAC,kIAAA,CAAA,SAAM;4BAAC,SAAQ;4BAAQ,WAAU;4BAAc,SAAS;sCAAS;;;;;;sCAGlE,8OAAC,kIAAA,CAAA,SAAM;4BAAC,WAAU;4BAAmE,SAAS;sCAAY;;;;;;;;;;;;;;;;;;;;;;;AAOpH","debugId":null}},
    {"offset": {"line": 4553, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/vault/BulkBar.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Users, CalendarClock, Link2, Folder, Trash2, Tag } from \"lucide-react\";\n\ninterface BulkBarProps {\n  visible: boolean;\n  count: number;\n  onClear: () => void;\n  onShare: () => void;\n  onMove: () => void;\n  onDelete: () => void;\n  onLink: () => void;\n  onSetExpiry: () => void;\n  onAddTag: (tag: string) => void;\n}\n\nexport function BulkBar({\n  visible,\n  count,\n  onClear,\n  onShare,\n  onMove,\n  onDelete,\n  onLink,\n  onSetExpiry,\n  onAddTag,\n}: BulkBarProps) {\n  const [tag, setTag] = useState(\"\");\n\n  const applyTag = () => {\n    if (!tag.trim()) return;\n    onAddTag(tag.trim());\n    setTag(\"\");\n  };\n\n  return (\n    <AnimatePresence>\n      {visible ? (\n        <motion.div\n          initial={{ y: 80, opacity: 0 }}\n          animate={{ y: 0, opacity: 1 }}\n          exit={{ y: 80, opacity: 0 }}\n          transition={{ type: \"spring\", stiffness: 140, damping: 16 }}\n          className=\"fixed inset-x-6 bottom-6 z-50 rounded-3xl border border-slate-800/80 bg-slate-950/95 p-4 shadow-xl\"\n        >\n          <div className=\"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between\">\n            <div>\n              <p className=\"text-sm font-semibold text-white\">Bulk actions</p>\n              <p className=\"text-xs text-slate-400\">{count} item(s) selected</p>\n            </div>\n            <div className=\"flex flex-1 flex-wrap items-center gap-2\">\n              <Button variant=\"secondary\" className=\"rounded-2xl\" onClick={onShare}>\n                <Users className=\"mr-2 h-4 w-4\" /> Share\n              </Button>\n              <Button variant=\"secondary\" className=\"rounded-2xl\" onClick={onMove}>\n                <Folder className=\"mr-2 h-4 w-4\" /> Move\n              </Button>\n              <Button variant=\"secondary\" className=\"rounded-2xl\" onClick={onLink}>\n                <Link2 className=\"mr-2 h-4 w-4\" /> Link\n              </Button>\n              <Button variant=\"secondary\" className=\"rounded-2xl\" onClick={onSetExpiry}>\n                <CalendarClock className=\"mr-2 h-4 w-4\" /> Set expiry\n              </Button>\n              <div className=\"flex items-center gap-2 rounded-2xl border border-slate-800/80 bg-slate-900/40 px-3 py-2\">\n                <Tag className=\"h-4 w-4 text-cyan-300\" />\n                <Input\n                  value={tag}\n                  onChange={(event) => setTag(event.target.value)}\n                  placeholder=\"Add tag\"\n                  className=\"h-8 w-28 rounded-xl bg-transparent text-xs\"\n                />\n                <Button size=\"sm\" className=\"rounded-xl\" onClick={applyTag}>\n                  Apply\n                </Button>\n              </div>\n              <Button variant=\"destructive\" className=\"rounded-2xl\" onClick={onDelete}>\n                <Trash2 className=\"mr-2 h-4 w-4\" /> Delete\n              </Button>\n            </div>\n            <Button variant=\"ghost\" className=\"rounded-2xl text-slate-400\" onClick={onClear}>\n              Clear selection\n            </Button>\n          </div>\n        </motion.div>\n      ) : null}\n    </AnimatePresence>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AANA;;;;;;;AAoBO,SAAS,QAAQ,EACtB,OAAO,EACP,KAAK,EACL,OAAO,EACP,OAAO,EACP,MAAM,EACN,QAAQ,EACR,MAAM,EACN,WAAW,EACX,QAAQ,EACK;IACb,MAAM,CAAC,KAAK,OAAO,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAE/B,MAAM,WAAW;QACf,IAAI,CAAC,IAAI,IAAI,IAAI;QACjB,SAAS,IAAI,IAAI;QACjB,OAAO;IACT;IAEA,qBACE,8OAAC,yLAAA,CAAA,kBAAe;kBACb,wBACC,8OAAC,0LAAA,CAAA,SAAM,CAAC,GAAG;YACT,SAAS;gBAAE,GAAG;gBAAI,SAAS;YAAE;YAC7B,SAAS;gBAAE,GAAG;gBAAG,SAAS;YAAE;YAC5B,MAAM;gBAAE,GAAG;gBAAI,SAAS;YAAE;YAC1B,YAAY;gBAAE,MAAM;gBAAU,WAAW;gBAAK,SAAS;YAAG;YAC1D,WAAU;sBAEV,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;;0CACC,8OAAC;gCAAE,WAAU;0CAAmC;;;;;;0CAChD,8OAAC;gCAAE,WAAU;;oCAA0B;oCAAM;;;;;;;;;;;;;kCAE/C,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,kIAAA,CAAA,SAAM;gCAAC,SAAQ;gCAAY,WAAU;gCAAc,SAAS;;kDAC3D,8OAAC,oMAAA,CAAA,QAAK;wCAAC,WAAU;;;;;;oCAAiB;;;;;;;0CAEpC,8OAAC,kIAAA,CAAA,SAAM;gCAAC,SAAQ;gCAAY,WAAU;gCAAc,SAAS;;kDAC3D,8OAAC,sMAAA,CAAA,SAAM;wCAAC,WAAU;;;;;;oCAAiB;;;;;;;0CAErC,8OAAC,kIAAA,CAAA,SAAM;gCAAC,SAAQ;gCAAY,WAAU;gCAAc,SAAS;;kDAC3D,8OAAC,wMAAA,CAAA,QAAK;wCAAC,WAAU;;;;;;oCAAiB;;;;;;;0CAEpC,8OAAC,kIAAA,CAAA,SAAM;gCAAC,SAAQ;gCAAY,WAAU;gCAAc,SAAS;;kDAC3D,8OAAC,wNAAA,CAAA,gBAAa;wCAAC,WAAU;;;;;;oCAAiB;;;;;;;0CAE5C,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,gMAAA,CAAA,MAAG;wCAAC,WAAU;;;;;;kDACf,8OAAC,iIAAA,CAAA,QAAK;wCACJ,OAAO;wCACP,UAAU,CAAC,QAAU,OAAO,MAAM,MAAM,CAAC,KAAK;wCAC9C,aAAY;wCACZ,WAAU;;;;;;kDAEZ,8OAAC,kIAAA,CAAA,SAAM;wCAAC,MAAK;wCAAK,WAAU;wCAAa,SAAS;kDAAU;;;;;;;;;;;;0CAI9D,8OAAC,kIAAA,CAAA,SAAM;gCAAC,SAAQ;gCAAc,WAAU;gCAAc,SAAS;;kDAC7D,8OAAC,0MAAA,CAAA,SAAM;wCAAC,WAAU;;;;;;oCAAiB;;;;;;;;;;;;;kCAGvC,8OAAC,kIAAA,CAAA,SAAM;wBAAC,SAAQ;wBAAQ,WAAU;wBAA6B,SAAS;kCAAS;;;;;;;;;;;;;;;;mBAKnF;;;;;;AAGV","debugId":null}},
    {"offset": {"line": 4805, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/vault/crypto.ts"],"sourcesContent":["export interface EncryptedPayload {\n  cipher: ArrayBuffer;\n  iv: Uint8Array;\n  checksum: string;\n  size: number;\n}\n\nexport async function generateVaultKey(): Promise<CryptoKey> {\n  return crypto.subtle.generateKey({ name: \"AES-GCM\", length: 256 }, true, [\"encrypt\", \"decrypt\"]);\n}\n\nexport async function importVaultKey(raw: string): Promise<CryptoKey> {\n  const bytes = Uint8Array.from(atob(raw), (char) => char.charCodeAt(0));\n  return crypto.subtle.importKey(\"raw\", bytes, { name: \"AES-GCM\" }, true, [\"encrypt\", \"decrypt\"]);\n}\n\nexport async function exportVaultKey(key: CryptoKey): Promise<string> {\n  const raw = await crypto.subtle.exportKey(\"raw\", key);\n  const bytes = new Uint8Array(raw);\n  let binary = \"\";\n  bytes.forEach((b) => (binary += String.fromCharCode(b)));\n  return btoa(binary);\n}\n\nexport async function encryptFile(file: File, key: CryptoKey): Promise<EncryptedPayload> {\n  const buffer = await file.arrayBuffer();\n  const iv = crypto.getRandomValues(new Uint8Array(12));\n  const cipher = await crypto.subtle.encrypt({ name: \"AES-GCM\", iv }, key, buffer);\n  const checksum = await digest(buffer);\n  return { cipher, iv, checksum, size: file.size };\n}\n\nexport async function decryptFile(payload: EncryptedPayload, key: CryptoKey): Promise<ArrayBuffer> {\n  return crypto.subtle.decrypt({ name: \"AES-GCM\", iv: payload.iv }, key, payload.cipher);\n}\n\nexport async function digest(buffer: ArrayBuffer): Promise<string> {\n  const hash = await crypto.subtle.digest(\"SHA-256\", buffer);\n  const bytes = Array.from(new Uint8Array(hash));\n  return bytes.map((byte) => byte.toString(16).padStart(2, \"0\")).join(\"\");\n}\n\nexport async function digestFile(file: File): Promise<string> {\n  const buffer = await file.arrayBuffer();\n  return digest(buffer);\n}\n"],"names":[],"mappings":";;;;;;;;;AAOO,eAAe;IACpB,OAAO,OAAO,MAAM,CAAC,WAAW,CAAC;QAAE,MAAM;QAAW,QAAQ;IAAI,GAAG,MAAM;QAAC;QAAW;KAAU;AACjG;AAEO,eAAe,eAAe,GAAW;IAC9C,MAAM,QAAQ,WAAW,IAAI,CAAC,KAAK,MAAM,CAAC,OAAS,KAAK,UAAU,CAAC;IACnE,OAAO,OAAO,MAAM,CAAC,SAAS,CAAC,OAAO,OAAO;QAAE,MAAM;IAAU,GAAG,MAAM;QAAC;QAAW;KAAU;AAChG;AAEO,eAAe,eAAe,GAAc;IACjD,MAAM,MAAM,MAAM,OAAO,MAAM,CAAC,SAAS,CAAC,OAAO;IACjD,MAAM,QAAQ,IAAI,WAAW;IAC7B,IAAI,SAAS;IACb,MAAM,OAAO,CAAC,CAAC,IAAO,UAAU,OAAO,YAAY,CAAC;IACpD,OAAO,KAAK;AACd;AAEO,eAAe,YAAY,IAAU,EAAE,GAAc;IAC1D,MAAM,SAAS,MAAM,KAAK,WAAW;IACrC,MAAM,KAAK,OAAO,eAAe,CAAC,IAAI,WAAW;IACjD,MAAM,SAAS,MAAM,OAAO,MAAM,CAAC,OAAO,CAAC;QAAE,MAAM;QAAW;IAAG,GAAG,KAAK;IACzE,MAAM,WAAW,MAAM,OAAO;IAC9B,OAAO;QAAE;QAAQ;QAAI;QAAU,MAAM,KAAK,IAAI;IAAC;AACjD;AAEO,eAAe,YAAY,OAAyB,EAAE,GAAc;IACzE,OAAO,OAAO,MAAM,CAAC,OAAO,CAAC;QAAE,MAAM;QAAW,IAAI,QAAQ,EAAE;IAAC,GAAG,KAAK,QAAQ,MAAM;AACvF;AAEO,eAAe,OAAO,MAAmB;IAC9C,MAAM,OAAO,MAAM,OAAO,MAAM,CAAC,MAAM,CAAC,WAAW;IACnD,MAAM,QAAQ,MAAM,IAAI,CAAC,IAAI,WAAW;IACxC,OAAO,MAAM,GAAG,CAAC,CAAC,OAAS,KAAK,QAAQ,CAAC,IAAI,QAAQ,CAAC,GAAG,MAAM,IAAI,CAAC;AACtE;AAEO,eAAe,WAAW,IAAU;IACzC,MAAM,SAAS,MAAM,KAAK,WAAW;IACrC,OAAO,OAAO;AAChB","debugId":null}},
    {"offset": {"line": 4875, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/vault/useVault.ts"],"sourcesContent":["\"use client\";\n\nimport { useCallback, useMemo, useState } from \"react\";\nimport { useUser, useFirestore, useFirebaseApp, useCollection } from \"@/firebase\";\nimport {\n  Timestamp,\n  addDoc,\n  collection,\n  doc as firestoreDoc,\n  serverTimestamp,\n  updateDoc,\n  writeBatch,\n} from \"firebase/firestore\";\nimport { getStorage, ref, uploadBytes } from \"firebase/storage\";\nimport { format } from \"date-fns\";\nimport { encryptFile, exportVaultKey, generateVaultKey, importVaultKey } from \"./crypto\";\nimport type { VaultFilters } from \"@/components/vault/FiltersDrawer\";\nimport { toast } from \"@/hooks/use-toast\";\n\nexport interface ShareEntry {\n  id: string;\n  role: \"viewer\" | \"editor\" | \"emergency\";\n  expiresAt?: string;\n}\n\nexport interface AutoTagSuggestion {\n  type?: string;\n  tags?: string[];\n  links?: VaultDocument[\"links\"];\n}\n\nexport interface ShareAclPayload {\n  people: ShareEntry[];\n  maskSensitive: boolean;\n  window?: { start?: string; end?: string };\n}\n\nexport interface ScanResult {\n  extracted?: {\n    text?: string;\n    fields?: Record<string, unknown>;\n  };\n  suggestions?: AutoTagSuggestion;\n  links?: VaultDocument[\"links\"];\n}\n\nexport interface VaultDocument {\n  id: string;\n  filename: string;\n  type?: string;\n  size?: number;\n  checksum?: string;\n  encrypted: boolean;\n  tags: string[];\n  expireDate?: string | Date | Timestamp | null;\n  shareACL?: ShareEntry[];\n  links?: {\n    billId?: string;\n    txnId?: string;\n    eventId?: string;\n    medId?: string;\n  };\n  extracted?: {\n    text?: string;\n    fields?: Record<string, unknown>;\n  };\n  ocrStatus?: \"queued\" | \"done\" | \"error\";\n  createdAt?: Timestamp | Date | string;\n  updatedAt?: Timestamp | Date | string;\n  createdAtFormatted?: string;\n  updatedAtFormatted?: string;\n  expireDateFormatted?: string;\n  ownerId: string;\n  source?: \"upload\" | \"scan\" | \"email\";\n  folder?: string;\n}\n\ninterface UploadOptions {\n  extracted?: ScanResult[\"extracted\"];\n  suggestions?: AutoTagSuggestion;\n  links?: ScanResult[\"links\"];\n  source?: VaultDocument[\"source\"];\n}\n\nconst STORAGE_ROOT = \"vault\";\nconst KEY_STORAGE_KEY = \"ceolife-vault-key\";\n\nexport function useVault() {\n  const { user } = useUser();\n  const firestore = useFirestore();\n  const app = useFirebaseApp();\n  const [filters, setFilters] = useState<VaultFilters>({});\n  const [search, setSearch] = useState(\"\");\n\n  const { data = [], loading } = useCollection<VaultDocument>(\"documents\", {\n    query: [\"ownerId\", \"==\", user?.uid],\n    skip: !user?.uid,\n  });\n\n  const docs = useMemo(() => (Array.isArray(data) ? data.map((doc) => enrichDoc(doc)) : []), [data]);\n\n  const filteredDocs = useMemo(() => {\n    const q = search.trim().toLowerCase();\n    return docs.filter((doc) => {\n      const matchesSearch = q\n        ? doc.filename.toLowerCase().includes(q) ||\n          doc.tags?.some((tag) => tag.toLowerCase().includes(q)) ||\n          (doc.extracted?.text ?? \"\").toLowerCase().includes(q)\n        : true;\n\n      const matchesTypes = filters.types?.length ? filters.types.includes((doc.type ?? \"other\").toLowerCase()) : true;\n      const matchesTags = filters.tags?.length\n        ? filters.tags.every((tag) => doc.tags?.map((t) => t.toLowerCase()).includes(tag.toLowerCase()))\n        : true;\n      const matchesSource = filters.source?.length ? filters.source.includes(doc.source ?? \"upload\") : true;\n\n      let matchesExpiry = true;\n      if (filters.expiry) {\n        const date = extractDate(doc.expireDate);\n        if (!date) {\n          matchesExpiry = filters.expiry === \"active\";\n        } else {\n          const now = new Date();\n          const diff = (date.getTime() - now.getTime()) / (1000 * 60 * 60 * 24);\n          if (filters.expiry === \"expired\") matchesExpiry = diff < 0;\n          if (filters.expiry === \"90\") matchesExpiry = diff <= 90 && diff >= 0;\n          if (filters.expiry === \"active\") matchesExpiry = diff > 90 || diff >= 0;\n        }\n      }\n\n      let matchesLinked = true;\n      if (filters.linkedStatus) {\n        const hasLinks = Boolean(doc.links?.billId || doc.links?.txnId || doc.links?.eventId || doc.links?.medId);\n        matchesLinked = filters.linkedStatus === \"linked\" ? hasLinks : !hasLinks;\n      }\n\n      return matchesSearch && matchesTypes && matchesTags && matchesSource && matchesExpiry && matchesLinked;\n    });\n  }, [docs, filters, search]);\n\n  const getEncryptionKey = useCallback(async () => {\n    if (typeof window === \"undefined\") throw new Error(\"Encryption key requires browser context\");\n    const cached = window.localStorage.getItem(KEY_STORAGE_KEY);\n    if (cached) {\n      return importVaultKey(cached);\n    }\n    const key = await generateVaultKey();\n    const serialized = await exportVaultKey(key);\n    window.localStorage.setItem(KEY_STORAGE_KEY, serialized);\n    return key;\n  }, []);\n\n  const upload = useCallback(\n    async (files: File[], options?: UploadOptions) => {\n      if (!user?.uid || !firestore || !app) {\n        toast({ title: \"Not ready\", description: \"Sign in to upload documents.\" });\n        return;\n      }\n      const storage = getStorage(app);\n      const key = await getEncryptionKey();\n\n      for (const file of files) {\n        const encrypted = await encryptFile(file, key);\n        const storageRef = ref(storage, `${STORAGE_ROOT}/${user.uid}/${Date.now()}-${file.name}`);\n        await uploadBytes(storageRef, new Uint8Array(encrypted.cipher));\n        await addDoc(collection(firestore, \"documents\"), {\n          filename: file.name,\n          type: options?.suggestions?.type ?? \"other\",\n          size: file.size,\n          checksum: encrypted.checksum,\n          encrypted: true,\n          tags: options?.suggestions?.tags ?? [],\n          expireDate: null,\n          shareACL: [],\n          links: options?.links ?? {},\n          extracted: options?.extracted ?? null,\n          ocrStatus: options?.extracted ? \"done\" : \"queued\",\n          createdAt: serverTimestamp(),\n          updatedAt: serverTimestamp(),\n          ownerId: user.uid,\n          source: options?.source ?? \"upload\",\n        });\n      }\n    },\n    [app, firestore, getEncryptionKey, user?.uid],\n  );\n\n  const scanAndAutoTag = useCallback(async (file: File): Promise<ScanResult> => {\n    const formData = new FormData();\n    formData.append(\"file\", file);\n    const response = await fetch(\"/api/vault/ocr\", { method: \"POST\", body: formData });\n    if (!response.ok) {\n      throw new Error(\"OCR failed\");\n    }\n    const data = (await response.json()) as ScanResult;\n    return data;\n  }, []);\n\n  const updateDocPartial = useCallback(\n    async (id: string, payload: Partial<VaultDocument>) => {\n      if (!firestore) return;\n      await updateDoc(firestoreDoc(firestore, \"documents\", id), {\n        ...payload,\n        updatedAt: serverTimestamp(),\n      });\n    },\n    [firestore],\n  );\n\n  const deleteDoc = useCallback(\n    async (ids: string[]) => {\n      if (!firestore) return;\n      const batch = writeBatch(firestore);\n      ids.forEach((id) => {\n        batch.update(firestoreDoc(firestore, \"documents\", id), {\n          deletedAt: serverTimestamp(),\n        });\n      });\n      await batch.commit();\n      toast({ title: \"Documents moved to trash\", description: \"Undo via history within 7 days.\" });\n    },\n    [firestore],\n  );\n\n  const linkEntities = useCallback(\n    async (id: string, links: VaultDocument[\"links\"]) => {\n      await updateDocPartial(id, { links });\n    },\n    [updateDocPartial],\n  );\n\n  const setExpiry = useCallback(\n    async (id: string, payload: { expireDate: Date | null; reminders: number[] }) => {\n      await updateDocPartial(id, {\n        expireDate: payload.expireDate ? payload.expireDate.toISOString() : null,\n        reminderOffsets: payload.reminders,\n      } as any);\n    },\n    [updateDocPartial],\n  );\n\n  const shareAcl = useCallback(\n    async (ids: string[], payload: ShareAclPayload) => {\n      if (!firestore) return;\n      const batch = writeBatch(firestore);\n      ids.forEach((id) => {\n        batch.update(firestoreDoc(firestore, \"documents\", id), {\n          shareACL: payload.people,\n          shareMask: payload.maskSensitive,\n          shareWindow: payload.window ?? null,\n          updatedAt: serverTimestamp(),\n        });\n      });\n      await batch.commit();\n      toast({ title: \"Sharing updated\", description: \"Recipients will receive secure notifications.\" });\n    },\n    [firestore],\n  );\n\n  const moveToFolder = useCallback(\n    async (ids: string[], folder: string) => {\n      if (!firestore) return;\n      const batch = writeBatch(firestore);\n      ids.forEach((id) => {\n        batch.update(firestoreDoc(firestore, \"documents\", id), {\n          folder,\n          updatedAt: serverTimestamp(),\n        });\n      });\n      await batch.commit();\n      toast({ title: \"Moved\", description: `Moved ${ids.length} item(s) to ${folder}.` });\n    },\n    [firestore],\n  );\n\n  const toggleTag = useCallback(\n    async (id: string, tag: string) => {\n      const doc = docs.find((item) => item.id === id);\n      if (!doc) return;\n      const exists = doc.tags?.includes(tag);\n      const tags = exists ? doc.tags.filter((item) => item !== tag) : [...(doc.tags ?? []), tag];\n      await updateDocPartial(id, { tags });\n    },\n    [docs, updateDocPartial],\n  );\n\n  const refresh = useCallback(() => {\n    toast({ title: \"Refreshed\", description: \"Listening for live updates.\" });\n  }, []);\n\n  return {\n    docs,\n    filteredDocs,\n    isLoading: loading,\n    filters,\n    setFilters,\n    search,\n    setSearch,\n    upload,\n    scanAndAutoTag,\n    updateDoc: updateDocPartial,\n    deleteDoc,\n    linkEntities,\n    setExpiry,\n    shareAcl,\n    moveToFolder,\n    toggleTag,\n    refresh,\n  };\n}\n\nfunction extractDate(value?: string | Date | Timestamp | null) {\n  if (!value) return null;\n  if (value instanceof Date) return value;\n  if (typeof value === \"string\") return new Date(value);\n  if (value instanceof Timestamp) return value.toDate();\n  if (typeof (value as any).toDate === \"function\") return (value as any).toDate();\n  return null;\n}\n\nfunction enrichDoc(doc: VaultDocument): VaultDocument {\n  const created = extractDate(doc.createdAt);\n  const updated = extractDate(doc.updatedAt);\n  const expiry = extractDate(doc.expireDate as any);\n  return {\n    ...doc,\n    createdAtFormatted: created ? format(created, \"MMM d, yyyy\") : \"Just now\",\n    updatedAtFormatted: updated ? format(updated, \"MMM d, yyyy\") : \"Just now\",\n    expireDateFormatted: expiry ? format(expiry, \"MMM d, yyyy\") : undefined,\n  };\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5153, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/vault/documents/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\nimport {\n  PageHeader,\n  PagePrimaryAction,\n  PageSecondaryAction,\n} from \"@/components/layout/page-header\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { Toggle } from \"@/components/ui/toggle\";\nimport { cn } from \"@/lib/utils\";\nimport { VaultDropzone } from \"@/components/vault/VaultDropzone\";\nimport { UploadDocumentDialog } from \"@/components/vault/UploadDocumentDialog\";\nimport { ScanAutoTagDialog } from \"@/components/vault/ScanAutoTagDialog\";\nimport { FiltersDrawer } from \"@/components/vault/FiltersDrawer\";\nimport { DocGrid } from \"@/components/vault/DocGrid\";\nimport { DocViewerModal } from \"@/components/vault/DocViewerModal\";\nimport { SetExpiryDialog } from \"@/components/vault/SetExpiryDialog\";\nimport { LinkEntitiesDrawer } from \"@/components/vault/LinkEntitiesDrawer\";\nimport { ShareAclDrawer } from \"@/components/vault/ShareAclDrawer\";\nimport { MoveToFolderDialog } from \"@/components/vault/MoveToFolderDialog\";\nimport { BulkBar } from \"@/components/vault/BulkBar\";\nimport { useVault, type VaultDocument } from \"@/lib/vault/useVault\";\nimport { Tooltip, TooltipContent, TooltipTrigger } from \"@/components/ui/tooltip\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { motion } from \"framer-motion\";\nimport { Filter, Grid3x3, LayoutList, Settings2, Users } from \"lucide-react\";\n\nexport type VaultViewMode = \"grid\" | \"list\";\n\nexport default function VaultDocumentsPage() {\n  const {\n    docs,\n    isLoading,\n    upload,\n    scanAndAutoTag,\n    updateDoc,\n    deleteDoc,\n    linkEntities,\n    setExpiry,\n    shareAcl,\n    moveToFolder,\n    filters,\n    setFilters,\n    search,\n    setSearch,\n    filteredDocs,\n    toggleTag,\n    refresh,\n  } = useVault();\n  const { toast } = useToast();\n  const [uploadOpen, setUploadOpen] = useState(false);\n  const [scanOpen, setScanOpen] = useState(false);\n  const [filtersOpen, setFiltersOpen] = useState(false);\n  const [viewMode, setViewMode] = useState<VaultViewMode>(\"grid\");\n  const [bulkMode, setBulkMode] = useState(false);\n  const [selected, setSelected] = useState<string[]>([]);\n  const [viewerDoc, setViewerDoc] = useState<VaultDocument | null>(null);\n  const [expiryDoc, setExpiryDoc] = useState<VaultDocument | null>(null);\n  const [linkDoc, setLinkDoc] = useState<VaultDocument | null>(null);\n  const [shareContext, setShareContext] = useState<{ ids: string[]; doc?: VaultDocument } | null>(null);\n  const [moveDoc, setMoveDoc] = useState<{ ids: string[]; doc?: VaultDocument } | null>(null);\n\n  const selectedDocs = useMemo(\n    () => filteredDocs.filter((doc) => selected.includes(doc.id)),\n    [filteredDocs, selected],\n  );\n\n  useEffect(() => {\n    if (!bulkMode) {\n      setSelected([]);\n    }\n  }, [bulkMode]);\n\n  useEffect(() => {\n    const onKey = (event: KeyboardEvent) => {\n      if (event.target && (event.target as HTMLElement).tagName === \"INPUT\") return;\n      switch (event.key.toLowerCase()) {\n        case \"u\":\n          event.preventDefault();\n          setUploadOpen(true);\n          break;\n        case \"s\":\n          event.preventDefault();\n          setScanOpen(true);\n          break;\n        case \"f\":\n          event.preventDefault();\n          setFiltersOpen(true);\n          break;\n        case \"e\":\n          if (selected.length === 1) {\n            event.preventDefault();\n            const doc = filteredDocs.find((d) => d.id === selected[0]);\n            if (doc) setExpiryDoc(doc);\n          }\n          break;\n        case \"delete\":\n        case \"backspace\":\n          if (selected.length > 0) {\n            event.preventDefault();\n            void deleteDoc(selected);\n            setSelected([]);\n          }\n          break;\n        case \"enter\":\n          if (selected.length === 1) {\n            const doc = filteredDocs.find((d) => d.id === selected[0]);\n            if (doc) setViewerDoc(doc);\n          }\n          break;\n        default:\n          break;\n      }\n    };\n    window.addEventListener(\"keydown\", onKey);\n    return () => window.removeEventListener(\"keydown\", onKey);\n  }, [deleteDoc, filteredDocs, selected]);\n\n  const toggleSelection = useCallback(\n    (id: string) => {\n      setSelected((prev) =>\n        prev.includes(id) ? prev.filter((item) => item !== id) : [...prev, id],\n      );\n    },\n    [],\n  );\n\n  const handleClearFilters = useCallback(() => {\n    setFilters({});\n    setSearch(\"\");\n  }, [setFilters, setSearch]);\n\n  const activeFilters = useMemo(() => {\n    const tagsActive = filters.tags && filters.tags.length > 0;\n    const typeActive = filters.types && filters.types.length > 0;\n    const expiryActive = Boolean(filters.expiry);\n    const linkedActive = Boolean(filters.linkedStatus);\n    const sourceActive = Boolean(filters.source) && filters.source.length > 0;\n    return tagsActive || typeActive || expiryActive || linkedActive || sourceActive;\n  }, [filters]);\n\n  const handleBulkShare = () => {\n    if (selected.length === 0) return;\n    setShareContext({ ids: selected });\n  };\n\n  const handleBulkMove = () => {\n    if (selected.length === 0) return;\n    setMoveDoc({ ids: selected });\n  };\n\n  const handleBulkLink = () => {\n    if (selected.length === 0) return;\n    setLinkDoc({\n      ...selectedDocs[0],\n    });\n  };\n\n  const manageSharing = () => {\n    if (selected.length > 0) {\n      setShareContext({ ids: selected, doc: selectedDocs[0] });\n    } else {\n      toast({\n        title: \"Select a document\",\n        description: \"Choose a document to manage access or use bulk mode.\",\n      });\n    }\n  };\n\n  const onDropUpload = useCallback(\n    async (files: File[]) => {\n      if (!files.length) return;\n      await upload(files);\n      toast({\n        title: \"Upload started\",\n        description: `Uploaded ${files.length} document${files.length > 1 ? \"s\" : \"\"}. Parsing in background...`,\n      });\n    },\n    [toast, upload],\n  );\n\n  return (\n    <div className=\"space-y-8 pb-32\">\n      <PageHeader\n        title=\"Documents\"\n        description=\"Encrypted digital vault for every important document. Upload, scan, tag, and share without ever leaving this workspace.\"\n        actions={\n          <>\n            <PagePrimaryAction>\n              <button type=\"button\" onClick={() => setUploadOpen(true)} className=\"w-full\">\n                Upload document\n              </button>\n            </PagePrimaryAction>\n            <PageSecondaryAction>\n              <button type=\"button\" onClick={() => setScanOpen(true)} className=\"w-full\">\n                Scan & auto-tag\n              </button>\n            </PageSecondaryAction>\n          </>\n        }\n      />\n\n      <VaultDropzone onFiles={onDropUpload} />\n\n      <motion.div\n        className=\"rounded-3xl border border-slate-800/60 bg-slate-950/70 p-4 shadow-lg\"\n        initial={{ opacity: 0, y: 10 }}\n        animate={{ opacity: 1, y: 0 }}\n      >\n        <div className=\"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between\">\n          <div className=\"flex flex-1 items-center gap-2\">\n            <Input\n              value={search}\n              onChange={(event) => setSearch(event.target.value)}\n              placeholder=\"Search title, tags, or OCR text\"\n              className=\"h-11 rounded-2xl bg-slate-900/60\"\n            />\n            <Tooltip>\n              <TooltipTrigger asChild>\n                <Button\n                  variant={activeFilters ? \"default\" : \"secondary\"}\n                  className={cn(\n                    \"rounded-2xl\",\n                    activeFilters\n                      ? \"bg-cyan-500 text-white hover:bg-cyan-500/90\"\n                      : \"bg-slate-900/60 text-slate-200\",\n                  )}\n                  onClick={() => setFiltersOpen(true)}\n                >\n                  <Filter className=\"mr-2 h-4 w-4\" /> Filters\n                </Button>\n              </TooltipTrigger>\n              <TooltipContent side=\"bottom\">Advanced filters</TooltipContent>\n            </Tooltip>\n          </div>\n          <div className=\"flex flex-wrap items-center gap-2\">\n            <div className=\"flex items-center gap-1 rounded-2xl border border-slate-800/80 bg-slate-900/40 p-1\">\n              <Toggle\n                pressed={viewMode === \"grid\"}\n                onPressedChange={() => setViewMode(\"grid\")}\n                className=\"rounded-2xl\"\n                aria-label=\"Grid view\"\n              >\n                <Grid3x3 className=\"h-4 w-4\" />\n              </Toggle>\n              <Toggle\n                pressed={viewMode === \"list\"}\n                onPressedChange={() => setViewMode(\"list\")}\n                className=\"rounded-2xl\"\n                aria-label=\"List view\"\n              >\n                <LayoutList className=\"h-4 w-4\" />\n              </Toggle>\n            </div>\n            <Button\n              variant={bulkMode ? \"default\" : \"outline\"}\n              className={cn(\"rounded-2xl\", bulkMode ? \"bg-cyan-600 text-white\" : \"border-slate-700\")}\n              onClick={() => setBulkMode((prev) => !prev)}\n            >\n              Bulk mode\n            </Button>\n            <Button\n              variant=\"ghost\"\n              className=\"rounded-2xl text-cyan-300 hover:bg-slate-900/60\"\n              onClick={manageSharing}\n            >\n              <Users className=\"mr-2 h-4 w-4\" /> Manage sharing\n            </Button>\n            <Tooltip>\n              <TooltipTrigger asChild>\n                <Button\n                  variant=\"ghost\"\n                  className=\"rounded-2xl text-slate-300 hover:bg-slate-900/60\"\n                  onClick={() => refresh()}\n                >\n                  <Settings2 className=\"mr-2 h-4 w-4\" /> Refresh\n                </Button>\n              </TooltipTrigger>\n              <TooltipContent side=\"bottom\">Reload latest changes</TooltipContent>\n            </Tooltip>\n          </div>\n        </div>\n        {activeFilters || search ? (\n          <div className=\"mt-4 flex flex-wrap items-center gap-2 text-xs text-slate-400\">\n            {search ? <span>Search: “{search}”</span> : null}\n            {filters.types?.map((type) => (\n              <span key={type} className=\"rounded-full bg-slate-900/80 px-3 py-1 text-slate-200\">\n                Type: {type}\n              </span>\n            ))}\n            {filters.tags?.map((tag) => (\n              <span key={tag} className=\"rounded-full bg-cyan-500/10 px-3 py-1 text-cyan-200\">\n                #{tag}\n              </span>\n            ))}\n            {filters.expiry ? <span>Expiry: {filters.expiry}</span> : null}\n            {filters.linkedStatus ? <span>Linked: {filters.linkedStatus}</span> : null}\n            {filters.source?.map((source) => (\n              <span key={source}>Source: {source}</span>\n            ))}\n            <Button variant=\"ghost\" size=\"sm\" className=\"rounded-full text-slate-300\" onClick={handleClearFilters}>\n              Clear\n            </Button>\n          </div>\n        ) : null}\n      </motion.div>\n\n      <Separator className=\"border-slate-800/50\" />\n\n      <DocGrid\n        docs={filteredDocs}\n        viewMode={viewMode}\n        bulkMode={bulkMode}\n        selectedIds={selected}\n        onToggleSelect={toggleSelection}\n        onOpen={setViewerDoc}\n        onRename={(doc) =>\n          updateDoc(doc.id, { filename: doc.filename }).catch(() =>\n            toast({ title: \"Rename failed\", description: \"Unable to rename document.\" }),\n          )\n        }\n        onTags={(doc, tag) => toggleTag(doc.id, tag)}\n        onSetExpiry={setExpiryDoc}\n        onLink={setLinkDoc}\n        onShare={(doc) => setShareContext({ ids: [doc.id], doc })}\n        onMove={(doc) => setMoveDoc({ ids: [doc.id], doc })}\n        onDelete={(ids) => deleteDoc(ids)}\n        isLoading={isLoading}\n        onDownload={(doc, mode) =>\n          toast({\n            title: mode === \"decrypted\" ? \"Preparing decrypted download\" : \"Downloading encrypted file\",\n            description: \"Your secure download will begin shortly.\",\n          })\n        }\n      />\n\n      <BulkBar\n        visible={bulkMode && selected.length > 0}\n        count={selected.length}\n        onClear={() => setSelected([])}\n        onShare={handleBulkShare}\n        onMove={handleBulkMove}\n        onDelete={() => deleteDoc(selected).then(() => setSelected([]))}\n        onLink={handleBulkLink}\n        onSetExpiry={() => {\n          if (selected.length === 1) {\n            const doc = filteredDocs.find((item) => item.id === selected[0]);\n            if (doc) setExpiryDoc(doc);\n          }\n        }}\n        onAddTag={(tag) => selected.forEach((id) => toggleTag(id, tag))}\n      />\n\n      <UploadDocumentDialog\n        open={uploadOpen}\n        onOpenChange={setUploadOpen}\n        onUpload={async (files) => {\n          await upload(files);\n          toast({\n            title: \"Upload started\",\n            description: `Uploaded ${files.length} document${files.length > 1 ? \"s\" : \"\"}. Parsing in background...`,\n          });\n        }}\n      />\n\n      <ScanAutoTagDialog\n        open={scanOpen}\n        onOpenChange={setScanOpen}\n        onScan={scanAndAutoTag}\n        onSave={async ({ file, extracted, suggestions, links }) => {\n          await upload([file], { extracted, suggestions, links, source: \"scan\" });\n          toast({\n            title: \"Saved from scan\",\n            description: suggestions?.type\n              ? `Saved document and suggested ${suggestions.type} tags.`\n              : \"Saved scanned document.\",\n          });\n        }}\n      />\n\n      <FiltersDrawer\n        open={filtersOpen}\n        onOpenChange={setFiltersOpen}\n        filters={filters}\n        onApply={setFilters}\n      />\n\n      <DocViewerModal\n        doc={viewerDoc}\n        onClose={() => setViewerDoc(null)}\n        onUpdate={(id, payload) => updateDoc(id, payload)}\n        onLink={() => viewerDoc && setLinkDoc(viewerDoc)}\n        onShare={() => viewerDoc && setShareContext({ ids: [viewerDoc.id], doc: viewerDoc })}\n        onSetExpiry={() => viewerDoc && setExpiryDoc(viewerDoc)}\n        onOpenRoute={(route) => {\n          toast({\n            title: \"Opening module\",\n            description: \"You'll stay here unless you confirm navigation from the drawer.\",\n          });\n          window.location.href = route;\n        }}\n      />\n\n      <SetExpiryDialog\n        doc={expiryDoc}\n        onClose={() => setExpiryDoc(null)}\n        onSave={(id, value) => setExpiry(id, value)}\n      />\n\n      <LinkEntitiesDrawer\n        doc={linkDoc}\n        onClose={() => setLinkDoc(null)}\n        onLink={(id, links) => linkEntities(id, links)}\n      />\n\n      <ShareAclDrawer\n        context={shareContext}\n        onClose={() => setShareContext(null)}\n        onShare={shareAcl}\n      />\n\n      <MoveToFolderDialog\n        context={moveDoc}\n        onClose={() => setMoveDoc(null)}\n        onMove={moveToFolder}\n      />\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AA5BA;;;;;;;;;;;;;;;;;;;;;;;;;AAgCe,SAAS;IACtB,MAAM,EACJ,IAAI,EACJ,SAAS,EACT,MAAM,EACN,cAAc,EACd,SAAS,EACT,SAAS,EACT,YAAY,EACZ,SAAS,EACT,QAAQ,EACR,YAAY,EACZ,OAAO,EACP,UAAU,EACV,MAAM,EACN,SAAS,EACT,YAAY,EACZ,SAAS,EACT,OAAO,EACR,GAAG,CAAA,GAAA,+HAAA,CAAA,WAAQ,AAAD;IACX,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,4HAAA,CAAA,WAAQ,AAAD;IACzB,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC7C,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC/C,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IACxD,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAY,EAAE;IACrD,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAwB;IACjE,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAwB;IACjE,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAwB;IAC7D,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiD;IAChG,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiD;IAEtF,MAAM,eAAe,CAAA,GAAA,qMAAA,CAAA,UAAO,AAAD,EACzB,IAAM,aAAa,MAAM,CAAC,CAAC,MAAQ,SAAS,QAAQ,CAAC,IAAI,EAAE,IAC3D;QAAC;QAAc;KAAS;IAG1B,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,CAAC,UAAU;YACb,YAAY,EAAE;QAChB;IACF,GAAG;QAAC;KAAS;IAEb,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,QAAQ,CAAC;YACb,IAAI,MAAM,MAAM,IAAI,AAAC,MAAM,MAAM,CAAiB,OAAO,KAAK,SAAS;YACvE,OAAQ,MAAM,GAAG,CAAC,WAAW;gBAC3B,KAAK;oBACH,MAAM,cAAc;oBACpB,cAAc;oBACd;gBACF,KAAK;oBACH,MAAM,cAAc;oBACpB,YAAY;oBACZ;gBACF,KAAK;oBACH,MAAM,cAAc;oBACpB,eAAe;oBACf;gBACF,KAAK;oBACH,IAAI,SAAS,MAAM,KAAK,GAAG;wBACzB,MAAM,cAAc;wBACpB,MAAM,MAAM,aAAa,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,QAAQ,CAAC,EAAE;wBACzD,IAAI,KAAK,aAAa;oBACxB;oBACA;gBACF,KAAK;gBACL,KAAK;oBACH,IAAI,SAAS,MAAM,GAAG,GAAG;wBACvB,MAAM,cAAc;wBACpB,KAAK,UAAU;wBACf,YAAY,EAAE;oBAChB;oBACA;gBACF,KAAK;oBACH,IAAI,SAAS,MAAM,KAAK,GAAG;wBACzB,MAAM,MAAM,aAAa,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,QAAQ,CAAC,EAAE;wBACzD,IAAI,KAAK,aAAa;oBACxB;oBACA;gBACF;oBACE;YACJ;QACF;QACA,OAAO,gBAAgB,CAAC,WAAW;QACnC,OAAO,IAAM,OAAO,mBAAmB,CAAC,WAAW;IACrD,GAAG;QAAC;QAAW;QAAc;KAAS;IAEtC,MAAM,kBAAkB,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAChC,CAAC;QACC,YAAY,CAAC,OACX,KAAK,QAAQ,CAAC,MAAM,KAAK,MAAM,CAAC,CAAC,OAAS,SAAS,MAAM;mBAAI;gBAAM;aAAG;IAE1E,GACA,EAAE;IAGJ,MAAM,qBAAqB,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE;QACrC,WAAW,CAAC;QACZ,UAAU;IACZ,GAAG;QAAC;QAAY;KAAU;IAE1B,MAAM,gBAAgB,CAAA,GAAA,qMAAA,CAAA,UAAO,AAAD,EAAE;QAC5B,MAAM,aAAa,QAAQ,IAAI,IAAI,QAAQ,IAAI,CAAC,MAAM,GAAG;QACzD,MAAM,aAAa,QAAQ,KAAK,IAAI,QAAQ,KAAK,CAAC,MAAM,GAAG;QAC3D,MAAM,eAAe,QAAQ,QAAQ,MAAM;QAC3C,MAAM,eAAe,QAAQ,QAAQ,YAAY;QACjD,MAAM,eAAe,QAAQ,QAAQ,MAAM,KAAK,QAAQ,MAAM,CAAC,MAAM,GAAG;QACxE,OAAO,cAAc,cAAc,gBAAgB,gBAAgB;IACrE,GAAG;QAAC;KAAQ;IAEZ,MAAM,kBAAkB;QACtB,IAAI,SAAS,MAAM,KAAK,GAAG;QAC3B,gBAAgB;YAAE,KAAK;QAAS;IAClC;IAEA,MAAM,iBAAiB;QACrB,IAAI,SAAS,MAAM,KAAK,GAAG;QAC3B,WAAW;YAAE,KAAK;QAAS;IAC7B;IAEA,MAAM,iBAAiB;QACrB,IAAI,SAAS,MAAM,KAAK,GAAG;QAC3B,WAAW;YACT,GAAG,YAAY,CAAC,EAAE;QACpB;IACF;IAEA,MAAM,gBAAgB;QACpB,IAAI,SAAS,MAAM,GAAG,GAAG;YACvB,gBAAgB;gBAAE,KAAK;gBAAU,KAAK,YAAY,CAAC,EAAE;YAAC;QACxD,OAAO;YACL,MAAM;gBACJ,OAAO;gBACP,aAAa;YACf;QACF;IACF;IAEA,MAAM,eAAe,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAC7B,OAAO;QACL,IAAI,CAAC,MAAM,MAAM,EAAE;QACnB,MAAM,OAAO;QACb,MAAM;YACJ,OAAO;YACP,aAAa,CAAC,SAAS,EAAE,MAAM,MAAM,CAAC,SAAS,EAAE,MAAM,MAAM,GAAG,IAAI,MAAM,GAAG,0BAA0B,CAAC;QAC1G;IACF,GACA;QAAC;QAAO;KAAO;IAGjB,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,8IAAA,CAAA,aAAU;gBACT,OAAM;gBACN,aAAY;gBACZ,uBACE;;sCACE,8OAAC,8IAAA,CAAA,oBAAiB;sCAChB,cAAA,8OAAC;gCAAO,MAAK;gCAAS,SAAS,IAAM,cAAc;gCAAO,WAAU;0CAAS;;;;;;;;;;;sCAI/E,8OAAC,8IAAA,CAAA,sBAAmB;sCAClB,cAAA,8OAAC;gCAAO,MAAK;gCAAS,SAAS,IAAM,YAAY;gCAAO,WAAU;0CAAS;;;;;;;;;;;;;;;;;;0BAQnF,8OAAC,4IAAA,CAAA,gBAAa;gBAAC,SAAS;;;;;;0BAExB,8OAAC,0LAAA,CAAA,SAAM,CAAC,GAAG;gBACT,WAAU;gBACV,SAAS;oBAAE,SAAS;oBAAG,GAAG;gBAAG;gBAC7B,SAAS;oBAAE,SAAS;oBAAG,GAAG;gBAAE;;kCAE5B,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,iIAAA,CAAA,QAAK;wCACJ,OAAO;wCACP,UAAU,CAAC,QAAU,UAAU,MAAM,MAAM,CAAC,KAAK;wCACjD,aAAY;wCACZ,WAAU;;;;;;kDAEZ,8OAAC,mIAAA,CAAA,UAAO;;0DACN,8OAAC,mIAAA,CAAA,iBAAc;gDAAC,OAAO;0DACrB,cAAA,8OAAC,kIAAA,CAAA,SAAM;oDACL,SAAS,gBAAgB,YAAY;oDACrC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,eACA,gBACI,gDACA;oDAEN,SAAS,IAAM,eAAe;;sEAE9B,8OAAC,sMAAA,CAAA,SAAM;4DAAC,WAAU;;;;;;wDAAiB;;;;;;;;;;;;0DAGvC,8OAAC,mIAAA,CAAA,iBAAc;gDAAC,MAAK;0DAAS;;;;;;;;;;;;;;;;;;0CAGlC,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;;0DACb,8OAAC,kIAAA,CAAA,SAAM;gDACL,SAAS,aAAa;gDACtB,iBAAiB,IAAM,YAAY;gDACnC,WAAU;gDACV,cAAW;0DAEX,cAAA,8OAAC,4MAAA,CAAA,UAAO;oDAAC,WAAU;;;;;;;;;;;0DAErB,8OAAC,kIAAA,CAAA,SAAM;gDACL,SAAS,aAAa;gDACtB,iBAAiB,IAAM,YAAY;gDACnC,WAAU;gDACV,cAAW;0DAEX,cAAA,8OAAC,kNAAA,CAAA,aAAU;oDAAC,WAAU;;;;;;;;;;;;;;;;;kDAG1B,8OAAC,kIAAA,CAAA,SAAM;wCACL,SAAS,WAAW,YAAY;wCAChC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,eAAe,WAAW,2BAA2B;wCACnE,SAAS,IAAM,YAAY,CAAC,OAAS,CAAC;kDACvC;;;;;;kDAGD,8OAAC,kIAAA,CAAA,SAAM;wCACL,SAAQ;wCACR,WAAU;wCACV,SAAS;;0DAET,8OAAC,oMAAA,CAAA,QAAK;gDAAC,WAAU;;;;;;4CAAiB;;;;;;;kDAEpC,8OAAC,mIAAA,CAAA,UAAO;;0DACN,8OAAC,mIAAA,CAAA,iBAAc;gDAAC,OAAO;0DACrB,cAAA,8OAAC,kIAAA,CAAA,SAAM;oDACL,SAAQ;oDACR,WAAU;oDACV,SAAS,IAAM;;sEAEf,8OAAC,gNAAA,CAAA,YAAS;4DAAC,WAAU;;;;;;wDAAiB;;;;;;;;;;;;0DAG1C,8OAAC,mIAAA,CAAA,iBAAc;gDAAC,MAAK;0DAAS;;;;;;;;;;;;;;;;;;;;;;;;oBAInC,iBAAiB,uBAChB,8OAAC;wBAAI,WAAU;;4BACZ,uBAAS,8OAAC;;oCAAK;oCAAU;oCAAO;;;;;;uCAAW;4BAC3C,QAAQ,KAAK,EAAE,IAAI,CAAC,qBACnB,8OAAC;oCAAgB,WAAU;;wCAAwD;wCAC1E;;mCADE;;;;;4BAIZ,QAAQ,IAAI,EAAE,IAAI,CAAC,oBAClB,8OAAC;oCAAe,WAAU;;wCAAsD;wCAC5E;;mCADO;;;;;4BAIZ,QAAQ,MAAM,iBAAG,8OAAC;;oCAAK;oCAAS,QAAQ,MAAM;;;;;;uCAAW;4BACzD,QAAQ,YAAY,iBAAG,8OAAC;;oCAAK;oCAAS,QAAQ,YAAY;;;;;;uCAAW;4BACrE,QAAQ,MAAM,EAAE,IAAI,CAAC,uBACpB,8OAAC;;wCAAkB;wCAAS;;mCAAjB;;;;;0CAEb,8OAAC,kIAAA,CAAA,SAAM;gCAAC,SAAQ;gCAAQ,MAAK;gCAAK,WAAU;gCAA8B,SAAS;0CAAoB;;;;;;;;;;;+BAIvG;;;;;;;0BAGN,8OAAC,qIAAA,CAAA,YAAS;gBAAC,WAAU;;;;;;0BAErB,8OAAC,sIAAA,CAAA,UAAO;gBACN,MAAM;gBACN,UAAU;gBACV,UAAU;gBACV,aAAa;gBACb,gBAAgB;gBAChB,QAAQ;gBACR,UAAU,CAAC,MACT,UAAU,IAAI,EAAE,EAAE;wBAAE,UAAU,IAAI,QAAQ;oBAAC,GAAG,KAAK,CAAC,IAClD,MAAM;4BAAE,OAAO;4BAAiB,aAAa;wBAA6B;gBAG9E,QAAQ,CAAC,KAAK,MAAQ,UAAU,IAAI,EAAE,EAAE;gBACxC,aAAa;gBACb,QAAQ;gBACR,SAAS,CAAC,MAAQ,gBAAgB;wBAAE,KAAK;4BAAC,IAAI,EAAE;yBAAC;wBAAE;oBAAI;gBACvD,QAAQ,CAAC,MAAQ,WAAW;wBAAE,KAAK;4BAAC,IAAI,EAAE;yBAAC;wBAAE;oBAAI;gBACjD,UAAU,CAAC,MAAQ,UAAU;gBAC7B,WAAW;gBACX,YAAY,CAAC,KAAK,OAChB,MAAM;wBACJ,OAAO,SAAS,cAAc,iCAAiC;wBAC/D,aAAa;oBACf;;;;;;0BAIJ,8OAAC,sIAAA,CAAA,UAAO;gBACN,SAAS,YAAY,SAAS,MAAM,GAAG;gBACvC,OAAO,SAAS,MAAM;gBACtB,SAAS,IAAM,YAAY,EAAE;gBAC7B,SAAS;gBACT,QAAQ;gBACR,UAAU,IAAM,UAAU,UAAU,IAAI,CAAC,IAAM,YAAY,EAAE;gBAC7D,QAAQ;gBACR,aAAa;oBACX,IAAI,SAAS,MAAM,KAAK,GAAG;wBACzB,MAAM,MAAM,aAAa,IAAI,CAAC,CAAC,OAAS,KAAK,EAAE,KAAK,QAAQ,CAAC,EAAE;wBAC/D,IAAI,KAAK,aAAa;oBACxB;gBACF;gBACA,UAAU,CAAC,MAAQ,SAAS,OAAO,CAAC,CAAC,KAAO,UAAU,IAAI;;;;;;0BAG5D,8OAAC,mJAAA,CAAA,uBAAoB;gBACnB,MAAM;gBACN,cAAc;gBACd,UAAU,OAAO;oBACf,MAAM,OAAO;oBACb,MAAM;wBACJ,OAAO;wBACP,aAAa,CAAC,SAAS,EAAE,MAAM,MAAM,CAAC,SAAS,EAAE,MAAM,MAAM,GAAG,IAAI,MAAM,GAAG,0BAA0B,CAAC;oBAC1G;gBACF;;;;;;0BAGF,8OAAC,gJAAA,CAAA,oBAAiB;gBAChB,MAAM;gBACN,cAAc;gBACd,QAAQ;gBACR,QAAQ,OAAO,EAAE,IAAI,EAAE,SAAS,EAAE,WAAW,EAAE,KAAK,EAAE;oBACpD,MAAM,OAAO;wBAAC;qBAAK,EAAE;wBAAE;wBAAW;wBAAa;wBAAO,QAAQ;oBAAO;oBACrE,MAAM;wBACJ,OAAO;wBACP,aAAa,aAAa,OACtB,CAAC,6BAA6B,EAAE,YAAY,IAAI,CAAC,MAAM,CAAC,GACxD;oBACN;gBACF;;;;;;0BAGF,8OAAC,4IAAA,CAAA,gBAAa;gBACZ,MAAM;gBACN,cAAc;gBACd,SAAS;gBACT,SAAS;;;;;;0BAGX,8OAAC,6IAAA,CAAA,iBAAc;gBACb,KAAK;gBACL,SAAS,IAAM,aAAa;gBAC5B,UAAU,CAAC,IAAI,UAAY,UAAU,IAAI;gBACzC,QAAQ,IAAM,aAAa,WAAW;gBACtC,SAAS,IAAM,aAAa,gBAAgB;wBAAE,KAAK;4BAAC,UAAU,EAAE;yBAAC;wBAAE,KAAK;oBAAU;gBAClF,aAAa,IAAM,aAAa,aAAa;gBAC7C,aAAa,CAAC;oBACZ,MAAM;wBACJ,OAAO;wBACP,aAAa;oBACf;oBACA,OAAO,QAAQ,CAAC,IAAI,GAAG;gBACzB;;;;;;0BAGF,8OAAC,8IAAA,CAAA,kBAAe;gBACd,KAAK;gBACL,SAAS,IAAM,aAAa;gBAC5B,QAAQ,CAAC,IAAI,QAAU,UAAU,IAAI;;;;;;0BAGvC,8OAAC,iJAAA,CAAA,qBAAkB;gBACjB,KAAK;gBACL,SAAS,IAAM,WAAW;gBAC1B,QAAQ,CAAC,IAAI,QAAU,aAAa,IAAI;;;;;;0BAG1C,8OAAC,6IAAA,CAAA,iBAAc;gBACb,SAAS;gBACT,SAAS,IAAM,gBAAgB;gBAC/B,SAAS;;;;;;0BAGX,8OAAC,iJAAA,CAAA,qBAAkB;gBACjB,SAAS;gBACT,SAAS,IAAM,WAAW;gBAC1B,QAAQ;;;;;;;;;;;;AAIhB","debugId":null}}]
}