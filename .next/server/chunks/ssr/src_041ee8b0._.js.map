{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/tabs.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,OAAO,gKAAA,CAAA,OAAkB;AAE/B,MAAM,yBAAW,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG9B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,gKAAA,CAAA,OAAkB;QACjB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,8FACA;QAED,GAAG,KAAK;;;;;;AAGb,SAAS,WAAW,GAAG,gKAAA,CAAA,OAAkB,CAAC,WAAW;AAErD,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,gKAAA,CAAA,UAAqB;QACpB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,uYACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,gKAAA,CAAA,UAAqB,CAAC,WAAW;AAE3D,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,gKAAA,CAAA,UAAqB;QACpB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,mIACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,gKAAA,CAAA,UAAqB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 60, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/scroll-area.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC,0KAAA,CAAA,OAAwB;QACvB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,4BAA4B;QACzC,GAAG,KAAK;;0BAET,8OAAC,0KAAA,CAAA,WAA4B;gBAAC,WAAU;0BACrC;;;;;;0BAEH,8OAAC;;;;;0BACD,8OAAC,0KAAA,CAAA,SAA0B;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,0KAAA,CAAA,OAAwB,CAAC,WAAW;AAE7D,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,cAAc,UAAU,EAAE,GAAG,OAAO,EAAE,oBACpD,8OAAC,0KAAA,CAAA,sBAAuC;QACtC,KAAK;QACL,aAAa;QACb,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,iDACA,gBAAgB,cACd,sDACF,gBAAgB,gBACd,wDACF;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,0KAAA,CAAA,kBAAmC;YAAC,WAAU;;;;;;;;;;;AAGnD,UAAU,WAAW,GAAG,0KAAA,CAAA,sBAAuC,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 128, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/ui/format.ts"],"sourcesContent":["export function formatCurrency(amount: number, currency = \"USD\") {\n  return new Intl.NumberFormat(\"en-US\", {\n    style: \"currency\",\n    currency,\n    maximumFractionDigits: 0,\n  }).format(amount);\n}\n\nexport function formatPercent(value: number, fractionDigits = 0) {\n  return `${value.toFixed(fractionDigits)}%`;\n}\n\nexport function formatDateTime(value: string | Date) {\n  const date = typeof value === \"string\" ? new Date(value) : value;\n  return new Intl.DateTimeFormat(\"en-US\", {\n    month: \"short\",\n    day: \"numeric\",\n    hour: \"numeric\",\n    minute: \"2-digit\",\n  }).format(date);\n}\n\nexport function formatRelative(value: string | Date) {\n  const date = typeof value === \"string\" ? new Date(value) : value;\n  const diff = date.getTime() - Date.now();\n  const minutes = Math.round(diff / (60 * 1000));\n  if (minutes === 0) return \"now\";\n  if (Math.abs(minutes) < 60) {\n    return minutes > 0 ? `in ${minutes}m` : `${Math.abs(minutes)}m ago`;\n  }\n  const hours = Math.round(minutes / 60);\n  return hours > 0 ? `in ${hours}h` : `${Math.abs(hours)}h ago`;\n}\n\n"],"names":[],"mappings":";;;;;;AAAO,SAAS,eAAe,MAAc,EAAE,WAAW,KAAK;IAC7D,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;QACpC,OAAO;QACP;QACA,uBAAuB;IACzB,GAAG,MAAM,CAAC;AACZ;AAEO,SAAS,cAAc,KAAa,EAAE,iBAAiB,CAAC;IAC7D,OAAO,GAAG,MAAM,OAAO,CAAC,gBAAgB,CAAC,CAAC;AAC5C;AAEO,SAAS,eAAe,KAAoB;IACjD,MAAM,OAAO,OAAO,UAAU,WAAW,IAAI,KAAK,SAAS;IAC3D,OAAO,IAAI,KAAK,cAAc,CAAC,SAAS;QACtC,OAAO;QACP,KAAK;QACL,MAAM;QACN,QAAQ;IACV,GAAG,MAAM,CAAC;AACZ;AAEO,SAAS,eAAe,KAAoB;IACjD,MAAM,OAAO,OAAO,UAAU,WAAW,IAAI,KAAK,SAAS;IAC3D,MAAM,OAAO,KAAK,OAAO,KAAK,KAAK,GAAG;IACtC,MAAM,UAAU,KAAK,KAAK,CAAC,OAAO,CAAC,KAAK,IAAI;IAC5C,IAAI,YAAY,GAAG,OAAO;IAC1B,IAAI,KAAK,GAAG,CAAC,WAAW,IAAI;QAC1B,OAAO,UAAU,IAAI,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC,GAAG,GAAG,KAAK,GAAG,CAAC,SAAS,KAAK,CAAC;IACrE;IACA,MAAM,QAAQ,KAAK,KAAK,CAAC,UAAU;IACnC,OAAO,QAAQ,IAAI,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC,GAAG,GAAG,KAAK,GAAG,CAAC,OAAO,KAAK,CAAC;AAC/D","debugId":null}},
    {"offset": {"line": 170, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/bridge/QueueItem.tsx"],"sourcesContent":["\"use client\";\n\nimport { motion } from \"framer-motion\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { cn } from \"@/lib/utils\";\nimport { QueueItem as QueueItemType } from \"@/lib/graph/types\";\nimport { formatPercent } from \"@/lib/ui/format\";\n\nconst actionLabels: Record<QueueItemType[\"actions\"][number], string> = {\n  Accept: \"Accept\",\n  Schedule: \"Schedule\",\n  Nudge: \"Nudge\",\n  Simulate: \"Simulate\",\n  Explain: \"Explain\",\n  Open: \"Open\",\n  Ignore: \"Ignore 7d\",\n};\n\ntype Props = {\n  item: QueueItemType;\n  isSelected: boolean;\n  onSelect: () => void;\n  onAction: (action: QueueItemType[\"actions\"][number], item: QueueItemType) => void;\n};\n\nexport function QueueItem({ item, isSelected, onSelect, onAction }: Props) {\n  return (\n    <motion.button\n      layout\n      onClick={onSelect}\n      className={cn(\n        \"group w-full rounded-3xl border border-slate-800/80 bg-slate-900/50 p-4 text-left transition\",\n        isSelected ? \"ring-2 ring-cyan-400/80\" : \"hover:border-slate-700 hover:bg-slate-900/80\"\n      )}\n    >\n      <div className=\"flex items-start justify-between gap-3\">\n        <div>\n          <p className=\"text-sm uppercase tracking-wide text-slate-400\">{item.kind}</p>\n          <h3 className=\"mt-1 text-lg font-semibold text-white\">{item.title}</h3>\n          <p className=\"mt-1 text-sm text-slate-300\">{item.detail}</p>\n          {item.impact && (\n            <div className=\"mt-3 flex flex-wrap gap-2\">\n              {item.impact.runwayDelta !== undefined && (\n                <Badge variant=\"outline\" className=\"border-cyan-500/50 bg-cyan-500/10 text-cyan-200\">\n                  {item.impact.runwayDelta > 0 ? \"+\" : \"\"}\n                  {item.impact.runwayDelta} runway days\n                </Badge>\n              )}\n              {item.impact.burnDelta !== undefined && (\n                <Badge variant=\"outline\" className=\"border-amber-500/40 bg-amber-500/10 text-amber-200\">\n                  {item.impact.burnDelta > 0 ? \"+\" : \"\"}\n                  {item.impact.burnDelta.toFixed(1)}% burn\n                </Badge>\n              )}\n              {item.impact.goalEtaDeltaDays !== undefined && (\n                <Badge variant=\"outline\" className=\"border-indigo-500/40 bg-indigo-500/10 text-indigo-200\">\n                  ETA {item.impact.goalEtaDeltaDays > 0 ? \"+\" : \"\"}\n                  {item.impact.goalEtaDeltaDays}d\n                </Badge>\n              )}\n              {item.impact.adherenceDelta !== undefined && (\n                <Badge variant=\"outline\" className=\"border-emerald-500/40 bg-emerald-500/10 text-emerald-200\">\n                  {formatPercent(item.impact.adherenceDelta)} adherence\n                </Badge>\n              )}\n            </div>\n          )}\n        </div>\n        <div className=\"flex flex-col items-end gap-2\">\n          <Badge className=\"rounded-full bg-cyan-500/20 px-3 py-1 text-xs font-semibold text-cyan-100\">\n            {Math.round(item.priorityScore)}\n          </Badge>\n          <div className=\"flex flex-wrap justify-end gap-2\">\n            {item.actions.map(action => (\n              <Button\n                key={action}\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={event => {\n                  event.stopPropagation();\n                  onAction(action, item);\n                }}\n                className=\"border-slate-700 bg-slate-950/50 text-xs text-slate-200 hover:bg-slate-800\"\n              >\n                {actionLabels[action]}\n              </Button>\n            ))}\n          </div>\n        </div>\n      </div>\n    </motion.button>\n  );\n}\n\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AAEA;AAPA;;;;;;;AASA,MAAM,eAAiE;IACrE,QAAQ;IACR,UAAU;IACV,OAAO;IACP,UAAU;IACV,SAAS;IACT,MAAM;IACN,QAAQ;AACV;AASO,SAAS,UAAU,EAAE,IAAI,EAAE,UAAU,EAAE,QAAQ,EAAE,QAAQ,EAAS;IACvE,qBACE,8OAAC,0LAAA,CAAA,SAAM,CAAC,MAAM;QACZ,MAAM;QACN,SAAS;QACT,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,gGACA,aAAa,4BAA4B;kBAG3C,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;;sCACC,8OAAC;4BAAE,WAAU;sCAAkD,KAAK,IAAI;;;;;;sCACxE,8OAAC;4BAAG,WAAU;sCAAyC,KAAK,KAAK;;;;;;sCACjE,8OAAC;4BAAE,WAAU;sCAA+B,KAAK,MAAM;;;;;;wBACtD,KAAK,MAAM,kBACV,8OAAC;4BAAI,WAAU;;gCACZ,KAAK,MAAM,CAAC,WAAW,KAAK,2BAC3B,8OAAC,iIAAA,CAAA,QAAK;oCAAC,SAAQ;oCAAU,WAAU;;wCAChC,KAAK,MAAM,CAAC,WAAW,GAAG,IAAI,MAAM;wCACpC,KAAK,MAAM,CAAC,WAAW;wCAAC;;;;;;;gCAG5B,KAAK,MAAM,CAAC,SAAS,KAAK,2BACzB,8OAAC,iIAAA,CAAA,QAAK;oCAAC,SAAQ;oCAAU,WAAU;;wCAChC,KAAK,MAAM,CAAC,SAAS,GAAG,IAAI,MAAM;wCAClC,KAAK,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC;wCAAG;;;;;;;gCAGrC,KAAK,MAAM,CAAC,gBAAgB,KAAK,2BAChC,8OAAC,iIAAA,CAAA,QAAK;oCAAC,SAAQ;oCAAU,WAAU;;wCAAwD;wCACpF,KAAK,MAAM,CAAC,gBAAgB,GAAG,IAAI,MAAM;wCAC7C,KAAK,MAAM,CAAC,gBAAgB;wCAAC;;;;;;;gCAGjC,KAAK,MAAM,CAAC,cAAc,KAAK,2BAC9B,8OAAC,iIAAA,CAAA,QAAK;oCAAC,SAAQ;oCAAU,WAAU;;wCAChC,CAAA,GAAA,0HAAA,CAAA,gBAAa,AAAD,EAAE,KAAK,MAAM,CAAC,cAAc;wCAAE;;;;;;;;;;;;;;;;;;;8BAMrD,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,iIAAA,CAAA,QAAK;4BAAC,WAAU;sCACd,KAAK,KAAK,CAAC,KAAK,aAAa;;;;;;sCAEhC,8OAAC;4BAAI,WAAU;sCACZ,KAAK,OAAO,CAAC,GAAG,CAAC,CAAA,uBAChB,8OAAC,kIAAA,CAAA,SAAM;oCAEL,SAAQ;oCACR,MAAK;oCACL,SAAS,CAAA;wCACP,MAAM,eAAe;wCACrB,SAAS,QAAQ;oCACnB;oCACA,WAAU;8CAET,YAAY,CAAC,OAAO;mCAThB;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiBrB","debugId":null}},
    {"offset": {"line": 352, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/bridge/AttentionQueue.tsx"],"sourcesContent":["\"use client\";\n\nimport { useMemo } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { Tabs, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { QueueItem as QueueItemType } from \"@/lib/graph/types\";\nimport { QueueItem } from \"./QueueItem\";\n\nconst filters = [\n  { value: \"all\", label: \"All\" },\n  { value: \"finance\", label: \"Finance\" },\n  { value: \"care\", label: \"Care\" },\n  { value: \"home\", label: \"Home\" },\n  { value: \"goals\", label: \"Goals\" },\n  { value: \"pulse\", label: \"Pulse\" },\n];\n\ntype Props = {\n  items: QueueItemType[];\n  filter: string;\n  onFilterChange: (filter: string) => void;\n  selectedId?: string | null;\n  onSelect: (item: QueueItemType) => void;\n  onAction: (action: QueueItemType[\"actions\"][number], item: QueueItemType) => void;\n  focusMode?: boolean;\n};\n\nexport function AttentionQueue({\n  items,\n  filter,\n  onFilterChange,\n  selectedId,\n  onSelect,\n  onAction,\n  focusMode = false,\n}: Props) {\n  const visibleItems = useMemo(() => {\n    const next = filter === \"all\" ? items : items.filter(item => item.category === filter);\n    return focusMode ? next.slice(0, 5) : next;\n  }, [items, filter, focusMode]);\n\n  return (\n    <div className=\"flex h-full flex-col rounded-3xl border border-slate-900/70 bg-slate-950/80 p-4 shadow-2xl\">\n      <div className=\"mb-4 flex items-center justify-between\">\n        <div>\n          <p className=\"text-xs uppercase tracking-[0.3em] text-cyan-400/80\">Attention Queue</p>\n          <h2 className=\"text-2xl font-semibold text-white\">What needs you now</h2>\n        </div>\n      </div>\n      <Tabs value={filter} onValueChange={onFilterChange} className=\"w-full\">\n        <TabsList className=\"grid grid-cols-3 gap-2 bg-slate-900/60\">\n          {filters.map(option => (\n            <TabsTrigger key={option.value} value={option.value} className=\"rounded-full\">\n              {option.label}\n            </TabsTrigger>\n          ))}\n        </TabsList>\n      </Tabs>\n      <ScrollArea className=\"mt-4 h-[calc(100%-6rem)] pr-2\">\n        <AnimatePresence>\n          <motion.div layout className=\"flex flex-col gap-3\">\n            {visibleItems.map(item => (\n              <QueueItem\n                key={item.id}\n                item={item}\n                isSelected={item.id === selectedId}\n                onSelect={() => onSelect(item)}\n                onAction={onAction}\n              />\n            ))}\n            {visibleItems.length === 0 && (\n              <div className=\"rounded-3xl border border-dashed border-slate-800/80 p-6 text-center text-sm text-slate-400\">\n                Nothing urgent. Enjoy the calm.\n              </div>\n            )}\n          </motion.div>\n        </AnimatePresence>\n      </ScrollArea>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":";;;;AAEA;AACA;AAAA;AACA;AACA;AAEA;AAPA;;;;;;;AASA,MAAM,UAAU;IACd;QAAE,OAAO;QAAO,OAAO;IAAM;IAC7B;QAAE,OAAO;QAAW,OAAO;IAAU;IACrC;QAAE,OAAO;QAAQ,OAAO;IAAO;IAC/B;QAAE,OAAO;QAAQ,OAAO;IAAO;IAC/B;QAAE,OAAO;QAAS,OAAO;IAAQ;IACjC;QAAE,OAAO;QAAS,OAAO;IAAQ;CAClC;AAYM,SAAS,eAAe,EAC7B,KAAK,EACL,MAAM,EACN,cAAc,EACd,UAAU,EACV,QAAQ,EACR,QAAQ,EACR,YAAY,KAAK,EACX;IACN,MAAM,eAAe,CAAA,GAAA,qMAAA,CAAA,UAAO,AAAD,EAAE;QAC3B,MAAM,OAAO,WAAW,QAAQ,QAAQ,MAAM,MAAM,CAAC,CAAA,OAAQ,KAAK,QAAQ,KAAK;QAC/E,OAAO,YAAY,KAAK,KAAK,CAAC,GAAG,KAAK;IACxC,GAAG;QAAC;QAAO;QAAQ;KAAU;IAE7B,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;;sCACC,8OAAC;4BAAE,WAAU;sCAAsD;;;;;;sCACnE,8OAAC;4BAAG,WAAU;sCAAoC;;;;;;;;;;;;;;;;;0BAGtD,8OAAC,gIAAA,CAAA,OAAI;gBAAC,OAAO;gBAAQ,eAAe;gBAAgB,WAAU;0BAC5D,cAAA,8OAAC,gIAAA,CAAA,WAAQ;oBAAC,WAAU;8BACjB,QAAQ,GAAG,CAAC,CAAA,uBACX,8OAAC,gIAAA,CAAA,cAAW;4BAAoB,OAAO,OAAO,KAAK;4BAAE,WAAU;sCAC5D,OAAO,KAAK;2BADG,OAAO,KAAK;;;;;;;;;;;;;;;0BAMpC,8OAAC,0IAAA,CAAA,aAAU;gBAAC,WAAU;0BACpB,cAAA,8OAAC,yLAAA,CAAA,kBAAe;8BACd,cAAA,8OAAC,0LAAA,CAAA,SAAM,CAAC,GAAG;wBAAC,MAAM;wBAAC,WAAU;;4BAC1B,aAAa,GAAG,CAAC,CAAA,qBAChB,8OAAC,yIAAA,CAAA,YAAS;oCAER,MAAM;oCACN,YAAY,KAAK,EAAE,KAAK;oCACxB,UAAU,IAAM,SAAS;oCACzB,UAAU;mCAJL,KAAK,EAAE;;;;;4BAOf,aAAa,MAAM,KAAK,mBACvB,8OAAC;gCAAI,WAAU;0CAA8F;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAS3H","debugId":null}},
    {"offset": {"line": 517, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/bridge/lenses/TimelineLens.tsx"],"sourcesContent":["\"use client\";\n\nimport { TimelineEntry } from \"@/lib/graph/types\";\nimport { formatDateTime, formatRelative } from \"@/lib/ui/format\";\nimport { cn } from \"@/lib/utils\";\n\nconst statusStyles: Record<TimelineEntry[\"status\"], string> = {\n  scheduled: \"border-cyan-500/60 bg-cyan-500/10 text-cyan-100\",\n  completed: \"border-emerald-500/60 bg-emerald-500/10 text-emerald-100\",\n  atRisk: \"border-amber-500/60 bg-amber-500/10 text-amber-100\",\n};\n\ntype Props = {\n  entries: TimelineEntry[];\n};\n\nexport function TimelineLens({ entries }: Props) {\n  return (\n    <div className=\"space-y-4\">\n      {entries.map(entry => (\n        <div\n          key={entry.id}\n          className=\"rounded-2xl border border-slate-800/80 bg-slate-900/40 p-4 backdrop-blur\"\n        >\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm font-medium text-white\">{entry.label}</p>\n              <p className=\"text-xs text-slate-400\">{entry.detail}</p>\n            </div>\n            <span className={cn(\"rounded-full border px-3 py-1 text-xs\", statusStyles[entry.status])}>\n              {entry.status === \"scheduled\" ? \"Scheduled\" : entry.status === \"completed\" ? \"Done\" : \"At risk\"}\n            </span>\n          </div>\n          <div className=\"mt-3 flex items-center justify-between text-xs text-slate-400\">\n            <span>{formatDateTime(entry.date)}</span>\n            <span>{formatRelative(entry.date)}</span>\n          </div>\n        </div>\n      ))}\n      {entries.length === 0 && (\n        <div className=\"rounded-2xl border border-dashed border-slate-800/80 p-6 text-center text-sm text-slate-400\">\n          No timeline items available.\n        </div>\n      )}\n    </div>\n  );\n}\n\n"],"names":[],"mappings":";;;;AAGA;AACA;AAJA;;;;AAMA,MAAM,eAAwD;IAC5D,WAAW;IACX,WAAW;IACX,QAAQ;AACV;AAMO,SAAS,aAAa,EAAE,OAAO,EAAS;IAC7C,qBACE,8OAAC;QAAI,WAAU;;YACZ,QAAQ,GAAG,CAAC,CAAA,sBACX,8OAAC;oBAEC,WAAU;;sCAEV,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;;sDACC,8OAAC;4CAAE,WAAU;sDAAkC,MAAM,KAAK;;;;;;sDAC1D,8OAAC;4CAAE,WAAU;sDAA0B,MAAM,MAAM;;;;;;;;;;;;8CAErD,8OAAC;oCAAK,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,yCAAyC,YAAY,CAAC,MAAM,MAAM,CAAC;8CACpF,MAAM,MAAM,KAAK,cAAc,cAAc,MAAM,MAAM,KAAK,cAAc,SAAS;;;;;;;;;;;;sCAG1F,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;8CAAM,CAAA,GAAA,0HAAA,CAAA,iBAAc,AAAD,EAAE,MAAM,IAAI;;;;;;8CAChC,8OAAC;8CAAM,CAAA,GAAA,0HAAA,CAAA,iBAAc,AAAD,EAAE,MAAM,IAAI;;;;;;;;;;;;;mBAd7B,MAAM,EAAE;;;;;YAkBhB,QAAQ,MAAM,KAAK,mBAClB,8OAAC;gBAAI,WAAU;0BAA8F;;;;;;;;;;;;AAMrH","debugId":null}},
    {"offset": {"line": 630, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/bridge/lenses/CashflowLens.tsx"],"sourcesContent":["\"use client\";\n\nimport { CashflowInsight } from \"@/lib/graph/types\";\nimport { formatCurrency, formatRelative } from \"@/lib/ui/format\";\n\ntype Props = {\n  variance: number;\n  burnRate: number;\n  transactions: CashflowInsight[];\n};\n\nexport function CashflowLens({ variance, burnRate, transactions }: Props) {\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"rounded-2xl border border-slate-800/80 bg-slate-900/60 p-4\">\n        <div className=\"flex items-center justify-between text-sm text-slate-300\">\n          <span>Variance</span>\n          <span className={variance > 0 ? \"text-amber-300\" : \"text-emerald-300\"}>{variance.toFixed(1)}%</span>\n        </div>\n        <div className=\"mt-2 flex items-center justify-between text-sm text-slate-300\">\n          <span>Burn rate</span>\n          <span className=\"text-cyan-200\">{formatCurrency(burnRate)}</span>\n        </div>\n      </div>\n\n      <div className=\"space-y-3\">\n        {transactions.map(txn => (\n          <div key={txn.id} className=\"rounded-2xl border border-slate-800/80 bg-slate-900/40 p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-white\">{formatCurrency(txn.amount)}</p>\n                <p className=\"text-xs text-slate-400\">{txn.category}</p>\n              </div>\n              <div className=\"text-right text-xs text-slate-400\">\n                <p>{formatRelative(txn.postedAt)}</p>\n                <p className=\"capitalize text-slate-500\">{txn.status}</p>\n              </div>\n            </div>\n            {txn.memo && <p className=\"mt-3 text-xs text-slate-300\">{txn.memo}</p>}\n          </div>\n        ))}\n        {transactions.length === 0 && (\n          <div className=\"rounded-2xl border border-dashed border-slate-800/80 p-6 text-center text-sm text-slate-400\">\n            No cashflow entries to display.\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":";;;;AAGA;AAHA;;;AAWO,SAAS,aAAa,EAAE,QAAQ,EAAE,QAAQ,EAAE,YAAY,EAAS;IACtE,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;0CAAK;;;;;;0CACN,8OAAC;gCAAK,WAAW,WAAW,IAAI,mBAAmB;;oCAAqB,SAAS,OAAO,CAAC;oCAAG;;;;;;;;;;;;;kCAE9F,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;0CAAK;;;;;;0CACN,8OAAC;gCAAK,WAAU;0CAAiB,CAAA,GAAA,0HAAA,CAAA,iBAAc,AAAD,EAAE;;;;;;;;;;;;;;;;;;0BAIpD,8OAAC;gBAAI,WAAU;;oBACZ,aAAa,GAAG,CAAC,CAAA,oBAChB,8OAAC;4BAAiB,WAAU;;8CAC1B,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;;8DACC,8OAAC;oDAAE,WAAU;8DAAkC,CAAA,GAAA,0HAAA,CAAA,iBAAc,AAAD,EAAE,IAAI,MAAM;;;;;;8DACxE,8OAAC;oDAAE,WAAU;8DAA0B,IAAI,QAAQ;;;;;;;;;;;;sDAErD,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;8DAAG,CAAA,GAAA,0HAAA,CAAA,iBAAc,AAAD,EAAE,IAAI,QAAQ;;;;;;8DAC/B,8OAAC;oDAAE,WAAU;8DAA6B,IAAI,MAAM;;;;;;;;;;;;;;;;;;gCAGvD,IAAI,IAAI,kBAAI,8OAAC;oCAAE,WAAU;8CAA+B,IAAI,IAAI;;;;;;;2BAXzD,IAAI,EAAE;;;;;oBAcjB,aAAa,MAAM,KAAK,mBACvB,8OAAC;wBAAI,WAAU;kCAA8F;;;;;;;;;;;;;;;;;;AAOvH","debugId":null}},
    {"offset": {"line": 806, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/bridge/lenses/DocsLens.tsx"],"sourcesContent":["\"use client\";\n\nimport { DocSummary } from \"@/lib/graph/types\";\nimport { formatRelative } from \"@/lib/ui/format\";\nimport { Button } from \"@/components/ui/button\";\nimport { Upload } from \"lucide-react\";\n\ntype Props = {\n  docs: DocSummary[];\n};\n\nexport function DocsLens({ docs }: Props) {\n  return (\n    <div className=\"space-y-4\">\n      <Button variant=\"outline\" className=\"w-full justify-start gap-2 border-slate-700 bg-slate-900/40 text-slate-200\">\n        <Upload className=\"h-4 w-4\" />\n        Drop or paste a document\n      </Button>\n      <div className=\"space-y-3\">\n        {docs.map(doc => (\n          <div key={doc.id} className=\"rounded-2xl border border-slate-800/80 bg-slate-900/40 p-4\">\n            <p className=\"text-sm font-medium text-white\">{doc.name}</p>\n            <p className=\"text-xs text-slate-400\">{doc.kind} · {formatRelative(doc.uploadedAt)}</p>\n            {doc.link && (\n              <a\n                href={doc.link}\n                className=\"mt-2 inline-block text-xs text-cyan-300 hover:text-cyan-200\"\n              >\n                Open source\n              </a>\n            )}\n          </div>\n        ))}\n        {docs.length === 0 && (\n          <div className=\"rounded-2xl border border-dashed border-slate-800/80 p-6 text-center text-sm text-slate-400\">\n            No linked documents yet.\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":";;;;AAGA;AACA;AACA;AALA;;;;;AAWO,SAAS,SAAS,EAAE,IAAI,EAAS;IACtC,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,kIAAA,CAAA,SAAM;gBAAC,SAAQ;gBAAU,WAAU;;kCAClC,8OAAC,sMAAA,CAAA,SAAM;wBAAC,WAAU;;;;;;oBAAY;;;;;;;0BAGhC,8OAAC;gBAAI,WAAU;;oBACZ,KAAK,GAAG,CAAC,CAAA,oBACR,8OAAC;4BAAiB,WAAU;;8CAC1B,8OAAC;oCAAE,WAAU;8CAAkC,IAAI,IAAI;;;;;;8CACvD,8OAAC;oCAAE,WAAU;;wCAA0B,IAAI,IAAI;wCAAC;wCAAI,CAAA,GAAA,0HAAA,CAAA,iBAAc,AAAD,EAAE,IAAI,UAAU;;;;;;;gCAChF,IAAI,IAAI,kBACP,8OAAC;oCACC,MAAM,IAAI,IAAI;oCACd,WAAU;8CACX;;;;;;;2BAPK,IAAI,EAAE;;;;;oBAajB,KAAK,MAAM,KAAK,mBACf,8OAAC;wBAAI,WAAU;kCAA8F;;;;;;;;;;;;;;;;;;AAOvH","debugId":null}},
    {"offset": {"line": 908, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/bridge/lenses/PeopleLens.tsx"],"sourcesContent":["\"use client\";\n\nimport { PersonSummary } from \"@/lib/graph/types\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\n\nconst channelMap: Record<string, string> = {\n  sms: \"SMS\",\n  email: \"Email\",\n  phone: \"Phone\",\n  portal: \"Portal\",\n  push: \"Push\",\n  whatsapp: \"WhatsApp\",\n};\n\ntype Props = {\n  people: PersonSummary[];\n  onNudge?: (person: PersonSummary) => void;\n};\n\nexport function PeopleLens({ people, onNudge }: Props) {\n  return (\n    <div className=\"space-y-3\">\n      {people.map(person => (\n        <div key={person.id} className=\"rounded-2xl border border-slate-800/80 bg-slate-900/40 p-4\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm font-semibold text-white\">{person.name}</p>\n              <p className=\"text-xs text-slate-400\">{person.role}</p>\n            </div>\n            <div className=\"flex flex-wrap justify-end gap-2\">\n              {person.reachableVia.map(channel => (\n                <Badge key={channel} variant=\"outline\" className=\"border-slate-700 text-xs text-slate-200\">\n                  {channelMap[channel] ?? channel}\n                </Badge>\n              ))}\n            </div>\n          </div>\n          <div className=\"mt-3 flex items-center justify-between\">\n            <p className=\"text-xs text-slate-400\">\n              Preferred: {channelMap[person.preferredChannel ?? \"\"] ?? person.preferredChannel ?? \"—\"}\n            </p>\n            {onNudge && (\n              <Button\n                size=\"sm\"\n                variant=\"outline\"\n                className=\"border-cyan-500/40 text-xs text-cyan-200 hover:bg-cyan-500/10\"\n                onClick={() => onNudge(person)}\n              >\n                Nudge\n              </Button>\n            )}\n          </div>\n        </div>\n      ))}\n      {people.length === 0 && (\n        <div className=\"rounded-2xl border border-dashed border-slate-800/80 p-6 text-center text-sm text-slate-400\">\n          No linked people.\n        </div>\n      )}\n    </div>\n  );\n}\n\n"],"names":[],"mappings":";;;;AAGA;AACA;AAJA;;;;AAMA,MAAM,aAAqC;IACzC,KAAK;IACL,OAAO;IACP,OAAO;IACP,QAAQ;IACR,MAAM;IACN,UAAU;AACZ;AAOO,SAAS,WAAW,EAAE,MAAM,EAAE,OAAO,EAAS;IACnD,qBACE,8OAAC;QAAI,WAAU;;YACZ,OAAO,GAAG,CAAC,CAAA,uBACV,8OAAC;oBAAoB,WAAU;;sCAC7B,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;;sDACC,8OAAC;4CAAE,WAAU;sDAAoC,OAAO,IAAI;;;;;;sDAC5D,8OAAC;4CAAE,WAAU;sDAA0B,OAAO,IAAI;;;;;;;;;;;;8CAEpD,8OAAC;oCAAI,WAAU;8CACZ,OAAO,YAAY,CAAC,GAAG,CAAC,CAAA,wBACvB,8OAAC,iIAAA,CAAA,QAAK;4CAAe,SAAQ;4CAAU,WAAU;sDAC9C,UAAU,CAAC,QAAQ,IAAI;2CADd;;;;;;;;;;;;;;;;sCAMlB,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAE,WAAU;;wCAAyB;wCACxB,UAAU,CAAC,OAAO,gBAAgB,IAAI,GAAG,IAAI,OAAO,gBAAgB,IAAI;;;;;;;gCAErF,yBACC,8OAAC,kIAAA,CAAA,SAAM;oCACL,MAAK;oCACL,SAAQ;oCACR,WAAU;oCACV,SAAS,IAAM,QAAQ;8CACxB;;;;;;;;;;;;;mBAxBG,OAAO,EAAE;;;;;YA+BpB,OAAO,MAAM,KAAK,mBACjB,8OAAC;gBAAI,WAAU;0BAA8F;;;;;;;;;;;;AAMrH","debugId":null}},
    {"offset": {"line": 1040, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/bridge/lenses/RulesLens.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { RuleSummary } from \"@/lib/graph/types\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\n\ntype Props = {\n  rules: RuleSummary[];\n};\n\nexport function RulesLens({ rules }: Props) {\n  const [testing, setTesting] = useState<string | null>(null);\n\n  return (\n    <div className=\"space-y-3\">\n      {rules.map(rule => (\n        <div key={rule.id} className=\"rounded-2xl border border-slate-800/80 bg-slate-900/40 p-4\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm font-semibold text-white\">{rule.name}</p>\n              <p className=\"text-xs text-slate-400\">{rule.description}</p>\n            </div>\n            <Badge\n              className={\n                rule.status === \"enabled\"\n                  ? \"bg-emerald-500/20 text-emerald-200\"\n                  : \"bg-slate-800 text-slate-300\"\n              }\n            >\n              {rule.status}\n            </Badge>\n          </div>\n          <div className=\"mt-3 flex items-center justify-between text-xs text-slate-400\">\n            <p>Last run {rule.lastRunAt ? new Date(rule.lastRunAt).toLocaleString() : \"—\"}</p>\n            <p>{rule.hitCount} hits</p>\n          </div>\n          <div className=\"mt-3 flex gap-2\">\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              disabled={testing === rule.id}\n              className=\"border-cyan-500/40 text-xs text-cyan-200 hover:bg-cyan-500/10\"\n              onClick={async () => {\n                setTesting(rule.id);\n                await new Promise(resolve => setTimeout(resolve, 600));\n                setTesting(null);\n              }}\n            >\n              {testing === rule.id ? \"Testing…\" : \"Dry-run last 30d\"}\n            </Button>\n            <Button variant=\"ghost\" size=\"sm\" className=\"text-xs text-slate-300 hover:text-white\">\n              View logic\n            </Button>\n          </div>\n        </div>\n      ))}\n      {rules.length === 0 && (\n        <div className=\"rounded-2xl border border-dashed border-slate-800/80 p-6 text-center text-sm text-slate-400\">\n          No automations attached yet.\n        </div>\n      )}\n    </div>\n  );\n}\n\n"],"names":[],"mappings":";;;;AAEA;AAEA;AACA;AALA;;;;;AAWO,SAAS,UAAU,EAAE,KAAK,EAAS;IACxC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAEtD,qBACE,8OAAC;QAAI,WAAU;;YACZ,MAAM,GAAG,CAAC,CAAA,qBACT,8OAAC;oBAAkB,WAAU;;sCAC3B,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;;sDACC,8OAAC;4CAAE,WAAU;sDAAoC,KAAK,IAAI;;;;;;sDAC1D,8OAAC;4CAAE,WAAU;sDAA0B,KAAK,WAAW;;;;;;;;;;;;8CAEzD,8OAAC,iIAAA,CAAA,QAAK;oCACJ,WACE,KAAK,MAAM,KAAK,YACZ,uCACA;8CAGL,KAAK,MAAM;;;;;;;;;;;;sCAGhB,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;;wCAAE;wCAAU,KAAK,SAAS,GAAG,IAAI,KAAK,KAAK,SAAS,EAAE,cAAc,KAAK;;;;;;;8CAC1E,8OAAC;;wCAAG,KAAK,QAAQ;wCAAC;;;;;;;;;;;;;sCAEpB,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,kIAAA,CAAA,SAAM;oCACL,SAAQ;oCACR,MAAK;oCACL,UAAU,YAAY,KAAK,EAAE;oCAC7B,WAAU;oCACV,SAAS;wCACP,WAAW,KAAK,EAAE;wCAClB,MAAM,IAAI,QAAQ,CAAA,UAAW,WAAW,SAAS;wCACjD,WAAW;oCACb;8CAEC,YAAY,KAAK,EAAE,GAAG,aAAa;;;;;;8CAEtC,8OAAC,kIAAA,CAAA,SAAM;oCAAC,SAAQ;oCAAQ,MAAK;oCAAK,WAAU;8CAA0C;;;;;;;;;;;;;mBAlChF,KAAK,EAAE;;;;;YAwClB,MAAM,MAAM,KAAK,mBAChB,8OAAC;gBAAI,WAAU;0BAA8F;;;;;;;;;;;;AAMrH","debugId":null}},
    {"offset": {"line": 1192, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/bridge/lenses/ScenariosLens.tsx"],"sourcesContent":["\"use client\";\n\nimport { ScenarioPreview } from \"@/lib/graph/types\";\nimport { Button } from \"@/components/ui/button\";\nimport { formatPercent } from \"@/lib/ui/format\";\n\ntype Props = {\n  scenarios: ScenarioPreview[];\n  onSelectScenario?: (scenario: ScenarioPreview) => void;\n};\n\nexport function ScenariosLens({ scenarios, onSelectScenario }: Props) {\n  return (\n    <div className=\"space-y-3\">\n      {scenarios.map(scenario => (\n        <div key={scenario.id} className=\"rounded-2xl border border-slate-800/80 bg-slate-900/40 p-4\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm font-semibold text-white\">{scenario.title}</p>\n              <p className=\"text-xs text-slate-400\">{scenario.description}</p>\n            </div>\n            <Button\n              size=\"sm\"\n              variant=\"outline\"\n              className=\"border-emerald-500/40 text-xs text-emerald-200 hover:bg-emerald-500/10\"\n              onClick={() => onSelectScenario?.(scenario)}\n            >\n              Simulate\n            </Button>\n          </div>\n          <div className=\"mt-3 flex flex-wrap gap-2 text-xs text-slate-300\">\n            {scenario.runwayDelta !== undefined && (\n              <span className=\"rounded-full bg-cyan-500/10 px-3 py-1 text-cyan-200\">\n                Runway {scenario.runwayDelta > 0 ? \"+\" : \"\"}\n                {scenario.runwayDelta}d\n              </span>\n            )}\n            {scenario.burnDelta !== undefined && (\n              <span className=\"rounded-full bg-amber-500/10 px-3 py-1 text-amber-200\">\n                Burn {scenario.burnDelta > 0 ? \"+\" : \"\"}\n                {formatPercent(scenario.burnDelta)}\n              </span>\n            )}\n            {scenario.goalEtaDeltaDays !== undefined && (\n              <span className=\"rounded-full bg-indigo-500/10 px-3 py-1 text-indigo-200\">\n                Goal ETA {scenario.goalEtaDeltaDays}\n              </span>\n            )}\n          </div>\n        </div>\n      ))}\n      {scenarios.length === 0 && (\n        <div className=\"rounded-2xl border border-dashed border-slate-800/80 p-6 text-center text-sm text-slate-400\">\n          No scenarios available.\n        </div>\n      )}\n    </div>\n  );\n}\n\n"],"names":[],"mappings":";;;;AAGA;AACA;AAJA;;;;AAWO,SAAS,cAAc,EAAE,SAAS,EAAE,gBAAgB,EAAS;IAClE,qBACE,8OAAC;QAAI,WAAU;;YACZ,UAAU,GAAG,CAAC,CAAA,yBACb,8OAAC;oBAAsB,WAAU;;sCAC/B,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;;sDACC,8OAAC;4CAAE,WAAU;sDAAoC,SAAS,KAAK;;;;;;sDAC/D,8OAAC;4CAAE,WAAU;sDAA0B,SAAS,WAAW;;;;;;;;;;;;8CAE7D,8OAAC,kIAAA,CAAA,SAAM;oCACL,MAAK;oCACL,SAAQ;oCACR,WAAU;oCACV,SAAS,IAAM,mBAAmB;8CACnC;;;;;;;;;;;;sCAIH,8OAAC;4BAAI,WAAU;;gCACZ,SAAS,WAAW,KAAK,2BACxB,8OAAC;oCAAK,WAAU;;wCAAsD;wCAC5D,SAAS,WAAW,GAAG,IAAI,MAAM;wCACxC,SAAS,WAAW;wCAAC;;;;;;;gCAGzB,SAAS,SAAS,KAAK,2BACtB,8OAAC;oCAAK,WAAU;;wCAAwD;wCAChE,SAAS,SAAS,GAAG,IAAI,MAAM;wCACpC,CAAA,GAAA,0HAAA,CAAA,gBAAa,AAAD,EAAE,SAAS,SAAS;;;;;;;gCAGpC,SAAS,gBAAgB,KAAK,2BAC7B,8OAAC;oCAAK,WAAU;;wCAA0D;wCAC9D,SAAS,gBAAgB;;;;;;;;;;;;;;mBA9BjC,SAAS,EAAE;;;;;YAoCtB,UAAU,MAAM,KAAK,mBACpB,8OAAC;gBAAI,WAAU;0BAA8F;;;;;;;;;;;;AAMrH","debugId":null}},
    {"offset": {"line": 1325, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/popover.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n"],"names":[],"mappings":";;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,UAAU,mKAAA,CAAA,OAAqB;AAErC,MAAM,iBAAiB,mKAAA,CAAA,UAAwB;AAE/C,MAAM,+BAAiB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,QAAQ,EAAE,aAAa,CAAC,EAAE,GAAG,OAAO,EAAE,oBAC5D,8OAAC,mKAAA,CAAA,SAAuB;kBACtB,cAAA,8OAAC,mKAAA,CAAA,UAAwB;YACvB,KAAK;YACL,OAAO;YACP,YAAY;YACZ,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,8aACA;YAED,GAAG,KAAK;;;;;;;;;;;AAIf,eAAe,WAAW,GAAG,mKAAA,CAAA,UAAwB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 1366, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/bridge/ExplainPopover.tsx"],"sourcesContent":["\"use client\";\n\nimport { Info } from \"lucide-react\";\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\n\ntype Props = {\n  lines: string[];\n};\n\nexport function ExplainPopover({ lines }: Props) {\n  if (!lines.length) return null;\n  return (\n    <Popover>\n      <PopoverTrigger className=\"flex items-center gap-1 text-xs text-cyan-200 hover:text-cyan-100\">\n        <Info className=\"h-3.5 w-3.5\" /> Why?\n      </PopoverTrigger>\n      <PopoverContent className=\"w-72 border-slate-800 bg-slate-900 text-slate-100\">\n        <ul className=\"list-disc space-y-2 pl-4 text-sm\">\n          {lines.map((line, index) => (\n            <li key={index}>{line}</li>\n          ))}\n        </ul>\n      </PopoverContent>\n    </Popover>\n  );\n}\n\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AASO,SAAS,eAAe,EAAE,KAAK,EAAS;IAC7C,IAAI,CAAC,MAAM,MAAM,EAAE,OAAO;IAC1B,qBACE,8OAAC,mIAAA,CAAA,UAAO;;0BACN,8OAAC,mIAAA,CAAA,iBAAc;gBAAC,WAAU;;kCACxB,8OAAC,kMAAA,CAAA,OAAI;wBAAC,WAAU;;;;;;oBAAgB;;;;;;;0BAElC,8OAAC,mIAAA,CAAA,iBAAc;gBAAC,WAAU;0BACxB,cAAA,8OAAC;oBAAG,WAAU;8BACX,MAAM,GAAG,CAAC,CAAC,MAAM,sBAChB,8OAAC;sCAAgB;2BAAR;;;;;;;;;;;;;;;;;;;;;AAMrB","debugId":null}},
    {"offset": {"line": 1431, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/bridge/OperationalCanvas.tsx"],"sourcesContent":["\"use client\";\n\nimport { useMemo, useState } from \"react\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { QueueItem, CanvasContext } from \"@/lib/graph/types\";\nimport { TimelineLens } from \"./lenses/TimelineLens\";\nimport { CashflowLens } from \"./lenses/CashflowLens\";\nimport { DocsLens } from \"./lenses/DocsLens\";\nimport { PeopleLens } from \"./lenses/PeopleLens\";\nimport { RulesLens } from \"./lenses/RulesLens\";\nimport { ScenariosLens } from \"./lenses/ScenariosLens\";\nimport { ExplainPopover } from \"./ExplainPopover\";\nimport { Badge } from \"@/components/ui/badge\";\n\nconst lensOrder = [\"timeline\", \"cashflow\", \"docs\", \"people\", \"rules\", \"scenarios\"] as const;\n\ntype Props = {\n  item?: QueueItem | null;\n  context?: CanvasContext | null;\n  onSimulate?: (scenarioId: string) => void;\n  onNudgePerson?: (personId: string) => void;\n};\n\nexport function OperationalCanvas({ item, context, onSimulate, onNudgePerson }: Props) {\n  const [lens, setLens] = useState<(typeof lensOrder)[number]>(\"timeline\");\n\n  const lenses = useMemo(() => {\n    if (!context) return [];\n    return [\n      {\n        key: \"timeline\" as const,\n        label: \"Timeline\",\n        content: <TimelineLens entries={context.timeline} />,\n      },\n      {\n        key: \"cashflow\" as const,\n        label: \"Cashflow\",\n        content: (\n          <CashflowLens\n            variance={context.cashflow.variance}\n            burnRate={context.cashflow.burnRate}\n            transactions={context.cashflow.transactions}\n          />\n        ),\n      },\n      {\n        key: \"docs\" as const,\n        label: \"Docs\",\n        content: <DocsLens docs={context.docs} />,\n      },\n      {\n        key: \"people\" as const,\n        label: \"People\",\n        content: <PeopleLens people={context.people} onNudge={person => onNudgePerson?.(person.id)} />,\n      },\n      {\n        key: \"rules\" as const,\n        label: \"Rules\",\n        content: <RulesLens rules={context.rules} />,\n      },\n      {\n        key: \"scenarios\" as const,\n        label: \"Scenarios\",\n        content: <ScenariosLens scenarios={context.scenarios} onSelectScenario={scenario => onSimulate?.(scenario.id)} />,\n      },\n    ];\n  }, [context, onNudgePerson, onSimulate]);\n\n  if (!item || !context) {\n    return (\n      <div className=\"flex h-full flex-col items-center justify-center rounded-3xl border border-dashed border-slate-800/70 bg-slate-950/60 text-center text-sm text-slate-400\">\n        Pick an attention item to activate the command bridge.\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"relative h-full rounded-3xl border border-slate-900/70 bg-slate-950/80 p-6 shadow-2xl\">\n      <div className=\"flex flex-wrap items-center justify-between gap-3\">\n        <div>\n          <p className=\"text-xs uppercase tracking-[0.3em] text-slate-500\">Operational Canvas</p>\n          <h2 className=\"mt-2 text-2xl font-semibold text-white\">{context.summary.title}</h2>\n          <p className=\"text-sm text-slate-300\">{context.summary.subtitle}</p>\n          <div className=\"mt-3 flex flex-wrap gap-2\">\n            {context.summary.impact?.runwayDays !== undefined && (\n              <Badge className=\"rounded-full bg-cyan-500/20 text-cyan-200\">\n                Runway {context.summary.impact.runwayDays}\n              </Badge>\n            )}\n            {context.summary.impact?.goalEtaDeltaDays !== undefined && (\n              <Badge className=\"rounded-full bg-indigo-500/20 text-indigo-200\">\n                ETA {context.summary.impact.goalEtaDeltaDays}\n              </Badge>\n            )}\n          </div>\n        </div>\n        <ExplainPopover lines={context.explain} />\n      </div>\n\n      <Tabs value={lens} onValueChange={value => setLens(value as (typeof lensOrder)[number])} className=\"mt-6\">\n        <TabsList className=\"flex flex-wrap gap-2 bg-slate-900/60 p-1\">\n          {lenses.map(entry => (\n            <TabsTrigger key={entry.key} value={entry.key} className=\"rounded-full\">\n              {entry.label}\n            </TabsTrigger>\n          ))}\n        </TabsList>\n        {lenses.map(entry => (\n          <TabsContent key={entry.key} value={entry.key} className=\"mt-4\">\n            {entry.content}\n          </TabsContent>\n        ))}\n      </Tabs>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1687, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/bridge/TelemetryRail.tsx"],"sourcesContent":["\"use client\";\n\nimport { Overview } from \"@/lib/graph/types\";\nimport { formatCurrency, formatPercent } from \"@/lib/ui/format\";\nimport { cn } from \"@/lib/utils\";\n\ntype Props = {\n  overview?: Overview;\n  mode: \"monitor\" | \"focus\";\n  onMetricSelect?: (metric: string) => void;\n};\n\nconst metrics = (\n  overview: Overview\n): Array<{ key: string; label: string; value: string; sub?: string; accent: string }> => [\n  {\n    key: \"netWorth\",\n    label: \"Net worth\",\n    value: formatCurrency(overview.netWorth),\n    accent: \"text-cyan-200\",\n  },\n  {\n    key: \"runway\",\n    label: \"Runway\",\n    value: `${overview.cashOnHand.runwayDays} days`,\n    sub: formatCurrency(overview.cashOnHand.amount),\n    accent: \"text-emerald-200\",\n  },\n  {\n    key: \"burn\",\n    label: \"Burn vs target\",\n    value: formatCurrency(overview.monthlyBurn.actual),\n    sub: `Target ${formatCurrency(overview.monthlyBurn.target)}`,\n    accent: \"text-amber-200\",\n  },\n  {\n    key: \"adherence\",\n    label: \"Adherence\",\n    value: formatPercent(overview.adherence.percent30d),\n    sub: `${overview.adherence.onHandDays ?? 0} days on hand`,\n    accent: \"text-emerald-200\",\n  },\n  {\n    key: \"goals\",\n    label: \"Top goal\",\n    value: `${overview.goals.top[0]?.percent ?? 0}% complete`,\n    sub: overview.goals.top[0]?.name ?? \"—\",\n    accent: \"text-indigo-200\",\n  },\n  {\n    key: \"pulse\",\n    label: \"Pulse value\",\n    value: overview.pulse.bestValueScore.toFixed(1),\n    sub: `${overview.pulse.games} plays`,\n    accent: \"text-pink-200\",\n  },\n];\n\nexport function TelemetryRail({ overview, mode, onMetricSelect }: Props) {\n  if (!overview) {\n    return (\n      <aside className=\"hidden h-full rounded-3xl border border-slate-900/70 bg-slate-950/70 p-4 text-xs text-slate-400 xl:flex xl:flex-col xl:gap-3\">\n        Loading…\n      </aside>\n    );\n  }\n\n  return (\n    <aside className=\"hidden h-full rounded-3xl border border-slate-900/70 bg-slate-950/70 p-4 text-xs xl:flex xl:flex-col xl:gap-3\">\n      <p className=\"text-[10px] uppercase tracking-[0.3em] text-slate-500\">Telemetry</p>\n      <div className=\"flex flex-1 flex-col gap-3\">\n        {metrics(overview).map(metric => (\n          <button\n            key={metric.key}\n            onClick={() => onMetricSelect?.(metric.key)}\n            className={cn(\n              \"rounded-2xl border border-slate-900/80 bg-slate-900/50 p-3 text-left transition hover:border-cyan-500/40\",\n              mode === \"monitor\" ? \"opacity-100\" : \"opacity-80\"\n            )}\n          >\n            <p className=\"text-[11px] uppercase tracking-[0.2em] text-slate-400\">{metric.label}</p>\n            <p className={cn(\"mt-1 text-lg font-semibold\", metric.accent)}>{metric.value}</p>\n            {metric.sub && <p className=\"text-[11px] text-slate-400\">{metric.sub}</p>}\n          </button>\n        ))}\n      </div>\n    </aside>\n  );\n}\n\n"],"names":[],"mappings":";;;;AAGA;AACA;AAJA;;;;AAYA,MAAM,UAAU,CACd,WACuF;QACvF;YACE,KAAK;YACL,OAAO;YACP,OAAO,CAAA,GAAA,0HAAA,CAAA,iBAAc,AAAD,EAAE,SAAS,QAAQ;YACvC,QAAQ;QACV;QACA;YACE,KAAK;YACL,OAAO;YACP,OAAO,GAAG,SAAS,UAAU,CAAC,UAAU,CAAC,KAAK,CAAC;YAC/C,KAAK,CAAA,GAAA,0HAAA,CAAA,iBAAc,AAAD,EAAE,SAAS,UAAU,CAAC,MAAM;YAC9C,QAAQ;QACV;QACA;YACE,KAAK;YACL,OAAO;YACP,OAAO,CAAA,GAAA,0HAAA,CAAA,iBAAc,AAAD,EAAE,SAAS,WAAW,CAAC,MAAM;YACjD,KAAK,CAAC,OAAO,EAAE,CAAA,GAAA,0HAAA,CAAA,iBAAc,AAAD,EAAE,SAAS,WAAW,CAAC,MAAM,GAAG;YAC5D,QAAQ;QACV;QACA;YACE,KAAK;YACL,OAAO;YACP,OAAO,CAAA,GAAA,0HAAA,CAAA,gBAAa,AAAD,EAAE,SAAS,SAAS,CAAC,UAAU;YAClD,KAAK,GAAG,SAAS,SAAS,CAAC,UAAU,IAAI,EAAE,aAAa,CAAC;YACzD,QAAQ;QACV;QACA;YACE,KAAK;YACL,OAAO;YACP,OAAO,GAAG,SAAS,KAAK,CAAC,GAAG,CAAC,EAAE,EAAE,WAAW,EAAE,UAAU,CAAC;YACzD,KAAK,SAAS,KAAK,CAAC,GAAG,CAAC,EAAE,EAAE,QAAQ;YACpC,QAAQ;QACV;QACA;YACE,KAAK;YACL,OAAO;YACP,OAAO,SAAS,KAAK,CAAC,cAAc,CAAC,OAAO,CAAC;YAC7C,KAAK,GAAG,SAAS,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC;YACpC,QAAQ;QACV;KACD;AAEM,SAAS,cAAc,EAAE,QAAQ,EAAE,IAAI,EAAE,cAAc,EAAS;IACrE,IAAI,CAAC,UAAU;QACb,qBACE,8OAAC;YAAM,WAAU;sBAA+H;;;;;;IAIpJ;IAEA,qBACE,8OAAC;QAAM,WAAU;;0BACf,8OAAC;gBAAE,WAAU;0BAAwD;;;;;;0BACrE,8OAAC;gBAAI,WAAU;0BACZ,QAAQ,UAAU,GAAG,CAAC,CAAA,uBACrB,8OAAC;wBAEC,SAAS,IAAM,iBAAiB,OAAO,GAAG;wBAC1C,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,4GACA,SAAS,YAAY,gBAAgB;;0CAGvC,8OAAC;gCAAE,WAAU;0CAAyD,OAAO,KAAK;;;;;;0CAClF,8OAAC;gCAAE,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B,OAAO,MAAM;0CAAI,OAAO,KAAK;;;;;;4BAC3E,OAAO,GAAG,kBAAI,8OAAC;gCAAE,WAAU;0CAA8B,OAAO,GAAG;;;;;;;uBAT/D,OAAO,GAAG;;;;;;;;;;;;;;;;AAe3B","debugId":null}},
    {"offset": {"line": 1816, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/hooks/useImpactGuard.ts"],"sourcesContent":["\"use client\";\n\nimport { useCallback } from \"react\";\nimport { useQueryClient } from \"@tanstack/react-query\";\nimport { ImpactPlan, Command } from \"../graph/types\";\n\nexport type ImpactPreviewRequest = {\n  intent: string;\n  entityId?: string;\n  patch?: Record<string, unknown>;\n};\n\nexport function useImpactGuard() {\n  const queryClient = useQueryClient();\n\n  const preview = useCallback(async (request: ImpactPreviewRequest) => {\n    const response = await fetch(\"/api/impact/preview\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(request),\n    });\n\n    if (!response.ok) {\n      throw new Error(\"Failed to generate impact preview\");\n    }\n\n    const payload = (await response.json()) as { plan: ImpactPlan };\n    return payload.plan;\n  }, []);\n\n  const commit = useCallback(\n    async (command: Command) => {\n      const response = await fetch(\"/api/commands\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(command),\n      });\n\n      if (!response.ok) {\n        const text = await response.text();\n        throw new Error(text || \"Command failed\");\n      }\n\n      const payload = await response.json();\n      queryClient.invalidateQueries({ queryKey: [\"bridge\", \"overview\"] });\n      queryClient.invalidateQueries({ queryKey: [\"bridge\", \"queue\"] });\n      return payload;\n    },\n    [queryClient]\n  );\n\n  return { preview, commit };\n}\n\n"],"names":[],"mappings":";;;AAEA;AACA;AAHA;;;AAYO,SAAS;IACd,MAAM,cAAc,CAAA,GAAA,sLAAA,CAAA,iBAAc,AAAD;IAEjC,MAAM,UAAU,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE,OAAO;QACjC,MAAM,WAAW,MAAM,MAAM,uBAAuB;YAClD,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;QACvB;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,IAAI,MAAM;QAClB;QAEA,MAAM,UAAW,MAAM,SAAS,IAAI;QACpC,OAAO,QAAQ,IAAI;IACrB,GAAG,EAAE;IAEL,MAAM,SAAS,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EACvB,OAAO;QACL,MAAM,WAAW,MAAM,MAAM,iBAAiB;YAC5C,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;QACvB;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,MAAM,IAAI,MAAM,QAAQ;QAC1B;QAEA,MAAM,UAAU,MAAM,SAAS,IAAI;QACnC,YAAY,iBAAiB,CAAC;YAAE,UAAU;gBAAC;gBAAU;aAAW;QAAC;QACjE,YAAY,iBAAiB,CAAC;YAAE,UAAU;gBAAC;gBAAU;aAAQ;QAAC;QAC9D,OAAO;IACT,GACA;QAAC;KAAY;IAGf,OAAO;QAAE;QAAS;IAAO;AAC3B","debugId":null}},
    {"offset": {"line": 1880, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/hooks/useOmniBox.ts"],"sourcesContent":["\"use client\";\n\nimport { useCallback } from \"react\";\nimport { useImpactGuard } from \"./useImpactGuard\";\nimport { Command } from \"../graph/types\";\n\nexport type OmniResult = {\n  status: \"queued\" | \"committed\" | \"unknown\";\n  message: string;\n};\n\nfunction parseInput(input: string): Command | null {\n  const trimmed = input.trim();\n  if (!trimmed) return null;\n\n  const idempotencyKey = crypto.randomUUID();\n\n  if (trimmed.startsWith(\"/receipt\")) {\n    return {\n      type: \"doc.link\",\n      payload: {\n        docId: `doc-${Date.now()}`,\n        entityId: \"bill-electric\",\n        entityType: \"bill\",\n      },\n      idempotencyKey,\n    };\n  }\n\n  if (trimmed.startsWith(\"/nudge\")) {\n    const [, ...rest] = trimmed.split(\" \");\n    return {\n      type: \"rule.create\",\n      payload: {\n        audience: rest.join(\" \") || \"Household\",\n        message: \"Manual nudge from omnibox\",\n      },\n      idempotencyKey,\n    };\n  }\n\n  if (trimmed.startsWith(\"/txn\")) {\n    return {\n      type: \"txn.reclassify.bulk\",\n      payload: {\n        txIds: [\"txn-latest\"],\n        category: \"Operations\",\n      },\n      idempotencyKey,\n    };\n  }\n\n  return {\n    type: \"event.create\",\n    payload: {\n      title: trimmed,\n      startsAt: new Date().toISOString(),\n    },\n    idempotencyKey,\n  };\n}\n\nexport function useOmniBox() {\n  const { commit } = useImpactGuard();\n\n  const submit = useCallback(\n    async (value: string): Promise<OmniResult> => {\n      const command = parseInput(value);\n      if (!command) {\n        return { status: \"unknown\", message: \"No command detected\" };\n      }\n\n      await commit(command);\n      return { status: \"committed\", message: \"Command routed\" };\n    },\n    [commit]\n  );\n\n  return { submit };\n}\n\n"],"names":[],"mappings":";;;AAEA;AACA;AAHA;;;AAWA,SAAS,WAAW,KAAa;IAC/B,MAAM,UAAU,MAAM,IAAI;IAC1B,IAAI,CAAC,SAAS,OAAO;IAErB,MAAM,iBAAiB,OAAO,UAAU;IAExC,IAAI,QAAQ,UAAU,CAAC,aAAa;QAClC,OAAO;YACL,MAAM;YACN,SAAS;gBACP,OAAO,CAAC,IAAI,EAAE,KAAK,GAAG,IAAI;gBAC1B,UAAU;gBACV,YAAY;YACd;YACA;QACF;IACF;IAEA,IAAI,QAAQ,UAAU,CAAC,WAAW;QAChC,MAAM,GAAG,GAAG,KAAK,GAAG,QAAQ,KAAK,CAAC;QAClC,OAAO;YACL,MAAM;YACN,SAAS;gBACP,UAAU,KAAK,IAAI,CAAC,QAAQ;gBAC5B,SAAS;YACX;YACA;QACF;IACF;IAEA,IAAI,QAAQ,UAAU,CAAC,SAAS;QAC9B,OAAO;YACL,MAAM;YACN,SAAS;gBACP,OAAO;oBAAC;iBAAa;gBACrB,UAAU;YACZ;YACA;QACF;IACF;IAEA,OAAO;QACL,MAAM;QACN,SAAS;YACP,OAAO;YACP,UAAU,IAAI,OAAO,WAAW;QAClC;QACA;IACF;AACF;AAEO,SAAS;IACd,MAAM,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,qIAAA,CAAA,iBAAc,AAAD;IAEhC,MAAM,SAAS,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EACvB,OAAO;QACL,MAAM,UAAU,WAAW;QAC3B,IAAI,CAAC,SAAS;YACZ,OAAO;gBAAE,QAAQ;gBAAW,SAAS;YAAsB;QAC7D;QAEA,MAAM,OAAO;QACb,OAAO;YAAE,QAAQ;YAAa,SAAS;QAAiB;IAC1D,GACA;QAAC;KAAO;IAGV,OAAO;QAAE;IAAO;AAClB","debugId":null}},
    {"offset": {"line": 1963, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/bridge/OmniBox.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { Search } from \"lucide-react\";\nimport { Input } from \"@/components/ui/input\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useOmniBox } from \"@/lib/hooks/useOmniBox\";\n\nexport function OmniBox() {\n  const [value, setValue] = useState(\"\");\n  const [submitting, setSubmitting] = useState(false);\n  const { submit } = useOmniBox();\n  const { toast } = useToast();\n\n  const handleSubmit = async (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    if (!value.trim()) return;\n    try {\n      setSubmitting(true);\n      const result = await submit(value);\n      toast({ description: result.message });\n      setValue(\"\");\n    } catch (error) {\n      console.error(error);\n      toast({ description: \"Command failed\", variant: \"destructive\" });\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  return (\n    <form\n      onSubmit={handleSubmit}\n      className=\"relative flex items-center rounded-full border border-slate-800 bg-slate-950/80 px-5 py-3 text-sm text-slate-200\"\n    >\n      <Search className=\"mr-3 h-4 w-4 text-cyan-300\" />\n      <Input\n        value={value}\n        onChange={event => setValue(event.target.value)}\n        disabled={submitting}\n        className=\"h-8 flex-1 border-none bg-transparent text-sm text-white placeholder:text-slate-500 focus-visible:ring-0\"\n        placeholder=\"Quick capture: /receipt, /txn, /nudge Marcus rent, paste screenshot…\"\n      />\n    </form>\n  );\n}\n\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AANA;;;;;;;AAQO,SAAS;IACd,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC7C,MAAM,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,iIAAA,CAAA,aAAU,AAAD;IAC5B,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,4HAAA,CAAA,WAAQ,AAAD;IAEzB,MAAM,eAAe,OAAO;QAC1B,MAAM,cAAc;QACpB,IAAI,CAAC,MAAM,IAAI,IAAI;QACnB,IAAI;YACF,cAAc;YACd,MAAM,SAAS,MAAM,OAAO;YAC5B,MAAM;gBAAE,aAAa,OAAO,OAAO;YAAC;YACpC,SAAS;QACX,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC;YACd,MAAM;gBAAE,aAAa;gBAAkB,SAAS;YAAc;QAChE,SAAU;YACR,cAAc;QAChB;IACF;IAEA,qBACE,8OAAC;QACC,UAAU;QACV,WAAU;;0BAEV,8OAAC,sMAAA,CAAA,SAAM;gBAAC,WAAU;;;;;;0BAClB,8OAAC,iIAAA,CAAA,QAAK;gBACJ,OAAO;gBACP,UAAU,CAAA,QAAS,SAAS,MAAM,MAAM,CAAC,KAAK;gBAC9C,UAAU;gBACV,WAAU;gBACV,aAAY;;;;;;;;;;;;AAIpB","debugId":null}},
    {"offset": {"line": 2039, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG1B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,4DACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,sDACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 2120, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/bridge/KPITiles.tsx"],"sourcesContent":["\"use client\";\n\nimport { Overview } from \"@/lib/graph/types\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { formatCurrency, formatPercent } from \"@/lib/ui/format\";\n\nconst metrics = [\n  \"netWorth\",\n  \"cashOnHand\",\n  \"monthlyBurn\",\n  \"savingsProgress\",\n  \"adherence\",\n  \"pulse\",\n] as const;\n\ntype Props = {\n  overview?: Overview;\n  onSelectMetric?: (metric: typeof metrics[number]) => void;\n};\n\nexport function KPITiles({ overview, onSelectMetric }: Props) {\n  if (!overview) {\n    return (\n      <div className=\"grid grid-cols-2 gap-3 lg:grid-cols-3 xl:grid-cols-6\">\n        {Array.from({ length: 6 }).map((_, index) => (\n          <Card key={index} className=\"rounded-3xl border border-slate-900/70 bg-slate-950/60\">\n            <CardContent className=\"animate-pulse p-6\">\n              <div className=\"h-3 w-16 rounded bg-slate-800\" />\n              <div className=\"mt-3 h-5 w-24 rounded bg-slate-800\" />\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"grid grid-cols-2 gap-3 lg:grid-cols-3 xl:grid-cols-6\">\n      <Card\n        className=\"cursor-pointer rounded-3xl border border-slate-900/70 bg-slate-950/70 hover:border-cyan-500/50\"\n        onClick={() => onSelectMetric?.(\"netWorth\")}\n      >\n        <CardContent className=\"p-5\">\n          <p className=\"text-xs uppercase tracking-[0.3em] text-slate-400\">Net worth</p>\n          <p className=\"mt-2 text-2xl font-semibold text-white\">{formatCurrency(overview.netWorth)}</p>\n        </CardContent>\n      </Card>\n      <Card\n        className=\"cursor-pointer rounded-3xl border border-slate-900/70 bg-slate-950/70 hover:border-cyan-500/50\"\n        onClick={() => onSelectMetric?.(\"cashOnHand\")}\n      >\n        <CardContent className=\"p-5\">\n          <p className=\"text-xs uppercase tracking-[0.3em] text-slate-400\">Cash runway</p>\n          <p className=\"mt-2 text-2xl font-semibold text-white\">{formatCurrency(overview.cashOnHand.amount)}</p>\n          <p className=\"text-xs text-slate-400\">{overview.cashOnHand.runwayDays} days runway</p>\n        </CardContent>\n      </Card>\n      <Card\n        className=\"cursor-pointer rounded-3xl border border-slate-900/70 bg-slate-950/70 hover:border-cyan-500/50\"\n        onClick={() => onSelectMetric?.(\"monthlyBurn\")}\n      >\n        <CardContent className=\"p-5\">\n          <p className=\"text-xs uppercase tracking-[0.3em] text-slate-400\">Monthly burn</p>\n          <p className=\"mt-2 text-2xl font-semibold text-white\">{formatCurrency(overview.monthlyBurn.actual)}</p>\n          <p className=\"text-xs text-slate-400\">Target {formatCurrency(overview.monthlyBurn.target)}</p>\n        </CardContent>\n      </Card>\n      <Card\n        className=\"cursor-pointer rounded-3xl border border-slate-900/70 bg-slate-950/70 hover:border-cyan-500/50\"\n        onClick={() => onSelectMetric?.(\"savingsProgress\")}\n      >\n        <CardContent className=\"p-5\">\n          <p className=\"text-xs uppercase tracking-[0.3em] text-slate-400\">Savings momentum</p>\n          <p className=\"mt-2 text-2xl font-semibold text-white\">{formatPercent(overview.savingsProgress.percent)}</p>\n          <p className=\"text-xs text-emerald-300\">Δ {formatPercent(overview.savingsProgress.delta)}</p>\n        </CardContent>\n      </Card>\n      <Card\n        className=\"cursor-pointer rounded-3xl border border-slate-900/70 bg-slate-950/70 hover:border-cyan-500/50\"\n        onClick={() => onSelectMetric?.(\"adherence\")}\n      >\n        <CardContent className=\"p-5\">\n          <p className=\"text-xs uppercase tracking-[0.3em] text-slate-400\">Adherence</p>\n          <p className=\"mt-2 text-2xl font-semibold text-white\">{formatPercent(overview.adherence.percent30d)}</p>\n          <p className=\"text-xs text-slate-400\">On hand {overview.adherence.onHandDays ?? 0} days</p>\n        </CardContent>\n      </Card>\n      <Card\n        className=\"cursor-pointer rounded-3xl border border-slate-900/70 bg-slate-950/70 hover:border-cyan-500/50\"\n        onClick={() => onSelectMetric?.(\"pulse\")}\n      >\n        <CardContent className=\"p-5\">\n          <p className=\"text-xs uppercase tracking-[0.3em] text-slate-400\">Pulse plays</p>\n          <p className=\"mt-2 text-2xl font-semibold text-white\">{overview.pulse.games} games</p>\n          <p className=\"text-xs text-cyan-300\">Best score {overview.pulse.bestValueScore.toFixed(1)}</p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":";;;;AAGA;AACA;AAJA;;;;AAMA,MAAM,UAAU;IACd;IACA;IACA;IACA;IACA;IACA;CACD;AAOM,SAAS,SAAS,EAAE,QAAQ,EAAE,cAAc,EAAS;IAC1D,IAAI,CAAC,UAAU;QACb,qBACE,8OAAC;YAAI,WAAU;sBACZ,MAAM,IAAI,CAAC;gBAAE,QAAQ;YAAE,GAAG,GAAG,CAAC,CAAC,GAAG,sBACjC,8OAAC,gIAAA,CAAA,OAAI;oBAAa,WAAU;8BAC1B,cAAA,8OAAC,gIAAA,CAAA,cAAW;wBAAC,WAAU;;0CACrB,8OAAC;gCAAI,WAAU;;;;;;0CACf,8OAAC;gCAAI,WAAU;;;;;;;;;;;;mBAHR;;;;;;;;;;IASnB;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,gIAAA,CAAA,OAAI;gBACH,WAAU;gBACV,SAAS,IAAM,iBAAiB;0BAEhC,cAAA,8OAAC,gIAAA,CAAA,cAAW;oBAAC,WAAU;;sCACrB,8OAAC;4BAAE,WAAU;sCAAoD;;;;;;sCACjE,8OAAC;4BAAE,WAAU;sCAA0C,CAAA,GAAA,0HAAA,CAAA,iBAAc,AAAD,EAAE,SAAS,QAAQ;;;;;;;;;;;;;;;;;0BAG3F,8OAAC,gIAAA,CAAA,OAAI;gBACH,WAAU;gBACV,SAAS,IAAM,iBAAiB;0BAEhC,cAAA,8OAAC,gIAAA,CAAA,cAAW;oBAAC,WAAU;;sCACrB,8OAAC;4BAAE,WAAU;sCAAoD;;;;;;sCACjE,8OAAC;4BAAE,WAAU;sCAA0C,CAAA,GAAA,0HAAA,CAAA,iBAAc,AAAD,EAAE,SAAS,UAAU,CAAC,MAAM;;;;;;sCAChG,8OAAC;4BAAE,WAAU;;gCAA0B,SAAS,UAAU,CAAC,UAAU;gCAAC;;;;;;;;;;;;;;;;;;0BAG1E,8OAAC,gIAAA,CAAA,OAAI;gBACH,WAAU;gBACV,SAAS,IAAM,iBAAiB;0BAEhC,cAAA,8OAAC,gIAAA,CAAA,cAAW;oBAAC,WAAU;;sCACrB,8OAAC;4BAAE,WAAU;sCAAoD;;;;;;sCACjE,8OAAC;4BAAE,WAAU;sCAA0C,CAAA,GAAA,0HAAA,CAAA,iBAAc,AAAD,EAAE,SAAS,WAAW,CAAC,MAAM;;;;;;sCACjG,8OAAC;4BAAE,WAAU;;gCAAyB;gCAAQ,CAAA,GAAA,0HAAA,CAAA,iBAAc,AAAD,EAAE,SAAS,WAAW,CAAC,MAAM;;;;;;;;;;;;;;;;;;0BAG5F,8OAAC,gIAAA,CAAA,OAAI;gBACH,WAAU;gBACV,SAAS,IAAM,iBAAiB;0BAEhC,cAAA,8OAAC,gIAAA,CAAA,cAAW;oBAAC,WAAU;;sCACrB,8OAAC;4BAAE,WAAU;sCAAoD;;;;;;sCACjE,8OAAC;4BAAE,WAAU;sCAA0C,CAAA,GAAA,0HAAA,CAAA,gBAAa,AAAD,EAAE,SAAS,eAAe,CAAC,OAAO;;;;;;sCACrG,8OAAC;4BAAE,WAAU;;gCAA2B;gCAAG,CAAA,GAAA,0HAAA,CAAA,gBAAa,AAAD,EAAE,SAAS,eAAe,CAAC,KAAK;;;;;;;;;;;;;;;;;;0BAG3F,8OAAC,gIAAA,CAAA,OAAI;gBACH,WAAU;gBACV,SAAS,IAAM,iBAAiB;0BAEhC,cAAA,8OAAC,gIAAA,CAAA,cAAW;oBAAC,WAAU;;sCACrB,8OAAC;4BAAE,WAAU;sCAAoD;;;;;;sCACjE,8OAAC;4BAAE,WAAU;sCAA0C,CAAA,GAAA,0HAAA,CAAA,gBAAa,AAAD,EAAE,SAAS,SAAS,CAAC,UAAU;;;;;;sCAClG,8OAAC;4BAAE,WAAU;;gCAAyB;gCAAS,SAAS,SAAS,CAAC,UAAU,IAAI;gCAAE;;;;;;;;;;;;;;;;;;0BAGtF,8OAAC,gIAAA,CAAA,OAAI;gBACH,WAAU;gBACV,SAAS,IAAM,iBAAiB;0BAEhC,cAAA,8OAAC,gIAAA,CAAA,cAAW;oBAAC,WAAU;;sCACrB,8OAAC;4BAAE,WAAU;sCAAoD;;;;;;sCACjE,8OAAC;4BAAE,WAAU;;gCAA0C,SAAS,KAAK,CAAC,KAAK;gCAAC;;;;;;;sCAC5E,8OAAC;4BAAE,WAAU;;gCAAwB;gCAAY,SAAS,KAAK,CAAC,cAAc,CAAC,OAAO,CAAC;;;;;;;;;;;;;;;;;;;;;;;;AAKjG","debugId":null}},
    {"offset": {"line": 2453, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/progress.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,yBAAW,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG9B,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,OAAO,EAAE,oBACjC,8OAAC,oKAAA,CAAA,OAAsB;QACrB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,iEACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,oKAAA,CAAA,YAA2B;YAC1B,WAAU;YACV,OAAO;gBAAE,WAAW,CAAC,YAAY,EAAE,MAAM,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC;YAAC;;;;;;;;;;;AAIhE,SAAS,WAAW,GAAG,oKAAA,CAAA,OAAsB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 2492, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/bridge/OpsSprintBar.tsx"],"sourcesContent":["\"use client\";\n\nimport { Button } from \"@/components/ui/button\";\nimport { Progress } from \"@/components/ui/progress\";\n\nconst modes: Array<{ value: \"monitor\" | \"focus\"; label: string }> = [\n  { value: \"monitor\", label: \"Monitor\" },\n  { value: \"focus\", label: \"Focus\" },\n];\n\ntype Props = {\n  mode: \"monitor\" | \"focus\";\n  onModeChange: (mode: \"monitor\" | \"focus\") => void;\n  remainingSeconds?: number;\n  completed?: number;\n  total?: number;\n};\n\nexport function OpsSprintBar({ mode, onModeChange, remainingSeconds = 0, completed = 0, total = 5 }: Props) {\n  const minutes = Math.floor(remainingSeconds / 60);\n  const seconds = String(remainingSeconds % 60).padStart(2, \"0\");\n  const progress = total > 0 ? Math.min(100, Math.round((completed / total) * 100)) : 0;\n\n  return (\n    <div className=\"flex flex-col gap-3 rounded-3xl border border-slate-900/70 bg-slate-950/80 p-4 shadow-lg lg:flex-row lg:items-center lg:justify-between\">\n      <div className=\"flex items-center gap-2\">\n        {modes.map(option => (\n          <Button\n            key={option.value}\n            size=\"sm\"\n            variant={mode === option.value ? \"default\" : \"outline\"}\n            className={\n              mode === option.value\n                ? \"rounded-full bg-cyan-500 text-slate-900 hover:bg-cyan-400\"\n                : \"rounded-full border-slate-700 text-slate-200\"\n            }\n            onClick={() => onModeChange(option.value)}\n          >\n            {option.label}\n          </Button>\n        ))}\n      </div>\n      {mode === \"focus\" && (\n        <div className=\"flex flex-1 flex-col gap-2 lg:max-w-md\">\n          <div className=\"flex items-center justify-between text-xs text-slate-300\">\n            <span>Ops sprint</span>\n            <span>\n              {minutes}:{seconds} · {completed}/{total} items\n            </span>\n          </div>\n          <Progress value={progress} className=\"h-2 bg-slate-800\" />\n        </div>\n      )}\n    </div>\n  );\n}\n\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AAKA,MAAM,QAA8D;IAClE;QAAE,OAAO;QAAW,OAAO;IAAU;IACrC;QAAE,OAAO;QAAS,OAAO;IAAQ;CAClC;AAUM,SAAS,aAAa,EAAE,IAAI,EAAE,YAAY,EAAE,mBAAmB,CAAC,EAAE,YAAY,CAAC,EAAE,QAAQ,CAAC,EAAS;IACxG,MAAM,UAAU,KAAK,KAAK,CAAC,mBAAmB;IAC9C,MAAM,UAAU,OAAO,mBAAmB,IAAI,QAAQ,CAAC,GAAG;IAC1D,MAAM,WAAW,QAAQ,IAAI,KAAK,GAAG,CAAC,KAAK,KAAK,KAAK,CAAC,AAAC,YAAY,QAAS,QAAQ;IAEpF,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;0BACZ,MAAM,GAAG,CAAC,CAAA,uBACT,8OAAC,kIAAA,CAAA,SAAM;wBAEL,MAAK;wBACL,SAAS,SAAS,OAAO,KAAK,GAAG,YAAY;wBAC7C,WACE,SAAS,OAAO,KAAK,GACjB,8DACA;wBAEN,SAAS,IAAM,aAAa,OAAO,KAAK;kCAEvC,OAAO,KAAK;uBAVR,OAAO,KAAK;;;;;;;;;;YActB,SAAS,yBACR,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;0CAAK;;;;;;0CACN,8OAAC;;oCACE;oCAAQ;oCAAE;oCAAQ;oCAAI;oCAAU;oCAAE;oCAAM;;;;;;;;;;;;;kCAG7C,8OAAC,oIAAA,CAAA,WAAQ;wBAAC,OAAO;wBAAU,WAAU;;;;;;;;;;;;;;;;;;AAK/C","debugId":null}},
    {"offset": {"line": 2599, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/bridge/ImpactPanel.tsx"],"sourcesContent":["\"use client\";\n\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { ImpactPlan } from \"@/lib/graph/types\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { formatPercent } from \"@/lib/ui/format\";\n\ntype Props = {\n  plan: ImpactPlan | null;\n  actionLabel?: string;\n  onCommit?: () => void;\n  onCancel?: () => void;\n  committing?: boolean;\n};\n\nexport function ImpactPanel({ plan, actionLabel = \"Commit\", onCommit, onCancel, committing }: Props) {\n  return (\n    <AnimatePresence>\n      {plan && (\n        <motion.aside\n          key=\"impact-panel\"\n          initial={{ x: 80, opacity: 0 }}\n          animate={{ x: 0, opacity: 1 }}\n          exit={{ x: 80, opacity: 0 }}\n          transition={{ type: \"spring\", stiffness: 200, damping: 24 }}\n          className=\"absolute right-0 top-0 h-full w-72 rounded-3xl border border-cyan-500/40 bg-slate-950/90 p-4 shadow-2xl\"\n        >\n          <p className=\"text-xs uppercase tracking-[0.3em] text-cyan-300/80\">Impact Preview</p>\n          <h3 className=\"mt-2 text-lg font-semibold text-white\">Before you commit</h3>\n\n          <div className=\"mt-4 space-y-3\">\n            {plan.kpiDelta && (\n              <div className=\"rounded-2xl border border-slate-800/80 bg-slate-900/50 p-3 text-xs text-slate-200\">\n                <p className=\"font-medium text-cyan-200\">KPIs</p>\n                <ul className=\"mt-2 space-y-1\">\n                  {plan.kpiDelta.runwayDays !== undefined && (\n                    <li>Runway {plan.kpiDelta.runwayDays > 0 ? \"+\" : \"\"}{plan.kpiDelta.runwayDays} days</li>\n                  )}\n                  {plan.kpiDelta.burnDelta !== undefined && (\n                    <li>Burn {plan.kpiDelta.burnDelta > 0 ? \"+\" : \"\"}{formatPercent(plan.kpiDelta.burnDelta)}</li>\n                  )}\n                  {plan.kpiDelta.goalEtaDeltaDays !== undefined && (\n                    <li>Goal ETA {plan.kpiDelta.goalEtaDeltaDays} days</li>\n                  )}\n                  {plan.kpiDelta.adherence !== undefined && (\n                    <li>Adherence {plan.kpiDelta.adherence > 0 ? \"+\" : \"\"}{formatPercent(plan.kpiDelta.adherence)}</li>\n                  )}\n                </ul>\n              </div>\n            )}\n\n            {plan.derivedWrites.length > 0 && (\n              <div className=\"rounded-2xl border border-slate-800/80 bg-slate-900/50 p-3 text-xs text-slate-200\">\n                <p className=\"font-medium text-cyan-200\">Side effects</p>\n                <ul className=\"mt-2 space-y-1\">\n                  {plan.derivedWrites.map(write => (\n                    <li key={`${write.collection}-${write.id}`}>\n                      <Badge variant=\"outline\" className=\"mr-2 border-slate-700 text-slate-300\">\n                        {write.change}\n                      </Badge>\n                      {write.collection}/{write.id}\n                    </li>\n                  ))}\n                </ul>\n              </div>\n            )}\n\n            {plan.warnings.length > 0 && (\n              <div className=\"rounded-2xl border border-amber-500/40 bg-amber-500/10 p-3 text-xs text-amber-100\">\n                <p className=\"font-medium\">Warnings</p>\n                <ul className=\"mt-2 list-disc space-y-1 pl-4\">\n                  {plan.warnings.map((warning, index) => (\n                    <li key={index}>{warning}</li>\n                  ))}\n                </ul>\n              </div>\n            )}\n          </div>\n\n          <div className=\"mt-6 flex flex-col gap-2\">\n            <Button\n              className=\"w-full rounded-full bg-cyan-500 text-slate-900 hover:bg-cyan-400\"\n              onClick={onCommit}\n              disabled={committing}\n            >\n              {committing ? \"Committing…\" : actionLabel}\n            </Button>\n            <Button variant=\"ghost\" className=\"w-full text-xs text-slate-300\" onClick={onCancel}>\n              Cancel\n            </Button>\n          </div>\n        </motion.aside>\n      )}\n    </AnimatePresence>\n  );\n}\n\n"],"names":[],"mappings":";;;;AAEA;AAAA;AAEA;AACA;AACA;AANA;;;;;;AAgBO,SAAS,YAAY,EAAE,IAAI,EAAE,cAAc,QAAQ,EAAE,QAAQ,EAAE,QAAQ,EAAE,UAAU,EAAS;IACjG,qBACE,8OAAC,yLAAA,CAAA,kBAAe;kBACb,sBACC,8OAAC,0LAAA,CAAA,SAAM,CAAC,KAAK;YAEX,SAAS;gBAAE,GAAG;gBAAI,SAAS;YAAE;YAC7B,SAAS;gBAAE,GAAG;gBAAG,SAAS;YAAE;YAC5B,MAAM;gBAAE,GAAG;gBAAI,SAAS;YAAE;YAC1B,YAAY;gBAAE,MAAM;gBAAU,WAAW;gBAAK,SAAS;YAAG;YAC1D,WAAU;;8BAEV,8OAAC;oBAAE,WAAU;8BAAsD;;;;;;8BACnE,8OAAC;oBAAG,WAAU;8BAAwC;;;;;;8BAEtD,8OAAC;oBAAI,WAAU;;wBACZ,KAAK,QAAQ,kBACZ,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAE,WAAU;8CAA4B;;;;;;8CACzC,8OAAC;oCAAG,WAAU;;wCACX,KAAK,QAAQ,CAAC,UAAU,KAAK,2BAC5B,8OAAC;;gDAAG;gDAAQ,KAAK,QAAQ,CAAC,UAAU,GAAG,IAAI,MAAM;gDAAI,KAAK,QAAQ,CAAC,UAAU;gDAAC;;;;;;;wCAE/E,KAAK,QAAQ,CAAC,SAAS,KAAK,2BAC3B,8OAAC;;gDAAG;gDAAM,KAAK,QAAQ,CAAC,SAAS,GAAG,IAAI,MAAM;gDAAI,CAAA,GAAA,0HAAA,CAAA,gBAAa,AAAD,EAAE,KAAK,QAAQ,CAAC,SAAS;;;;;;;wCAExF,KAAK,QAAQ,CAAC,gBAAgB,KAAK,2BAClC,8OAAC;;gDAAG;gDAAU,KAAK,QAAQ,CAAC,gBAAgB;gDAAC;;;;;;;wCAE9C,KAAK,QAAQ,CAAC,SAAS,KAAK,2BAC3B,8OAAC;;gDAAG;gDAAW,KAAK,QAAQ,CAAC,SAAS,GAAG,IAAI,MAAM;gDAAI,CAAA,GAAA,0HAAA,CAAA,gBAAa,AAAD,EAAE,KAAK,QAAQ,CAAC,SAAS;;;;;;;;;;;;;;;;;;;wBAMnG,KAAK,aAAa,CAAC,MAAM,GAAG,mBAC3B,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAE,WAAU;8CAA4B;;;;;;8CACzC,8OAAC;oCAAG,WAAU;8CACX,KAAK,aAAa,CAAC,GAAG,CAAC,CAAA,sBACtB,8OAAC;;8DACC,8OAAC,iIAAA,CAAA,QAAK;oDAAC,SAAQ;oDAAU,WAAU;8DAChC,MAAM,MAAM;;;;;;gDAEd,MAAM,UAAU;gDAAC;gDAAE,MAAM,EAAE;;2CAJrB,GAAG,MAAM,UAAU,CAAC,CAAC,EAAE,MAAM,EAAE,EAAE;;;;;;;;;;;;;;;;wBAWjD,KAAK,QAAQ,CAAC,MAAM,GAAG,mBACtB,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAE,WAAU;8CAAc;;;;;;8CAC3B,8OAAC;oCAAG,WAAU;8CACX,KAAK,QAAQ,CAAC,GAAG,CAAC,CAAC,SAAS,sBAC3B,8OAAC;sDAAgB;2CAAR;;;;;;;;;;;;;;;;;;;;;;8BAOnB,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,kIAAA,CAAA,SAAM;4BACL,WAAU;4BACV,SAAS;4BACT,UAAU;sCAET,aAAa,gBAAgB;;;;;;sCAEhC,8OAAC,kIAAA,CAAA,SAAM;4BAAC,SAAQ;4BAAQ,WAAU;4BAAgC,SAAS;sCAAU;;;;;;;;;;;;;WAnEnF;;;;;;;;;;AA2Ed","debugId":null}},
    {"offset": {"line": 2854, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/bridge/EntityDrawers.tsx"],"sourcesContent":["\"use client\";\n\nimport { type ReactNode } from \"react\";\nimport { Sheet, SheetContent, SheetHeader, SheetTitle } from \"@/components/ui/sheet\";\n\nexport type EntityDrawerState = {\n  title: string;\n  body: ReactNode;\n} | null;\n\ntype Props = {\n  state: EntityDrawerState;\n  onOpenChange: (open: boolean) => void;\n};\n\nexport function EntityDrawers({ state, onOpenChange }: Props) {\n  return (\n    <Sheet open={Boolean(state)} onOpenChange={onOpenChange}>\n      <SheetContent className=\"w-[400px] border-slate-800 bg-slate-950 text-slate-100\">\n        <SheetHeader>\n          <SheetTitle>{state?.title ?? \"\"}</SheetTitle>\n        </SheetHeader>\n        <div className=\"mt-6 space-y-4 text-sm text-slate-300\">{state?.body}</div>\n      </SheetContent>\n    </Sheet>\n  );\n}\n\n"],"names":[],"mappings":";;;;AAGA;AAHA;;;AAeO,SAAS,cAAc,EAAE,KAAK,EAAE,YAAY,EAAS;IAC1D,qBACE,8OAAC,iIAAA,CAAA,QAAK;QAAC,MAAM,QAAQ;QAAQ,cAAc;kBACzC,cAAA,8OAAC,iIAAA,CAAA,eAAY;YAAC,WAAU;;8BACtB,8OAAC,iIAAA,CAAA,cAAW;8BACV,cAAA,8OAAC,iIAAA,CAAA,aAAU;kCAAE,OAAO,SAAS;;;;;;;;;;;8BAE/B,8OAAC;oBAAI,WAAU;8BAAyC,OAAO;;;;;;;;;;;;;;;;;AAIvE","debugId":null}},
    {"offset": {"line": 2908, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/hooks/useLiveQuery.ts"],"sourcesContent":["\"use client\";\n\nimport { useEffect } from \"react\";\nimport { useQueryClient } from \"@tanstack/react-query\";\n\nexport function useLiveQuery() {\n  const queryClient = useQueryClient();\n\n  useEffect(() => {\n    const eventSource = new EventSource(\"/api/events/stream\");\n\n    eventSource.onmessage = event => {\n      try {\n        const payload = JSON.parse(event.data) as { keys?: string[] };\n        if (!payload?.keys) return;\n        payload.keys.forEach(key => {\n          queryClient.invalidateQueries({ queryKey: key.split(\":\") });\n        });\n      } catch (error) {\n        console.error(\"Failed to parse SSE payload\", error);\n      }\n    };\n\n    return () => {\n      eventSource.close();\n    };\n  }, [queryClient]);\n}\n\n"],"names":[],"mappings":";;;AAEA;AACA;AAHA;;;AAKO,SAAS;IACd,MAAM,cAAc,CAAA,GAAA,sLAAA,CAAA,iBAAc,AAAD;IAEjC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,cAAc,IAAI,YAAY;QAEpC,YAAY,SAAS,GAAG,CAAA;YACtB,IAAI;gBACF,MAAM,UAAU,KAAK,KAAK,CAAC,MAAM,IAAI;gBACrC,IAAI,CAAC,SAAS,MAAM;gBACpB,QAAQ,IAAI,CAAC,OAAO,CAAC,CAAA;oBACnB,YAAY,iBAAiB,CAAC;wBAAE,UAAU,IAAI,KAAK,CAAC;oBAAK;gBAC3D;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,+BAA+B;YAC/C;QACF;QAEA,OAAO;YACL,YAAY,KAAK;QACnB;IACF,GAAG;QAAC;KAAY;AAClB","debugId":null}},
    {"offset": {"line": 2946, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28dashboard%29/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { AttentionQueue } from \"@/components/bridge/AttentionQueue\";\nimport { OperationalCanvas } from \"@/components/bridge/OperationalCanvas\";\nimport { TelemetryRail } from \"@/components/bridge/TelemetryRail\";\nimport { OmniBox } from \"@/components/bridge/OmniBox\";\nimport { KPITiles } from \"@/components/bridge/KPITiles\";\nimport { OpsSprintBar } from \"@/components/bridge/OpsSprintBar\";\nimport { ImpactPanel } from \"@/components/bridge/ImpactPanel\";\nimport { EntityDrawers, EntityDrawerState } from \"@/components/bridge/EntityDrawers\";\nimport { useImpactGuard } from \"@/lib/hooks/useImpactGuard\";\nimport { useLiveQuery } from \"@/lib/hooks/useLiveQuery\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { QueueItem, Overview, CanvasContext, Command, ImpactPlan } from \"@/lib/graph/types\";\n\nasync function fetchOverview(): Promise<Overview> {\n  const response = await fetch(\"/api/bridge/overview\");\n  if (!response.ok) throw new Error(\"Failed to load overview\");\n  const data = await response.json();\n  return data.overview;\n}\n\nasync function fetchQueue(filter: string): Promise<QueueItem[]> {\n  const response = await fetch(`/api/bridge/queue?filter=${filter}`);\n  if (!response.ok) throw new Error(\"Failed to load queue\");\n  const data = await response.json();\n  return data.items as QueueItem[];\n}\n\nasync function fetchContext(id?: string | null): Promise<CanvasContext | null> {\n  if (!id) return null;\n  const response = await fetch(`/api/bridge/context?id=${id}`);\n  if (!response.ok) return null;\n  const data = await response.json();\n  return data.context as CanvasContext;\n}\n\nfunction buildCommandForItem(item: QueueItem): Command | null {\n  const idempotencyKey = crypto.randomUUID();\n  switch (item.kind) {\n    case \"bill\":\n      return {\n        type: \"bill.markPaid\",\n        payload: {\n          billId: item.links?.[0]?.entityId ?? item.id,\n          amount: 182,\n        },\n        idempotencyKey,\n      };\n    case \"goalUnderfunded\":\n      return {\n        type: \"goal.allocate\",\n        payload: {\n          goalId: item.links?.[0]?.entityId ?? item.id,\n          amount: 300,\n        },\n        idempotencyKey,\n      };\n    case \"doseOverdue\":\n      return {\n        type: \"dose.log\",\n        payload: {\n          medicationId: item.links?.[0]?.entityId ?? item.id,\n          doseId: item.links?.[1]?.entityId ?? item.id,\n        },\n        idempotencyKey,\n      };\n    case \"refill\":\n      return {\n        type: \"refill.request\",\n        payload: {\n          medicationId: item.links?.[0]?.entityId ?? item.id,\n        },\n        idempotencyKey,\n      };\n    default:\n      return {\n        type: \"event.create\",\n        payload: {\n          title: item.title,\n          startsAt: new Date().toISOString(),\n        },\n        idempotencyKey,\n      };\n  }\n}\n\nexport default function CommandBridgePage() {\n  const [filter, setFilter] = useState(\"all\");\n  const [selectedItem, setSelectedItem] = useState<QueueItem | null>(null);\n  const [mode, setMode] = useState<\"monitor\" | \"focus\">(\"monitor\");\n  const [sprintRemaining, setSprintRemaining] = useState(25 * 60);\n  const [sprintComplete, setSprintComplete] = useState(0);\n  const [drawer, setDrawer] = useState<EntityDrawerState>(null);\n  const [impactPlan, setImpactPlan] = useState<ImpactPlan | null>(null);\n  const [pendingCommand, setPendingCommand] = useState<Command | null>(null);\n\n  const { toast } = useToast();\n  const { preview, commit } = useImpactGuard();\n\n  useLiveQuery();\n\n  const { data: overview } = useQuery({ queryKey: [\"bridge\", \"overview\"], queryFn: fetchOverview });\n  const { data: queueItems } = useQuery({ queryKey: [\"bridge\", \"queue\", filter], queryFn: () => fetchQueue(filter) });\n  const { data: context } = useQuery({\n    queryKey: [\"bridge\", \"context\", selectedItem?.id],\n    queryFn: () => fetchContext(selectedItem?.id ?? null),\n    enabled: Boolean(selectedItem?.id),\n  });\n\n  const visibleQueue = useMemo(() => queueItems ?? [], [queueItems]);\n\n  useEffect(() => {\n    if (mode === \"focus\") {\n      const timer = setInterval(() => {\n        setSprintRemaining(prev => Math.max(0, prev - 1));\n      }, 1000);\n      return () => clearInterval(timer);\n    }\n  }, [mode]);\n\n  useEffect(() => {\n    if (mode === \"monitor\") {\n      setSprintRemaining(25 * 60);\n      setSprintComplete(0);\n    }\n  }, [mode]);\n\n  useEffect(() => {\n    if (!selectedItem && visibleQueue.length > 0) {\n      setSelectedItem(visibleQueue[0]);\n    }\n  }, [visibleQueue, selectedItem]);\n\n  const handleQueueAction = async (\n    action: QueueItem[\"actions\"][number],\n    item: QueueItem\n  ) => {\n    switch (action) {\n      case \"Accept\": {\n        const command = buildCommandForItem(item);\n        if (!command) return;\n        try {\n          const plan = await preview({\n            intent: command.type.includes(\"bill\")\n              ? \"bill.pay\"\n              : command.type.includes(\"goal\")\n              ? \"goal.allocate\"\n              : command.type.includes(\"dose\")\n              ? \"dose.log\"\n              : command.type.includes(\"refill\")\n              ? \"refill.request\"\n              : \"event.create\",\n            entityId: item.id,\n            patch: command.payload,\n          });\n          setImpactPlan(plan);\n          setPendingCommand({ ...command, signedImpactPlan: plan });\n        } catch (error) {\n          toast({ description: \"Unable to prepare impact plan\", variant: \"destructive\" });\n        }\n        break;\n      }\n      case \"Open\": {\n        setDrawer({\n          title: item.title,\n          body: (\n            <div className=\"space-y-3\">\n              <p className=\"text-slate-200\">{item.detail}</p>\n              <p className=\"text-xs text-slate-500\">Priority score {item.priorityScore}</p>\n              {context && (\n                <div className=\"space-y-2 text-xs text-slate-400\">\n                  <p>Explain</p>\n                  <ul className=\"list-disc pl-4\">\n                    {context.explain.map((line, idx) => (\n                      <li key={idx}>{line}</li>\n                    ))}\n                  </ul>\n                </div>\n              )}\n            </div>\n          ),\n        });\n        break;\n      }\n      case \"Simulate\": {\n        setImpactPlan(prev => prev);\n        break;\n      }\n      case \"Explain\": {\n        toast({ description: item.detail });\n        break;\n      }\n      case \"Nudge\": {\n        toast({ description: \"Nudge scheduled\" });\n        break;\n      }\n      case \"Schedule\": {\n        toast({ description: \"Added to schedule\" });\n        break;\n      }\n      case \"Ignore\": {\n        toast({ description: \"Ignored for 7 days\" });\n        break;\n      }\n      default:\n        break;\n    }\n  };\n\n  const handleCommit = async () => {\n    if (!pendingCommand) return;\n    try {\n      await commit(pendingCommand);\n      toast({ description: \"Action committed\" });\n      setImpactPlan(null);\n      setPendingCommand(null);\n      setSprintComplete(count => count + 1);\n    } catch (error) {\n      toast({ description: \"Command failed\", variant: \"destructive\" });\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col gap-6\">\n      <OpsSprintBar\n        mode={mode}\n        onModeChange={setMode}\n        remainingSeconds={sprintRemaining}\n        completed={sprintComplete}\n        total={mode === \"focus\" ? 5 : visibleQueue.length}\n      />\n      <OmniBox />\n      <KPITiles overview={overview} onSelectMetric={metric => toast({ description: `Switched to ${metric}` })} />\n      <div className=\"grid gap-4 xl:grid-cols-[35%_45%_20%]\">\n        <div className=\"xl:h-[780px]\">\n          <AttentionQueue\n            items={visibleQueue}\n            filter={filter}\n            focusMode={mode === \"focus\"}\n            onFilterChange={value => setFilter(value)}\n            selectedId={selectedItem?.id}\n            onSelect={item => setSelectedItem(item)}\n            onAction={handleQueueAction}\n          />\n        </div>\n        <div className=\"relative xl:h-[780px]\">\n          <OperationalCanvas\n            item={selectedItem}\n            context={context}\n            onSimulate={() => toast({ description: \"Scenario simulation queued\" })}\n            onNudgePerson={() => toast({ description: \"Nudge sent\" })}\n          />\n          <ImpactPanel\n            plan={impactPlan}\n            onCommit={handleCommit}\n            onCancel={() => {\n              setImpactPlan(null);\n              setPendingCommand(null);\n            }}\n          />\n        </div>\n        <TelemetryRail overview={overview} mode={mode} onMetricSelect={metric => toast({ description: `Focused on ${metric}` })} />\n      </div>\n      <EntityDrawers state={drawer} onOpenChange={open => !open && setDrawer(null)} />\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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","debugId":null}}]
}