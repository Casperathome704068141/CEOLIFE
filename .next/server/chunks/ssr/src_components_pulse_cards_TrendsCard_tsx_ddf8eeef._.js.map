{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/pulse/cards/TrendsCard.tsx"],"sourcesContent":["\n\"use client\";\n\nimport { Card, CardContent, CardFooter, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { TrendsPayload } from \"@/lib/pulse/types\";\nimport { ResponsiveContainer, LineChart, Line, XAxis, YAxis, Tooltip, CartesianGrid, BarChart, Bar } from \"recharts\";\nimport { Button } from \"@/components/ui/button\";\n\ninterface Props {\n  trends: TrendsPayload;\n  onAddToBrief: (payload: { title: string; body: string }) => Promise<void>;\n}\n\nexport function TrendsCard({ trends, onAddToBrief }: Props) {\n  const labels = Array.from(new Set(trends.lineMoves.map((move) => move.label ?? move.id)));\n  const timestamps = Array.from(new Set(trends.lineMoves.map((move) => move.t)));\n  const chartData = timestamps.map((t) => {\n    const base: Record<string, number | string> = { t };\n    labels.forEach((label) => {\n      const values = trends.lineMoves\n        .filter((move) => (move.label ?? move.id) === label && move.t === t)\n        .map((move) => move.value);\n      base[label] = values.length ? Number((values.reduce((sum, val) => sum + val, 0) / values.length).toFixed(2)) : 0;\n    });\n    return base;\n  });\n\n  const colors = [\"#38bdf8\", \"#22d3ee\", \"#a855f7\", \"#f97316\"];\n\n  return (\n    <Card className=\"col-span-full flex h-full flex-col rounded-2xl border-border/60 bg-background/60 backdrop-blur\">\n      <CardHeader className=\"gap-3\">\n        <CardTitle className=\"flex flex-wrap items-center justify-between gap-3 text-base\">\n          <span>Trends intelligence</span>\n          <span className=\"text-xs text-muted-foreground\">Line moves • Sentiment • Momentum</span>\n        </CardTitle>\n      </CardHeader>\n      <CardContent className=\"flex-1 space-y-6\">\n        {trends.lineMoves.length === 0 ? (\n          <p className=\"text-sm text-muted-foreground\">Trends will populate as leagues with activity are selected.</p>\n        ) : null}\n        {chartData.length > 0 ? (\n          <div className=\"h-64 w-full overflow-hidden rounded-xl border border-border/60 bg-background/80 p-4 shadow-sm\">\n            <ResponsiveContainer>\n              <LineChart data={chartData}>\n                <CartesianGrid strokeDasharray=\"3 3\" className=\"stroke-border/50\" />\n                <XAxis dataKey=\"t\" stroke=\"hsl(var(--muted-foreground))\" fontSize={12} />\n                <YAxis stroke=\"hsl(var(--muted-foreground))\" fontSize={12} />\n                <Tooltip cursor={{ strokeDasharray: \"3 3\" }} contentStyle={{ fontSize: 12, backgroundColor: \"hsl(var(--background))\", border: \"1px solid hsl(var(--border))\" }} />\n                {labels.map((label, index) => (\n                  <Line\n                    key={label}\n                    type=\"monotone\"\n                    dataKey={label}\n                    strokeWidth={2}\n                    stroke={colors[index % colors.length]}\n                    name={label}\n                  />\n                ))}\n              </LineChart>\n            </ResponsiveContainer>\n          </div>\n        ) : null}\n        <div className=\"grid gap-4 md:grid-cols-2\">\n          <div className=\"space-y-3 rounded-xl border border-border/60 bg-background/80 p-4 shadow-sm\">\n            <p className=\"text-xs font-semibold uppercase tracking-wide text-muted-foreground\">Momentum heat</p>\n            <div className=\"grid grid-cols-2 gap-2 sm:grid-cols-3\">\n              {trends.momentumHeat.map((item) => (\n                <div\n                  key={`${item.id}-${item.label}`}\n                  className=\"rounded-lg p-3 text-xs font-medium text-background\"\n                  style={{\n                    background: `linear-gradient(135deg, hsl(var(--primary)) ${Math.round(item.score * 100)}%, rgba(148,163,184,0.4))`,\n                  }}\n                >\n                  <p>{item.label}</p>\n                  <p className=\"text-[10px] text-background/70\">Index {(item.score * 100).toFixed(0)}</p>\n                </div>\n              ))}\n            </div>\n          </div>\n          <div className=\"space-y-3 rounded-xl border border-border/60 bg-background/80 p-4 shadow-sm\">\n            <p className=\"text-xs font-semibold uppercase tracking-wide text-muted-foreground\">Sentiment split</p>\n            <div className=\"space-y-3\">\n              {trends.sentiment.map((row) => (\n                <div key={row.league} className=\"space-y-1\">\n                  <div className=\"flex items-center justify-between text-xs text-muted-foreground\">\n                    <span>{row.league}</span>\n                    <span>Bullish {(row.bullish * 100).toFixed(0)}%</span>\n                  </div>\n                  <div className=\"h-2 w-full overflow-hidden rounded-full bg-muted\">\n                    <div\n                      className=\"h-full bg-primary\"\n                      style={{ width: `${Math.min(100, Math.round(row.bullish * 100))}%` }}\n                    />\n                  </div>\n                  <p className=\"text-[10px] text-muted-foreground\">\n                    Bearish {(row.bearish * 100).toFixed(0)}% of tracked public slips.\n                  </p>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n      </CardContent>\n      <CardFooter className=\"flex flex-wrap items-center justify-between gap-3 text-xs text-muted-foreground\">\n        <span>Trends overlay on each card when you pin items to the watchlist.</span>\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          className=\"text-primary\"\n          onClick={() =>\n            onAddToBrief({\n              title: \"Trend digest\",\n              body: \"Summarize line movement & sentiment shifts in the Beno briefing.\",\n            })\n          }\n        >\n          Add to Beno brief\n        </Button>\n      </CardFooter>\n    </Card>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}