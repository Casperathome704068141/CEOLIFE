{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/pulse/cards/ScheduleCard.tsx"],"sourcesContent":["\n\"use client\";\n\nimport { useState } from \"react\";\nimport { Card, CardContent, CardFooter, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Game } from \"@/lib/pulse/types\";\nimport { format, isToday, parseISO } from \"date-fns\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { Plus, Check } from \"lucide-react\";\n\ninterface Props {\n  games: Game[];\n  trackedIds: Set<string>;\n  onTrack: (game: Game) => void;\n  onUntrack: (game: Game) => void;\n  onlyWatchlist: boolean;\n  onAddToBrief: (payload: { title: string; body: string }) => Promise<void>;\n  focusedId?: string | null;\n}\n\nexport function ScheduleCard({\n  games,\n  trackedIds,\n  onTrack,\n  onUntrack,\n  onlyWatchlist,\n  onAddToBrief,\n  focusedId,\n}: Props) {\n  const [expandedId, setExpandedId] = useState<string | null>(null);\n\n  const todayGames = games.filter((game) => isToday(parseISO(game.start)));\n  const upcoming = games.filter((game) => !isToday(parseISO(game.start)));\n\n  const sections = [\n    { title: \"Today's Games\", items: todayGames },\n    { title: \"Upcoming (7d)\", items: upcoming },\n  ];\n\n  return (\n    <Card className=\"flex flex-col rounded-2xl border-border/60 bg-background/60 backdrop-blur\">\n      <CardHeader className=\"gap-3\">\n        <CardTitle className=\"flex flex-wrap items-center justify-between gap-3 text-base\">\n          <span>Schedule radar</span>\n          <Badge variant=\"outline\">Sports</Badge>\n        </CardTitle>\n      </CardHeader>\n      <CardContent className=\"flex-1 space-y-6\">\n        {sections.map((section) => (\n          <div key={section.title} className=\"space-y-3\">\n            {(() => {\n              const visible = section.items.filter((game) => (onlyWatchlist ? trackedIds.has(game.id) : true));\n              return (\n                <>\n                  <div className=\"flex flex-wrap items-center justify-between gap-3\">\n                    <h3 className=\"text-sm font-semibold uppercase tracking-wide text-muted-foreground\">\n                      {section.title}\n                    </h3>\n                    <span className=\"text-xs text-muted-foreground\">{visible.length} games</span>\n                  </div>\n                  <div className=\"space-y-2\">\n                    <AnimatePresence initial={false}>\n                      {visible.length === 0 ? (\n                        <p className=\"text-xs text-muted-foreground\">No fixtures in this window.</p>\n                      ) : (\n                        visible.map((game) => {\n                          const tracked = trackedIds.has(game.id);\n                          const start = parseISO(game.start);\n                          return (\n                            <motion.div\n                              key={game.id}\n                              layout\n                              initial={{ opacity: 0, y: 8 }}\n                              animate={{ opacity: 1, y: 0 }}\n                              exit={{ opacity: 0, y: -8 }}\n                              className=\"rounded-xl border border-border/60 bg-background/80 p-3\"\n                              style={focusedId === game.id ? { boxShadow: \"0 0 0 2px hsl(var(--primary))\" } : undefined}\n                            >\n                              <div className=\"flex flex-wrap items-center justify-between gap-4\">\n                                <div>\n                                  <p className=\"text-sm font-medium\">\n                                    {game.away.name} @ {game.home.name}\n                                  </p>\n                                  <div className=\"mt-1 flex gap-2 text-xs text-muted-foreground\">\n                                    <span>{game.league}</span>\n                                    <span>•</span>\n                                    <span>{format(start, \"eee, MMM d p\")}</span>\n                                    {game.venueCity ? (\n                                      <>\n                                        <span>•</span>\n                                        <span>{game.venueCity}</span>\n                                      </>\n                                    ) : null}\n                                  </div>\n                                </div>\n                                <div className=\"flex flex-wrap items-center gap-3\">\n                                  <div className=\"w-32 overflow-hidden rounded-full bg-muted\">\n                                    <div\n                                      className=\"h-2 rounded-full bg-primary\"\n                                      style={{ width: `${Math.round((game.winProb ?? 0.5) * 100)}%` }}\n                                    />\n                                  </div>\n                                  <Button\n                                    size=\"sm\"\n                                    variant={tracked ? \"secondary\" : \"outline\"}\n                                    className=\"gap-1\"\n                                    onClick={() => (tracked ? onUntrack(game) : onTrack(game))}\n                                  >\n                                    {tracked ? <Check className=\"h-4 w-4\" /> : <Plus className=\"h-4 w-4\" />} Track\n                                  </Button>\n                                </div>\n                              </div>\n                              <button\n                                type=\"button\"\n                                onClick={() => setExpandedId((prev) => (prev === game.id ? null : game.id))}\n                                className=\"mt-3 text-xs font-semibold uppercase tracking-wide text-primary\"\n                              >\n                                {expandedId === game.id ? \"Hide detail\" : \"View context\"}\n                              </button>\n                              <AnimatePresence initial={false}>\n                                {expandedId === game.id ? (\n                                  <motion.div\n                                    initial={{ opacity: 0, height: 0 }}\n                                    animate={{ opacity: 1, height: \"auto\" }}\n                                    exit={{ opacity: 0, height: 0 }}\n                                    className=\"space-y-2 overflow-hidden pt-3 text-xs text-muted-foreground\"\n                                  >\n                                    <p>\n                                      Recent meetings: {game.recentMeetings?.map((meet) => `${meet.when} ${meet.result}`).join(\", \")}\n                                    </p>\n                                    <p>Injuries: {game.injuries?.join(\", \") ?? \"No major reports\"}</p>\n                                    <p>\n                                      Weather note: {game.venueCity ? `Check latest forecast for ${game.venueCity}.` : \"Indoor venue\"}\n                                    </p>\n                                  </motion.div>\n                                ) : null}\n                              </AnimatePresence>\n                            </motion.div>\n                          );\n                        })\n                      )}\n                    </AnimatePresence>\n                  </div>\n                </>\n              );\n            })()}\n          </div>\n        ))}\n      </CardContent>\n      <CardFooter className=\"flex flex-wrap items-center justify-between gap-3 text-xs text-muted-foreground\">\n        <span>Track games to sync alerts and weather overlays.</span>\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          className=\"text-primary\"\n          onClick={() =>\n            onAddToBrief({\n              title: \"Schedule roundup\",\n              body: \"Highlight these fixtures in the Beno briefing for quick review.\",\n            })\n          }\n        >\n          Add to Beno brief\n        </Button>\n      </CardFooter>\n    </Card>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}