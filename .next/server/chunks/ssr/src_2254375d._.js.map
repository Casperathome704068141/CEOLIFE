{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/assistant/context.tsx"],"sourcesContent":["\"use client\";\n\nimport { createContext, useContext, useMemo, useState } from \"react\";\nimport type {\n  AssistantMode,\n  ComposerAttachment,\n  ContextChip,\n} from \"./types\";\n\nexport type AssistantContextValue = {\n  mode: AssistantMode;\n  setMode: (mode: AssistantMode) => void;\n  chips: ContextChip[];\n  toggleChip: (id: string) => void;\n  attachments: ComposerAttachment[];\n  addAttachment: (file: ComposerAttachment) => void;\n  removeAttachment: (id: string) => void;\n  clearAttachments: () => void;\n};\n\nconst DEFAULT_CHIPS: ContextChip[] = [\n  { id: \"week\", label: \"This week\", active: true },\n  { id: \"currency\", label: \"Currency: CAD\", active: true },\n  { id: \"household\", label: \"Household: 1017\", active: true },\n  { id: \"quiet-hours\", label: \"Quiet hours off\", active: false },\n  { id: \"privacy\", label: \"Privacy: mask PHI\", active: true },\n];\n\nconst AssistantContext = createContext<AssistantContextValue | null>(null);\n\nexport function AssistantProvider({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  const [mode, setMode] = useState<AssistantMode>(\"brief\");\n  const [chips, setChips] = useState<ContextChip[]>(DEFAULT_CHIPS);\n  const [attachments, setAttachments] = useState<ComposerAttachment[]>([]);\n\n  const value = useMemo<AssistantContextValue>(\n    () => ({\n      mode,\n      setMode,\n      chips,\n      toggleChip: (id) => {\n        setChips((prev) =>\n          prev.map((chip) =>\n            chip.id === id ? { ...chip, active: !chip.active } : chip,\n          ),\n        );\n      },\n      attachments,\n      addAttachment: (file) => {\n        setAttachments((prev) => {\n          const exists = prev.some((item) => item.id === file.id);\n          if (exists) return prev;\n          return [...prev, file];\n        });\n      },\n      removeAttachment: (id) => {\n        setAttachments((prev) => prev.filter((item) => item.id !== id));\n      },\n      clearAttachments: () => setAttachments([]),\n    }),\n    [attachments, chips, mode],\n  );\n\n  return (\n    <AssistantContext.Provider value={value}>\n      {children}\n    </AssistantContext.Provider>\n  );\n}\n\nexport function useAssistantContext() {\n  const ctx = useContext(AssistantContext);\n  if (!ctx) {\n    throw new Error(\"useAssistantContext must be used within AssistantProvider\");\n  }\n  return ctx;\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAoBA,MAAM,gBAA+B;IACnC;QAAE,IAAI;QAAQ,OAAO;QAAa,QAAQ;IAAK;IAC/C;QAAE,IAAI;QAAY,OAAO;QAAiB,QAAQ;IAAK;IACvD;QAAE,IAAI;QAAa,OAAO;QAAmB,QAAQ;IAAK;IAC1D;QAAE,IAAI;QAAe,OAAO;QAAmB,QAAQ;IAAM;IAC7D;QAAE,IAAI;QAAW,OAAO;QAAqB,QAAQ;IAAK;CAC3D;AAED,MAAM,iCAAmB,CAAA,GAAA,qMAAA,CAAA,gBAAa,AAAD,EAAgC;AAE9D,SAAS,kBAAkB,EAChC,QAAQ,EAGT;IACC,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAChD,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAClD,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAwB,EAAE;IAEvE,MAAM,QAAQ,CAAA,GAAA,qMAAA,CAAA,UAAO,AAAD,EAClB,IAAM,CAAC;YACL;YACA;YACA;YACA,YAAY,CAAC;gBACX,SAAS,CAAC,OACR,KAAK,GAAG,CAAC,CAAC,OACR,KAAK,EAAE,KAAK,KAAK;4BAAE,GAAG,IAAI;4BAAE,QAAQ,CAAC,KAAK,MAAM;wBAAC,IAAI;YAG3D;YACA;YACA,eAAe,CAAC;gBACd,eAAe,CAAC;oBACd,MAAM,SAAS,KAAK,IAAI,CAAC,CAAC,OAAS,KAAK,EAAE,KAAK,KAAK,EAAE;oBACtD,IAAI,QAAQ,OAAO;oBACnB,OAAO;2BAAI;wBAAM;qBAAK;gBACxB;YACF;YACA,kBAAkB,CAAC;gBACjB,eAAe,CAAC,OAAS,KAAK,MAAM,CAAC,CAAC,OAAS,KAAK,EAAE,KAAK;YAC7D;YACA,kBAAkB,IAAM,eAAe,EAAE;QAC3C,CAAC,GACD;QAAC;QAAa;QAAO;KAAK;IAG5B,qBACE,8OAAC,iBAAiB,QAAQ;QAAC,OAAO;kBAC/B;;;;;;AAGP;AAEO,SAAS;IACd,MAAM,MAAM,CAAA,GAAA,qMAAA,CAAA,aAAU,AAAD,EAAE;IACvB,IAAI,CAAC,KAAK;QACR,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/assistant/idempotency.ts"],"sourcesContent":["export function createIdempotencyKey(prefix = \"exec\") {\n  const random = Math.random().toString(36).slice(2, 8);\n  const timestamp = Date.now().toString(36);\n  return `${prefix}_${timestamp}_${random}`;\n}\n"],"names":[],"mappings":";;;AAAO,SAAS,qBAAqB,SAAS,MAAM;IAClD,MAAM,SAAS,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,KAAK,CAAC,GAAG;IACnD,MAAM,YAAY,KAAK,GAAG,GAAG,QAAQ,CAAC;IACtC,OAAO,GAAG,OAAO,CAAC,EAAE,UAAU,CAAC,EAAE,QAAQ;AAC3C","debugId":null}},
    {"offset": {"line": 114, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/assistant/useAssistant.ts"],"sourcesContent":["\"use client\";\n\nimport { useCallback, useMemo, useRef, useState } from \"react\";\nimport { toast } from \"@/hooks/use-toast\";\nimport type {\n  AssistantMessage,\n  AssistantMessageBase,\n  AssistantMode,\n  AssistantActionResult,\n  ExecLogEntry,\n  Action,\n} from \"./types\";\nimport { createIdempotencyKey } from \"./idempotency\";\n\nfunction createBaseMessage(): AssistantMessageBase {\n  return { id: crypto.randomUUID(), createdAt: new Date().toISOString() };\n}\n\nfunction parseSSEPayload(chunk: string): Array<Record<string, unknown>> {\n  return chunk\n    .split(\"\\n\\n\")\n    .map((part) => part.trim())\n    .filter(Boolean)\n    .map((part) => {\n      const data = part.replace(/^data:\\s*/, \"\");\n      try {\n        return JSON.parse(data);\n      } catch (error) {\n        console.warn(\"Failed to parse SSE payload\", error, data);\n        return {};\n      }\n    });\n}\n\nexport type SendMessageArgs = {\n  content: string;\n  mode: AssistantMode;\n  chips: string[];\n  attachments?: { id: string; name: string; type: string }[];\n};\n\ntype AssistantMessageInput =\n  | ({ role: \"assistant\"; kind: \"text\"; content: string; actions?: Action[] })\n  | ({ role: \"assistant\"; kind: \"briefing\"; sections: any })\n  | ({ role: \"assistant\"; kind: \"insight\"; card: any })\n  | ({ role: \"assistant\"; kind: \"decision\"; title: string; options: any })\n  | ({ role: \"assistant\"; kind: \"rule\"; rule: any; testResult?: any })\n  | ({ role: \"assistant\"; kind: \"editor\"; form: any })\n  | ({ role: \"user\"; content: string });\n\nexport function useAssistant() {\n  const [messages, setMessages] = useState<AssistantMessage[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [execLogs, setExecLogs] = useState<Record<string, ExecLogEntry>>({});\n  const abortRef = useRef<AbortController | null>(null);\n\n  const sendMessage = useCallback(\n    async ({ content, mode, chips, attachments }: SendMessageArgs) => {\n      if (!content.trim() && !attachments?.length) return;\n      const userMessage: AssistantMessage = {\n        ...createBaseMessage(),\n        role: \"user\",\n        content,\n      };\n      setMessages((prev) => [...prev, userMessage]);\n      setLoading(true);\n\n      abortRef.current?.abort();\n      const controller = new AbortController();\n      abortRef.current = controller;\n\n      try {\n        const response = await fetch(\"/api/assistant/chat\", {\n          method: \"POST\",\n          body: JSON.stringify({\n            message: content,\n            mode,\n            chips,\n            attachments,\n          }),\n          signal: controller.signal,\n        });\n\n        if (!response.body) {\n          throw new Error(\"No response body from assistant\");\n        }\n\n        const reader = response.body.getReader();\n        const decoder = new TextDecoder();\n        let buffer = \"\";\n\n        while (true) {\n          const { done, value } = await reader.read();\n          if (done) break;\n          buffer += decoder.decode(value, { stream: true });\n          const payloads = parseSSEPayload(buffer);\n          if (!buffer.endsWith(\"\\n\\n\")) {\n            const lastBreak = buffer.lastIndexOf(\"\\n\\n\");\n            if (lastBreak !== -1) {\n              buffer = buffer.slice(lastBreak + 2);\n            }\n          } else {\n            buffer = \"\";\n          }\n          for (const payload of payloads) {\n            handleAssistantPayload(payload);\n          }\n        }\n\n        setLoading(false);\n      } catch (error) {\n        if ((error as Error).name === \"AbortError\") return;\n        console.error(error);\n        toast.error(\"Assistant request failed\");\n        setLoading(false);\n      }\n    },\n    [],\n  );\n\n  const handleAssistantPayload = useCallback(\n    (payload: Record<string, unknown>) => {\n      if (payload.role === \"assistant\" && payload.kind === \"text\") {\n        setMessages((prev) => [\n          ...prev,\n          {\n            ...createBaseMessage(),\n            role: \"assistant\",\n            kind: \"text\",\n            content: (payload as any).content ?? \"\",\n          },\n        ]);\n      }\n\n      if (payload.kind === \"briefing\") {\n        setMessages((prev) => [\n          ...prev,\n          {\n            ...createBaseMessage(),\n            role: \"assistant\",\n            kind: \"briefing\",\n            sections: (payload as any).sections ?? [],\n          },\n        ]);\n      }\n\n      if (payload.kind === \"insight\") {\n        setMessages((prev) => [\n          ...prev,\n          {\n            ...createBaseMessage(),\n            role: \"assistant\",\n            kind: \"insight\",\n            card: (payload as any).card,\n          },\n        ]);\n      }\n\n      if (payload.kind === \"decision\") {\n        setMessages((prev) => [\n          ...prev,\n          {\n            ...createBaseMessage(),\n            role: \"assistant\",\n            kind: \"decision\",\n            title: (payload as any).title,\n            options: (payload as any).options ?? [],\n          },\n        ]);\n      }\n\n      if (payload.kind === \"rule\") {\n        setMessages((prev) => [\n          ...prev,\n          {\n            ...createBaseMessage(),\n            role: \"assistant\",\n            kind: \"rule\",\n            rule: (payload as any).rule,\n            testResult: (payload as any).testResult,\n          },\n        ]);\n      }\n\n      if (payload.kind === \"editor\") {\n        setMessages((prev) => [\n          ...prev,\n          {\n            ...createBaseMessage(),\n            role: \"assistant\",\n            kind: \"editor\",\n            form: (payload as any).form,\n          },\n        ]);\n      }\n\n      if (payload.execLog) {\n        const log = payload.execLog as ExecLogEntry;\n        setExecLogs((prev) => ({ ...prev, [log.actionId ?? log.id]: log }));\n      }\n    },\n    [],\n  );\n\n  const executeAction = useCallback(\n    async (action: Action) => {\n      const idempotencyKey = createIdempotencyKey(action.type);\n      const endpoint = action.type === \"accept\" ? action.payload?.tool ?? \"transaction\" : action.type;\n      const route = resolveActionRoute(endpoint as string);\n      const body = {\n        idempotencyKey,\n        payload: action.payload ?? {},\n      };\n      try {\n        const res = await fetch(route, {\n          method: \"POST\",\n          body: JSON.stringify(body),\n        });\n        const json = (await res.json()) as AssistantActionResult;\n        const exec: ExecLogEntry = {\n          id: idempotencyKey,\n          label: action.label,\n          state: json.ok ? \"success\" : \"error\",\n          undoable: json.undoable,\n          error: json.error,\n          actionId: action.id,\n        };\n        setExecLogs((prev) => ({ ...prev, [action.id]: exec }));\n        return json;\n      } catch (error) {\n        console.error(error);\n        const exec: ExecLogEntry = {\n          id: idempotencyKey,\n          label: action.label,\n          state: \"error\",\n          error: (error as Error).message,\n          actionId: action.id,\n        };\n        setExecLogs((prev) => ({ ...prev, [action.id]: exec }));\n        return { ok: false, error: (error as Error).message };\n      }\n    },\n    [],\n  );\n\n  const undoExecution = useCallback(async (log: ExecLogEntry) => {\n    try {\n      await fetch(\"/api/assistant/undo\", {\n        method: \"POST\",\n        body: JSON.stringify({ idempotencyKey: log.id }),\n      });\n      setExecLogs((prev) => ({\n        ...prev,\n        [log.actionId ?? log.id]: { ...log, state: \"idle\" },\n      }));\n    } catch (error) {\n      console.error(error);\n      toast.error(\"Undo failed\");\n    }\n  }, []);\n\n  const latestExecLogs = useMemo(() => execLogs, [execLogs]);\n\n  const injectMessage = useCallback((input: AssistantMessageInput) => {\n    setMessages((prev) => [\n      ...prev,\n      {\n        ...createBaseMessage(),\n        ...(input as AssistantMessage),\n      },\n    ]);\n  }, []);\n\n  return {\n    messages,\n    loading,\n    sendMessage,\n    executeAction,\n    undoExecution,\n    execLogs: latestExecLogs,\n    injectMessage,\n  };\n}\n\nfunction resolveActionRoute(tool: string) {\n  switch (tool) {\n    case \"transaction\":\n      return \"/api/assistant/actions/transaction\";\n    case \"bill\":\n      return \"/api/assistant/actions/bill\";\n    case \"goal\":\n      return \"/api/assistant/actions/goal\";\n    case \"schedule\":\n      return \"/api/assistant/actions/schedule\";\n    case \"rule\":\n      return \"/api/assistant/actions/rule\";\n    case \"simulate\":\n      return \"/api/assistant/actions/simulate\";\n    case \"vault\":\n      return \"/api/assistant/actions/vault\";\n    case \"nudge\":\n      return \"/api/assistant/actions/nudge\";\n    default:\n      return \"/api/assistant/actions/transaction\";\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 398, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport {cn} from '@/lib/utils';\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, React.ComponentProps<'textarea'>>(\n  ({className, ...props}, ref) => {\n    return (\n      <textarea\n        className={cn(\n          'flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nTextarea.displayName = 'Textarea';\n\nexport {Textarea};\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AAEA,MAAM,yBAAW,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAC9B,CAAC,EAAC,SAAS,EAAE,GAAG,OAAM,EAAE;IACtB,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,qTACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,SAAS,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 426, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;AACA;AAEA;;;;AAEA,MAAM,gBAAgB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACtB,0KACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB;IACzD,qBACE,8OAAC;QAAI,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE","debugId":null}},
    {"offset": {"line": 468, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/scroll-area.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC,0KAAA,CAAA,OAAwB;QACvB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,4BAA4B;QACzC,GAAG,KAAK;;0BAET,8OAAC,0KAAA,CAAA,WAA4B;gBAAC,WAAU;0BACrC;;;;;;0BAEH,8OAAC;;;;;0BACD,8OAAC,0KAAA,CAAA,SAA0B;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,0KAAA,CAAA,OAAwB,CAAC,WAAW;AAE7D,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,cAAc,UAAU,EAAE,GAAG,OAAO,EAAE,oBACpD,8OAAC,0KAAA,CAAA,sBAAuC;QACtC,KAAK;QACL,aAAa;QACb,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,iDACA,gBAAgB,cACd,sDACF,gBAAgB,gBACd,wDACF;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,0KAAA,CAAA,kBAAmC;YAAC,WAAU;;;;;;;;;;;AAGnD,UAAU,WAAW,GAAG,0KAAA,CAAA,sBAAuC,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 536, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/assistant/Composer.tsx"],"sourcesContent":["\"use client\";\n\nimport { useMemo, useState } from \"react\";\nimport { useDropzone } from \"react-dropzone\";\nimport { Send, Paperclip, Loader2, Command } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  Command as CommandRoot,\n  CommandInput,\n  CommandList,\n  CommandItem,\n  CommandEmpty,\n} from \"@/components/ui/command\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { useAssistantContext } from \"@/lib/assistant/context\";\nimport type { CommandSuggestion } from \"@/lib/assistant/types\";\n\nconst SLASH_COMMANDS: CommandSuggestion[] = [\n  {\n    id: \"briefing\",\n    trigger: \"/briefing\",\n    description: \"Run a structured briefing\",\n    insertText: \"/briefing morning\",\n  },\n  {\n    id: \"add\",\n    trigger: \"/add\",\n    description: \"Capture a new transaction, goal, or event\",\n    insertText: \"/add txn\",\n  },\n  {\n    id: \"simulate\",\n    trigger: \"/simulate\",\n    description: \"Model a scenario\",\n    insertText: \"/simulate rent +12%\",\n  },\n  {\n    id: \"rule\",\n    trigger: \"/rule\",\n    description: \"Automate with an if/then rule\",\n    insertText: \"/rule when groceries > 90% before month end then nudge Marcus\",\n  },\n  {\n    id: \"nudge\",\n    trigger: \"/nudge\",\n    description: \"Send a WhatsApp or SMS nudge\",\n    insertText: \"/nudge Marcus Need anything from Costco?\",\n  },\n  {\n    id: \"find\",\n    trigger: \"/find\",\n    description: \"Search docs, transactions, or events\",\n    insertText: \"/find doc rent ledger\",\n  },\n];\n\nexport function Composer({\n  value,\n  onChange,\n  onSubmit,\n  loading,\n}: {\n  value: string;\n  onChange: (next: string) => void;\n  onSubmit: () => void;\n  loading?: boolean;\n}) {\n  const { chips, toggleChip, attachments, removeAttachment, addAttachment } =\n    useAssistantContext();\n  const [showCommands, setShowCommands] = useState(false);\n\n  const activeChips = useMemo(() => chips.filter((chip) => chip.active), [chips]);\n\n  const onDrop = useMemo(\n    () =>\n      (accepted: File[]) => {\n        accepted.forEach((file) => {\n          addAttachment({\n            id: `${file.name}-${file.size}`,\n            name: file.name,\n            type: file.type,\n            size: file.size,\n          });\n        });\n      },\n    [addAttachment],\n  );\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    onDrop,\n  });\n\n  return (\n    <div\n      {...getRootProps()}\n      className=\"relative overflow-hidden rounded-3xl border border-slate-800/80 bg-slate-950/80 backdrop-blur\"\n    >\n      <input {...getInputProps()} className=\"hidden\" />\n      {isDragActive && (\n        <div className=\"absolute inset-0 z-10 flex items-center justify-center bg-slate-900/90\">\n          <p className=\"text-sm text-slate-200\">Drop files to attach</p>\n        </div>\n      )}\n      <div className=\"flex flex-col gap-3 p-4\">\n        <div className=\"flex flex-wrap gap-2\">\n          {chips.map((chip) => (\n            <Badge\n              key={chip.id}\n              variant={chip.active ? \"default\" : \"outline\"}\n              onClick={() => toggleChip(chip.id)}\n              className=\"cursor-pointer bg-slate-800/80 px-3 py-1 text-xs font-medium hover:bg-slate-700\"\n            >\n              {chip.label}\n            </Badge>\n          ))}\n        </div>\n\n        <Textarea\n          value={value}\n          onChange={(event) => onChange(event.target.value)}\n          placeholder=\"Ask Beno to capture, reconcile, or plan. Shift+Enter for newline.\"\n          className=\"min-h-[120px] resize-none border-0 bg-transparent text-sm text-slate-100 focus-visible:ring-0\"\n          onFocus={() => setShowCommands(false)}\n          onKeyDown={(event) => {\n            if (event.key === \"/\") {\n              setShowCommands(true);\n            }\n            if (event.key === \"Enter\" && !event.shiftKey) {\n              event.preventDefault();\n              onSubmit();\n            }\n          }}\n        />\n\n        {attachments.length > 0 && (\n          <ScrollArea className=\"-mx-4 rounded-b-3xl bg-slate-900/40 px-4 py-3\">\n            <div className=\"flex flex-wrap gap-3\">\n              {attachments.map((file) => (\n                <div\n                  key={file.id}\n                  className=\"flex items-center gap-2 rounded-full border border-slate-800 bg-slate-900/60 px-3 py-1 text-xs\"\n                >\n                  <Paperclip className=\"h-3 w-3\" />\n                  <span>{file.name}</span>\n                  <button\n                    onClick={() => removeAttachment(file.id)}\n                    className=\"text-slate-400 transition hover:text-slate-200\"\n                  >\n                    ✕\n                  </button>\n                </div>\n              ))}\n            </div>\n          </ScrollArea>\n        )}\n\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-2 text-xs text-slate-500\">\n            <Command className=\"h-3.5 w-3.5\" />\n            <span>{activeChips.length} context chips active</span>\n          </div>\n          <Button size=\"sm\" onClick={onSubmit} disabled={loading}>\n            {loading ? (\n              <>\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                Routing\n              </>\n            ) : (\n              <>\n                <Send className=\"mr-2 h-4 w-4\" />\n                Send\n              </>\n            )}\n          </Button>\n        </div>\n      </div>\n\n      {showCommands && (\n        <CommandRoot className=\"absolute bottom-[calc(100%+0.5rem)] left-0 right-0 overflow-hidden rounded-2xl border border-slate-800 bg-slate-950/90 text-left shadow-lg\">\n          <CommandInput placeholder=\"Type a slash command\" autoFocus />\n          <CommandList>\n            <CommandEmpty>No commands found.</CommandEmpty>\n            {SLASH_COMMANDS.map((cmd) => (\n              <CommandItem\n                key={cmd.id}\n                value={cmd.trigger}\n                onSelect={() => {\n                  onChange(cmd.insertText);\n                  setShowCommands(false);\n                }}\n              >\n                <div className=\"flex flex-col\">\n                  <span className=\"text-sm font-medium text-slate-100\">\n                    {cmd.trigger}\n                  </span>\n                  <span className=\"text-xs text-slate-400\">{cmd.description}</span>\n                </div>\n              </CommandItem>\n            ))}\n          </CommandList>\n        </CommandRoot>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 890, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/skeleton.tsx"],"sourcesContent":["import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n"],"names":[],"mappings":";;;;AAAA;;;AAEA,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OACkC;IACrC,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,qCAAqC;QAClD,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 914, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG1B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,4DACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,sDACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 995, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/assistant/ActionBar.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Loader2 } from \"lucide-react\";\nimport type { Action } from \"@/lib/assistant/types\";\n\nconst ACTION_LABELS: Record<string, string> = {\n  accept: \"Accept\",\n  schedule: \"Schedule\",\n  simulate: \"Simulate\",\n  nudge: \"Nudge\",\n  open: \"Open in…\",\n};\n\nexport function ActionBar({\n  actions,\n  onAction,\n}: {\n  actions?: Action[];\n  onAction?: (action: Action) => Promise<void> | void;\n}) {\n  const [loadingId, setLoadingId] = useState<string | null>(null);\n\n  if (!actions?.length) return null;\n\n  return (\n    <div className=\"flex flex-wrap gap-2\">\n      {actions.map((action) => (\n        <Button\n          key={action.id}\n          size=\"sm\"\n          variant={action.type === \"accept\" ? \"default\" : \"secondary\"}\n          disabled={action.disabled || loadingId === action.id}\n          onClick={async () => {\n            if (!onAction) return;\n            setLoadingId(action.id);\n            await onAction(action);\n            setLoadingId(null);\n          }}\n        >\n          {loadingId === action.id ? (\n            <Loader2 className=\"h-4 w-4 animate-spin\" />\n          ) : (\n            action.label ?? ACTION_LABELS[action.type] ?? \"Run\"\n          )}\n        </Button>\n      ))}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;;AAOA,MAAM,gBAAwC;IAC5C,QAAQ;IACR,UAAU;IACV,UAAU;IACV,OAAO;IACP,MAAM;AACR;AAEO,SAAS,UAAU,EACxB,OAAO,EACP,QAAQ,EAIT;IACC,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAE1D,IAAI,CAAC,SAAS,QAAQ,OAAO;IAE7B,qBACE,8OAAC;QAAI,WAAU;kBACZ,QAAQ,GAAG,CAAC,CAAC,uBACZ,8OAAC,kIAAA,CAAA,SAAM;gBAEL,MAAK;gBACL,SAAS,OAAO,IAAI,KAAK,WAAW,YAAY;gBAChD,UAAU,OAAO,QAAQ,IAAI,cAAc,OAAO,EAAE;gBACpD,SAAS;oBACP,IAAI,CAAC,UAAU;oBACf,aAAa,OAAO,EAAE;oBACtB,MAAM,SAAS;oBACf,aAAa;gBACf;0BAEC,cAAc,OAAO,EAAE,iBACtB,8OAAC,iNAAA,CAAA,UAAO;oBAAC,WAAU;;;;;2BAEnB,OAAO,KAAK,IAAI,aAAa,CAAC,OAAO,IAAI,CAAC,IAAI;eAd3C,OAAO,EAAE;;;;;;;;;;AAoBxB","debugId":null}},
    {"offset": {"line": 1053, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/assistant/BriefingCard.tsx"],"sourcesContent":["\"use client\";\n\nimport { TrendingDown, TrendingUp, Minus } from \"lucide-react\";\nimport type { BriefingSection, Action } from \"@/lib/assistant/types\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ActionBar } from \"./ActionBar\";\n\nfunction TrendIcon({ trend }: { trend?: \"up\" | \"down\" | \"flat\" }) {\n  if (trend === \"up\") return <TrendingUp className=\"h-4 w-4 text-emerald-400\" />;\n  if (trend === \"down\") return <TrendingDown className=\"h-4 w-4 text-rose-400\" />;\n  return <Minus className=\"h-4 w-4 text-slate-400\" />;\n}\n\nexport function BriefingCard({\n  sections,\n  onAction,\n}: {\n  sections: BriefingSection[];\n  onAction?: (action: Action) => void;\n}) {\n  return (\n    <Card className=\"border-slate-800 bg-slate-900/60\">\n      <CardHeader>\n        <CardTitle className=\"flex items-center justify-between text-sm text-slate-200\">\n          Morning briefing\n          <Badge variant=\"secondary\" className=\"bg-slate-800 text-slate-200\">\n            Structured\n          </Badge>\n        </CardTitle>\n      </CardHeader>\n      <CardContent className=\"space-y-6\">\n        {sections.map((section) => (\n          <div key={section.id} className=\"space-y-2 rounded-2xl border border-slate-800/80 p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-semibold text-slate-100\">{section.title}</p>\n                {section.description && (\n                  <p className=\"text-xs text-slate-400\">{section.description}</p>\n                )}\n              </div>\n              <div className=\"flex items-center gap-2 text-sm font-medium text-slate-200\">\n                {section.kpi && <span>{section.kpi}</span>}\n                <TrendIcon trend={section.trend} />\n              </div>\n            </div>\n            {section.insight && (\n              <p className=\"rounded-lg bg-slate-950/60 p-3 text-xs text-slate-300\">\n                {section.insight}\n              </p>\n            )}\n            <ActionBar\n              actions={section.actions}\n              onAction={(action) => onAction?.(action)}\n            />\n          </div>\n        ))}\n      </CardContent>\n    </Card>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AAAA;AAAA;AAEA;AACA;AACA;AANA;;;;;;AAQA,SAAS,UAAU,EAAE,KAAK,EAAsC;IAC9D,IAAI,UAAU,MAAM,qBAAO,8OAAC,kNAAA,CAAA,aAAU;QAAC,WAAU;;;;;;IACjD,IAAI,UAAU,QAAQ,qBAAO,8OAAC,sNAAA,CAAA,eAAY;QAAC,WAAU;;;;;;IACrD,qBAAO,8OAAC,oMAAA,CAAA,QAAK;QAAC,WAAU;;;;;;AAC1B;AAEO,SAAS,aAAa,EAC3B,QAAQ,EACR,QAAQ,EAIT;IACC,qBACE,8OAAC,gIAAA,CAAA,OAAI;QAAC,WAAU;;0BACd,8OAAC,gIAAA,CAAA,aAAU;0BACT,cAAA,8OAAC,gIAAA,CAAA,YAAS;oBAAC,WAAU;;wBAA2D;sCAE9E,8OAAC,iIAAA,CAAA,QAAK;4BAAC,SAAQ;4BAAY,WAAU;sCAA8B;;;;;;;;;;;;;;;;;0BAKvE,8OAAC,gIAAA,CAAA,cAAW;gBAAC,WAAU;0BACpB,SAAS,GAAG,CAAC,CAAC,wBACb,8OAAC;wBAAqB,WAAU;;0CAC9B,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;;0DACC,8OAAC;gDAAE,WAAU;0DAAwC,QAAQ,KAAK;;;;;;4CACjE,QAAQ,WAAW,kBAClB,8OAAC;gDAAE,WAAU;0DAA0B,QAAQ,WAAW;;;;;;;;;;;;kDAG9D,8OAAC;wCAAI,WAAU;;4CACZ,QAAQ,GAAG,kBAAI,8OAAC;0DAAM,QAAQ,GAAG;;;;;;0DAClC,8OAAC;gDAAU,OAAO,QAAQ,KAAK;;;;;;;;;;;;;;;;;;4BAGlC,QAAQ,OAAO,kBACd,8OAAC;gCAAE,WAAU;0CACV,QAAQ,OAAO;;;;;;0CAGpB,8OAAC,4IAAA,CAAA,YAAS;gCACR,SAAS,QAAQ,OAAO;gCACxB,UAAU,CAAC,SAAW,WAAW;;;;;;;uBApB3B,QAAQ,EAAE;;;;;;;;;;;;;;;;AA2B9B","debugId":null}},
    {"offset": {"line": 1222, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/assistant/InsightCard.tsx"],"sourcesContent":["\"use client\";\n\nimport { AlertCircle, Lightbulb, ShieldAlert } from \"lucide-react\";\nimport type { InsightCardPayload, Action } from \"@/lib/assistant/types\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ActionBar } from \"./ActionBar\";\n\nconst ICONS = {\n  info: Lightbulb,\n  warn: AlertCircle,\n  risk: ShieldAlert,\n};\n\nconst BADGE_VARIANTS: Record<InsightCardPayload[\"severity\"], string> = {\n  info: \"bg-sky-500/20 text-sky-200\",\n  warn: \"bg-amber-500/20 text-amber-200\",\n  risk: \"bg-rose-500/20 text-rose-200\",\n};\n\nexport function InsightCard({ card, onAction }: { card: InsightCardPayload; onAction?: (action: Action) => void }) {\n  const Icon = ICONS[card.severity] ?? Lightbulb;\n  return (\n    <Card className=\"border-slate-800 bg-slate-900/60\">\n      <CardHeader className=\"flex flex-row items-center justify-between space-y-0\">\n        <CardTitle className=\"flex items-center gap-2 text-sm text-slate-100\">\n          <Icon className=\"h-4 w-4\" />\n          {card.title}\n        </CardTitle>\n        <Badge className={BADGE_VARIANTS[card.severity]}> {card.severity.toUpperCase()} </Badge>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        <p className=\"text-sm text-slate-300\">{card.detail}</p>\n        <ActionBar actions={card.actions} onAction={(action) => onAction?.(action)} />\n      </CardContent>\n    </Card>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AAAA;AAAA;AAEA;AACA;AACA;AANA;;;;;;AAQA,MAAM,QAAQ;IACZ,MAAM,4MAAA,CAAA,YAAS;IACf,MAAM,oNAAA,CAAA,cAAW;IACjB,MAAM,oNAAA,CAAA,cAAW;AACnB;AAEA,MAAM,iBAAiE;IACrE,MAAM;IACN,MAAM;IACN,MAAM;AACR;AAEO,SAAS,YAAY,EAAE,IAAI,EAAE,QAAQ,EAAqE;IAC/G,MAAM,OAAO,KAAK,CAAC,KAAK,QAAQ,CAAC,IAAI,4MAAA,CAAA,YAAS;IAC9C,qBACE,8OAAC,gIAAA,CAAA,OAAI;QAAC,WAAU;;0BACd,8OAAC,gIAAA,CAAA,aAAU;gBAAC,WAAU;;kCACpB,8OAAC,gIAAA,CAAA,YAAS;wBAAC,WAAU;;0CACnB,8OAAC;gCAAK,WAAU;;;;;;4BACf,KAAK,KAAK;;;;;;;kCAEb,8OAAC,iIAAA,CAAA,QAAK;wBAAC,WAAW,cAAc,CAAC,KAAK,QAAQ,CAAC;;4BAAE;4BAAE,KAAK,QAAQ,CAAC,WAAW;4BAAG;;;;;;;;;;;;;0BAEjF,8OAAC,gIAAA,CAAA,cAAW;gBAAC,WAAU;;kCACrB,8OAAC;wBAAE,WAAU;kCAA0B,KAAK,MAAM;;;;;;kCAClD,8OAAC,4IAAA,CAAA,YAAS;wBAAC,SAAS,KAAK,OAAO;wBAAE,UAAU,CAAC,SAAW,WAAW;;;;;;;;;;;;;;;;;;AAI3E","debugId":null}},
    {"offset": {"line": 1329, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/assistant/DecisionCard.tsx"],"sourcesContent":["\"use client\";\n\nimport { CheckCircle2 } from \"lucide-react\";\nimport type { DecisionOption } from \"@/lib/assistant/types\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\n\nexport function DecisionCard({\n  title,\n  options,\n  onSelect,\n}: {\n  title: string;\n  options: DecisionOption[];\n  onSelect?: (option: DecisionOption) => void;\n}) {\n  return (\n    <Card className=\"border-slate-800 bg-slate-900/60\">\n      <CardHeader>\n        <CardTitle className=\"text-sm text-slate-200\">{title}</CardTitle>\n      </CardHeader>\n      <CardContent className=\"space-y-3\">\n        {options.map((option) => (\n          <div\n            key={option.id}\n            className=\"flex items-center justify-between rounded-2xl border border-slate-800/70 bg-slate-950/60 p-4\"\n          >\n            <div className=\"space-y-1\">\n              <div className=\"flex items-center gap-2\">\n                <p className=\"text-sm font-medium text-slate-100\">{option.label}</p>\n                {option.recommended && (\n                  <span className=\"flex items-center gap-1 rounded-full bg-emerald-500/20 px-2 py-0.5 text-[10px] font-semibold uppercase tracking-wide text-emerald-200\">\n                    <CheckCircle2 className=\"h-3 w-3\" />\n                    Recommended\n                  </span>\n                )}\n              </div>\n              {option.description && (\n                <p className=\"text-xs text-slate-400\">{option.description}</p>\n              )}\n            </div>\n            <Button size=\"sm\" onClick={() => onSelect?.(option)}>\n              {option.action.label || \"Select\"}\n            </Button>\n          </div>\n        ))}\n      </CardContent>\n    </Card>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AAEA;AACA;AALA;;;;;AAOO,SAAS,aAAa,EAC3B,KAAK,EACL,OAAO,EACP,QAAQ,EAKT;IACC,qBACE,8OAAC,gIAAA,CAAA,OAAI;QAAC,WAAU;;0BACd,8OAAC,gIAAA,CAAA,aAAU;0BACT,cAAA,8OAAC,gIAAA,CAAA,YAAS;oBAAC,WAAU;8BAA0B;;;;;;;;;;;0BAEjD,8OAAC,gIAAA,CAAA,cAAW;gBAAC,WAAU;0BACpB,QAAQ,GAAG,CAAC,CAAC,uBACZ,8OAAC;wBAEC,WAAU;;0CAEV,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAE,WAAU;0DAAsC,OAAO,KAAK;;;;;;4CAC9D,OAAO,WAAW,kBACjB,8OAAC;gDAAK,WAAU;;kEACd,8OAAC,qNAAA,CAAA,eAAY;wDAAC,WAAU;;;;;;oDAAY;;;;;;;;;;;;;oCAKzC,OAAO,WAAW,kBACjB,8OAAC;wCAAE,WAAU;kDAA0B,OAAO,WAAW;;;;;;;;;;;;0CAG7D,8OAAC,kIAAA,CAAA,SAAM;gCAAC,MAAK;gCAAK,SAAS,IAAM,WAAW;0CACzC,OAAO,MAAM,CAAC,KAAK,IAAI;;;;;;;uBAlBrB,OAAO,EAAE;;;;;;;;;;;;;;;;AAyB1B","debugId":null}},
    {"offset": {"line": 1448, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/toggle.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport { cn } from \"@/lib/utils\";\n\ninterface ToggleProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  pressed?: boolean;\n  onPressedChange?: (pressed: boolean) => void;\n}\n\nexport const Toggle = React.forwardRef<HTMLButtonElement, ToggleProps>(\n  ({ pressed = false, onPressedChange, className, children, ...props }, ref) => {\n    return (\n      <button\n        type=\"button\"\n        ref={ref}\n        data-state={pressed ? \"on\" : \"off\"}\n        onClick={(event) => {\n          onPressedChange?.(!pressed);\n          props.onClick?.(event);\n        }}\n        className={cn(\n          \"inline-flex items-center justify-center rounded-xl px-3 py-2 text-sm font-medium transition\",\n          pressed\n            ? \"bg-cyan-500/20 text-cyan-200 ring-1 ring-cyan-500/60\"\n            : \"text-slate-300 hover:bg-slate-800/60\",\n          className,\n        )}\n        {...props}\n      >\n        {children}\n      </button>\n    );\n  },\n);\nToggle.displayName = \"Toggle\";\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AAUO,MAAM,uBAAS,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EACnC,CAAC,EAAE,UAAU,KAAK,EAAE,eAAe,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE;IACpE,qBACE,8OAAC;QACC,MAAK;QACL,KAAK;QACL,cAAY,UAAU,OAAO;QAC7B,SAAS,CAAC;YACR,kBAAkB,CAAC;YACnB,MAAM,OAAO,GAAG;QAClB;QACA,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,+FACA,UACI,yDACA,wCACJ;QAED,GAAG,KAAK;kBAER;;;;;;AAGP;AAEF,OAAO,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 1483, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/assistant/RuleCard.tsx"],"sourcesContent":["\"use client\";\n\nimport { Toggle } from \"@/components/ui/toggle\";\nimport type { RuleSpec, RuleTestResult, Action } from \"@/lib/assistant/types\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\n\nexport function RuleCard({\n  rule,\n  testResult,\n  onAction,\n}: {\n  rule: RuleSpec;\n  testResult?: RuleTestResult;\n  onAction?: (action: Action) => void;\n}) {\n  return (\n    <Card className=\"border-slate-800 bg-slate-900/60\">\n      <CardHeader className=\"flex flex-row items-center justify-between space-y-0\">\n        <CardTitle className=\"text-sm text-slate-100\">{rule.name}</CardTitle>\n        <Badge variant=\"secondary\" className=\"bg-emerald-500/10 text-emerald-200\">\n          Rule enabled\n        </Badge>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        <div className=\"space-y-2 rounded-2xl border border-slate-800/70 p-4\">\n          <p className=\"text-xs uppercase tracking-wide text-slate-400\">Trigger</p>\n          <p className=\"text-sm text-slate-200\">{rule.trigger}</p>\n        </div>\n        {rule.filters && (\n          <div className=\"space-y-2 rounded-2xl border border-slate-800/70 p-4\">\n            <p className=\"text-xs uppercase tracking-wide text-slate-400\">Filters</p>\n            <div className=\"flex flex-wrap gap-2\">\n              {rule.filters.map((filter) => (\n                <Badge key={filter} variant=\"outline\" className=\"border-slate-700/60 text-slate-300\">\n                  {filter}\n                </Badge>\n              ))}\n            </div>\n          </div>\n        )}\n        <div className=\"space-y-2 rounded-2xl border border-slate-800/70 p-4\">\n          <p className=\"text-xs uppercase tracking-wide text-slate-400\">Actions</p>\n          <ul className=\"list-disc space-y-1 pl-4 text-sm text-slate-200\">\n            {rule.actions.map((action) => (\n              <li key={action}>{action}</li>\n            ))}\n          </ul>\n        </div>\n        {testResult && (\n          <div className=\"space-y-2 rounded-2xl border border-slate-800/70 p-4\">\n            <div className=\"flex items-center justify-between\">\n              <p className=\"text-xs uppercase tracking-wide text-slate-400\">Dry run</p>\n              <Badge variant=\"secondary\" className=\"bg-slate-800 text-slate-200\">\n                {testResult.matches} matches\n              </Badge>\n            </div>\n            <ul className=\"space-y-1 text-xs text-slate-300\">\n              {testResult.preview.map((item) => (\n                <li key={item.id}>• {item.summary}</li>\n              ))}\n            </ul>\n          </div>\n        )}\n        <div className=\"flex items-center justify-between\">\n          <Toggle pressed={rule.enabled} className=\"text-xs text-emerald-200\">\n            {rule.enabled ? \"Enabled\" : \"Disabled\"}\n          </Toggle>\n          <div className=\"flex gap-2\">\n            <Button\n              size=\"sm\"\n              variant=\"secondary\"\n              onClick={() =>\n                onAction?.({\n                  id: `${rule.id}-test`,\n                  label: \"Test\",\n                  type: \"simulate\",\n                  payload: { ruleId: rule.id },\n                })\n              }\n            >\n              Test\n            </Button>\n            <Button\n              size=\"sm\"\n              onClick={() =>\n                onAction?.({\n                  id: `${rule.id}-toggle`,\n                  label: rule.enabled ? \"Disable\" : \"Enable\",\n                  type: \"accept\",\n                  payload: { ruleId: rule.id, enabled: !rule.enabled },\n                })\n              }\n            >\n              {rule.enabled ? \"Disable\" : \"Enable\"}\n            </Button>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AAEA;AACA;AACA;AANA;;;;;;AAQO,SAAS,SAAS,EACvB,IAAI,EACJ,UAAU,EACV,QAAQ,EAKT;IACC,qBACE,8OAAC,gIAAA,CAAA,OAAI;QAAC,WAAU;;0BACd,8OAAC,gIAAA,CAAA,aAAU;gBAAC,WAAU;;kCACpB,8OAAC,gIAAA,CAAA,YAAS;wBAAC,WAAU;kCAA0B,KAAK,IAAI;;;;;;kCACxD,8OAAC,iIAAA,CAAA,QAAK;wBAAC,SAAQ;wBAAY,WAAU;kCAAqC;;;;;;;;;;;;0BAI5E,8OAAC,gIAAA,CAAA,cAAW;gBAAC,WAAU;;kCACrB,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAE,WAAU;0CAAiD;;;;;;0CAC9D,8OAAC;gCAAE,WAAU;0CAA0B,KAAK,OAAO;;;;;;;;;;;;oBAEpD,KAAK,OAAO,kBACX,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAE,WAAU;0CAAiD;;;;;;0CAC9D,8OAAC;gCAAI,WAAU;0CACZ,KAAK,OAAO,CAAC,GAAG,CAAC,CAAC,uBACjB,8OAAC,iIAAA,CAAA,QAAK;wCAAc,SAAQ;wCAAU,WAAU;kDAC7C;uCADS;;;;;;;;;;;;;;;;kCAOpB,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAE,WAAU;0CAAiD;;;;;;0CAC9D,8OAAC;gCAAG,WAAU;0CACX,KAAK,OAAO,CAAC,GAAG,CAAC,CAAC,uBACjB,8OAAC;kDAAiB;uCAAT;;;;;;;;;;;;;;;;oBAId,4BACC,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAE,WAAU;kDAAiD;;;;;;kDAC9D,8OAAC,iIAAA,CAAA,QAAK;wCAAC,SAAQ;wCAAY,WAAU;;4CAClC,WAAW,OAAO;4CAAC;;;;;;;;;;;;;0CAGxB,8OAAC;gCAAG,WAAU;0CACX,WAAW,OAAO,CAAC,GAAG,CAAC,CAAC,qBACvB,8OAAC;;4CAAiB;4CAAG,KAAK,OAAO;;uCAAxB,KAAK,EAAE;;;;;;;;;;;;;;;;kCAKxB,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,kIAAA,CAAA,SAAM;gCAAC,SAAS,KAAK,OAAO;gCAAE,WAAU;0CACtC,KAAK,OAAO,GAAG,YAAY;;;;;;0CAE9B,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,kIAAA,CAAA,SAAM;wCACL,MAAK;wCACL,SAAQ;wCACR,SAAS,IACP,WAAW;gDACT,IAAI,GAAG,KAAK,EAAE,CAAC,KAAK,CAAC;gDACrB,OAAO;gDACP,MAAM;gDACN,SAAS;oDAAE,QAAQ,KAAK,EAAE;gDAAC;4CAC7B;kDAEH;;;;;;kDAGD,8OAAC,kIAAA,CAAA,SAAM;wCACL,MAAK;wCACL,SAAS,IACP,WAAW;gDACT,IAAI,GAAG,KAAK,EAAE,CAAC,OAAO,CAAC;gDACvB,OAAO,KAAK,OAAO,GAAG,YAAY;gDAClC,MAAM;gDACN,SAAS;oDAAE,QAAQ,KAAK,EAAE;oDAAE,SAAS,CAAC,KAAK,OAAO;gDAAC;4CACrD;kDAGD,KAAK,OAAO,GAAG,YAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO1C","debugId":null}},
    {"offset": {"line": 1754, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAC3B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,8OAAC;QACC,MAAM;QACN,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,kYACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 1783, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/select.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1975, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/label.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,gBAAgB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACtB;AAGF,MAAM,sBAAQ,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAI3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iKAAA,CAAA,OAAmB;QAClB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iBAAiB;QAC9B,GAAG,KAAK;;;;;;AAGb,MAAM,WAAW,GAAG,iKAAA,CAAA,OAAmB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 2007, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/assistant/InlineEditor.tsx"],"sourcesContent":["\"use client\";\n\nimport { useForm, type UseFormReturn } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport type { EditorSpec } from \"@/lib/assistant/types\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\n\nexport function InlineEditor({\n  form,\n  onSubmit,\n}: {\n  form: EditorSpec;\n  onSubmit?: (values: Record<string, string | number>) => void;\n}) {\n  const schema = z.object(\n    form.fields.reduce<Record<string, z.ZodTypeAny>>((acc, field) => {\n      let validator: z.ZodTypeAny = z.string();\n      if (field.type === \"number\" || field.type === \"currency\") {\n        validator = z\n          .string()\n          .min(1, \"Required\")\n          .transform((value) => value.replace(/[^0-9.]/g, \"\"));\n      }\n      if (field.type === \"date\") {\n        validator = z.string().min(1, \"Required\");\n      }\n      acc[field.id] = validator;\n      return acc;\n    }, {}),\n  );\n\n  const formHook = useForm<Record<string, string>>({\n    resolver: zodResolver(schema),\n    defaultValues: form.fields.reduce<Record<string, string>>((acc, field) => {\n      const value = field.defaultValue ?? \"\";\n      acc[field.id] = typeof value === \"number\" ? String(value) : (value as string);\n      return acc;\n    }, {}),\n  });\n\n  return (\n    <Card className=\"border-slate-800 bg-slate-900/60\">\n      <CardHeader>\n        <CardTitle className=\"text-sm text-slate-200\">{form.title}</CardTitle>\n      </CardHeader>\n      <CardContent>\n        <form\n          className=\"space-y-4\"\n          onSubmit={formHook.handleSubmit((values) => {\n            onSubmit?.(values);\n          })}\n        >\n          {form.fields.map((field) => (\n            <div key={field.id} className=\"space-y-2\">\n              <Label className=\"text-xs uppercase tracking-wide text-slate-400\">\n                {field.label}\n              </Label>\n              {renderField(field, formHook)}\n            </div>\n          ))}\n          <div className=\"flex justify-end\">\n            <Button type=\"submit\" size=\"sm\">\n              {form.submitLabel ?? \"Save\"}\n            </Button>\n          </div>\n        </form>\n      </CardContent>\n    </Card>\n  );\n}\n\nfunction renderField(\n  field: EditorSpec[\"fields\"][number],\n  formHook: UseFormReturn<Record<string, string>>,\n) {\n  const { register, setValue } = formHook;\n  switch (field.type) {\n    case \"text\":\n      return (\n        <Textarea\n          {...register(field.id)}\n          placeholder={field.placeholder}\n          className=\"min-h-[80px] bg-slate-950/60 text-sm text-slate-100\"\n        />\n      );\n    case \"number\":\n    case \"currency\":\n      return (\n        <Input\n          {...register(field.id)}\n          placeholder={field.placeholder}\n          className=\"bg-slate-950/60 text-sm text-slate-100\"\n        />\n      );\n    case \"date\":\n      return (\n        <Input\n          type=\"date\"\n          {...register(field.id)}\n          className=\"bg-slate-950/60 text-sm text-slate-100\"\n        />\n      );\n    case \"select\":\n      return (\n        <Select\n          onValueChange={(value) => {\n            setValue(field.id, value);\n          }}\n          defaultValue={formHook.getValues(field.id)}\n        >\n          <SelectTrigger className=\"bg-slate-950/60 text-sm text-slate-100\">\n            <SelectValue placeholder={field.placeholder} />\n          </SelectTrigger>\n          <SelectContent className=\"bg-slate-900/90 text-sm text-slate-100\">\n            {field.options?.map((option) => (\n              <SelectItem key={option.value} value={option.value}>\n                {option.label}\n              </SelectItem>\n            ))}\n          </SelectContent>\n        </Select>\n      );\n    default:\n      return (\n        <Input\n          {...register(field.id)}\n          placeholder={field.placeholder}\n          className=\"bg-slate-950/60 text-sm text-slate-100\"\n        />\n      );\n  }\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAXA;;;;;;;;;;;AAaO,SAAS,aAAa,EAC3B,IAAI,EACJ,QAAQ,EAIT;IACC,MAAM,SAAS,kKAAA,CAAA,IAAC,CAAC,MAAM,CACrB,KAAK,MAAM,CAAC,MAAM,CAA+B,CAAC,KAAK;QACrD,IAAI,YAA0B,kKAAA,CAAA,IAAC,CAAC,MAAM;QACtC,IAAI,MAAM,IAAI,KAAK,YAAY,MAAM,IAAI,KAAK,YAAY;YACxD,YAAY,kKAAA,CAAA,IAAC,CACV,MAAM,GACN,GAAG,CAAC,GAAG,YACP,SAAS,CAAC,CAAC,QAAU,MAAM,OAAO,CAAC,YAAY;QACpD;QACA,IAAI,MAAM,IAAI,KAAK,QAAQ;YACzB,YAAY,kKAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;QAChC;QACA,GAAG,CAAC,MAAM,EAAE,CAAC,GAAG;QAChB,OAAO;IACT,GAAG,CAAC;IAGN,MAAM,WAAW,CAAA,GAAA,8JAAA,CAAA,UAAO,AAAD,EAA0B;QAC/C,UAAU,CAAA,GAAA,8JAAA,CAAA,cAAW,AAAD,EAAE;QACtB,eAAe,KAAK,MAAM,CAAC,MAAM,CAAyB,CAAC,KAAK;YAC9D,MAAM,QAAQ,MAAM,YAAY,IAAI;YACpC,GAAG,CAAC,MAAM,EAAE,CAAC,GAAG,OAAO,UAAU,WAAW,OAAO,SAAU;YAC7D,OAAO;QACT,GAAG,CAAC;IACN;IAEA,qBACE,8OAAC,gIAAA,CAAA,OAAI;QAAC,WAAU;;0BACd,8OAAC,gIAAA,CAAA,aAAU;0BACT,cAAA,8OAAC,gIAAA,CAAA,YAAS;oBAAC,WAAU;8BAA0B,KAAK,KAAK;;;;;;;;;;;0BAE3D,8OAAC,gIAAA,CAAA,cAAW;0BACV,cAAA,8OAAC;oBACC,WAAU;oBACV,UAAU,SAAS,YAAY,CAAC,CAAC;wBAC/B,WAAW;oBACb;;wBAEC,KAAK,MAAM,CAAC,GAAG,CAAC,CAAC,sBAChB,8OAAC;gCAAmB,WAAU;;kDAC5B,8OAAC,iIAAA,CAAA,QAAK;wCAAC,WAAU;kDACd,MAAM,KAAK;;;;;;oCAEb,YAAY,OAAO;;+BAJZ,MAAM,EAAE;;;;;sCAOpB,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC,kIAAA,CAAA,SAAM;gCAAC,MAAK;gCAAS,MAAK;0CACxB,KAAK,WAAW,IAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOnC;AAEA,SAAS,YACP,KAAmC,EACnC,QAA+C;IAE/C,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,GAAG;IAC/B,OAAQ,MAAM,IAAI;QAChB,KAAK;YACH,qBACE,8OAAC,oIAAA,CAAA,WAAQ;gBACN,GAAG,SAAS,MAAM,EAAE,CAAC;gBACtB,aAAa,MAAM,WAAW;gBAC9B,WAAU;;;;;;QAGhB,KAAK;QACL,KAAK;YACH,qBACE,8OAAC,iIAAA,CAAA,QAAK;gBACH,GAAG,SAAS,MAAM,EAAE,CAAC;gBACtB,aAAa,MAAM,WAAW;gBAC9B,WAAU;;;;;;QAGhB,KAAK;YACH,qBACE,8OAAC,iIAAA,CAAA,QAAK;gBACJ,MAAK;gBACJ,GAAG,SAAS,MAAM,EAAE,CAAC;gBACtB,WAAU;;;;;;QAGhB,KAAK;YACH,qBACE,8OAAC,kIAAA,CAAA,SAAM;gBACL,eAAe,CAAC;oBACd,SAAS,MAAM,EAAE,EAAE;gBACrB;gBACA,cAAc,SAAS,SAAS,CAAC,MAAM,EAAE;;kCAEzC,8OAAC,kIAAA,CAAA,gBAAa;wBAAC,WAAU;kCACvB,cAAA,8OAAC,kIAAA,CAAA,cAAW;4BAAC,aAAa,MAAM,WAAW;;;;;;;;;;;kCAE7C,8OAAC,kIAAA,CAAA,gBAAa;wBAAC,WAAU;kCACtB,MAAM,OAAO,EAAE,IAAI,CAAC,uBACnB,8OAAC,kIAAA,CAAA,aAAU;gCAAoB,OAAO,OAAO,KAAK;0CAC/C,OAAO,KAAK;+BADE,OAAO,KAAK;;;;;;;;;;;;;;;;QAOvC;YACE,qBACE,8OAAC,iIAAA,CAAA,QAAK;gBACH,GAAG,SAAS,MAAM,EAAE,CAAC;gBACtB,aAAa,MAAM,WAAW;gBAC9B,WAAU;;;;;;IAGlB;AACF","debugId":null}},
    {"offset": {"line": 2221, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/assistant/ExecLog.tsx"],"sourcesContent":["\"use client\";\n\nimport { cn } from \"@/lib/utils\";\nimport type { ExecLogEntry } from \"@/lib/assistant/types\";\nimport { Button } from \"@/components/ui/button\";\nimport { Loader2, RefreshCcw, RotateCcw } from \"lucide-react\";\n\nexport function ExecLog({\n  log,\n  onUndo,\n  onRetry,\n}: {\n  log: ExecLogEntry;\n  onUndo?: (log: ExecLogEntry) => void;\n  onRetry?: (log: ExecLogEntry) => void;\n}) {\n  return (\n    <div\n      className={cn(\n        \"flex items-center gap-2 rounded-full border px-3 py-1 text-xs\",\n        log.state === \"success\" && \"border-emerald-500/40 bg-emerald-500/10 text-emerald-200\",\n        log.state === \"error\" && \"border-red-500/40 bg-red-500/10 text-red-200\",\n        log.state === \"running\" && \"border-sky-500/40 bg-sky-500/10 text-sky-200\",\n        log.state === \"queued\" && \"border-amber-500/40 bg-amber-500/10 text-amber-200\",\n      )}\n    >\n      {log.state === \"running\" && <Loader2 className=\"h-3.5 w-3.5 animate-spin\" />}\n      {log.state === \"error\" && <RefreshCcw className=\"h-3.5 w-3.5\" />}\n      <span className=\"font-medium capitalize\">{log.state}</span>\n      {log.error && <span className=\"text-xs text-red-100/80\">{log.error}</span>}\n      {log.undoable && log.state === \"success\" && (\n        <Button\n          variant=\"ghost\"\n          size=\"icon\"\n          className=\"h-6 w-6 text-emerald-200 hover:text-emerald-100\"\n          onClick={() => onUndo?.(log)}\n        >\n          <RotateCcw className=\"h-3 w-3\" />\n        </Button>\n      )}\n      {log.state === \"error\" && (\n        <Button\n          variant=\"ghost\"\n          size=\"icon\"\n          className=\"h-6 w-6 text-red-200 hover:text-red-100\"\n          onClick={() => onRetry?.(log)}\n        >\n          <RefreshCcw className=\"h-3 w-3\" />\n        </Button>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AAEA;AACA;AAAA;AAAA;AALA;;;;;AAOO,SAAS,QAAQ,EACtB,GAAG,EACH,MAAM,EACN,OAAO,EAKR;IACC,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,iEACA,IAAI,KAAK,KAAK,aAAa,4DAC3B,IAAI,KAAK,KAAK,WAAW,gDACzB,IAAI,KAAK,KAAK,aAAa,gDAC3B,IAAI,KAAK,KAAK,YAAY;;YAG3B,IAAI,KAAK,KAAK,2BAAa,8OAAC,iNAAA,CAAA,UAAO;gBAAC,WAAU;;;;;;YAC9C,IAAI,KAAK,KAAK,yBAAW,8OAAC,kNAAA,CAAA,aAAU;gBAAC,WAAU;;;;;;0BAChD,8OAAC;gBAAK,WAAU;0BAA0B,IAAI,KAAK;;;;;;YAClD,IAAI,KAAK,kBAAI,8OAAC;gBAAK,WAAU;0BAA2B,IAAI,KAAK;;;;;;YACjE,IAAI,QAAQ,IAAI,IAAI,KAAK,KAAK,2BAC7B,8OAAC,kIAAA,CAAA,SAAM;gBACL,SAAQ;gBACR,MAAK;gBACL,WAAU;gBACV,SAAS,IAAM,SAAS;0BAExB,cAAA,8OAAC,gNAAA,CAAA,YAAS;oBAAC,WAAU;;;;;;;;;;;YAGxB,IAAI,KAAK,KAAK,yBACb,8OAAC,kIAAA,CAAA,SAAM;gBACL,SAAQ;gBACR,MAAK;gBACL,WAAU;gBACV,SAAS,IAAM,UAAU;0BAEzB,cAAA,8OAAC,kNAAA,CAAA,aAAU;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAKhC","debugId":null}},
    {"offset": {"line": 2316, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/assistant/Message.tsx"],"sourcesContent":["\"use client\";\n\nimport { cn } from \"@/lib/utils\";\nimport type { AssistantMessage, Action, ExecLogEntry } from \"@/lib/assistant/types\";\nimport { BriefingCard } from \"./BriefingCard\";\nimport { InsightCard } from \"./InsightCard\";\nimport { DecisionCard } from \"./DecisionCard\";\nimport { RuleCard } from \"./RuleCard\";\nimport { InlineEditor } from \"./InlineEditor\";\nimport { ActionBar } from \"./ActionBar\";\nimport { ExecLog } from \"./ExecLog\";\n\nexport function Message({\n  message,\n  onAction,\n  execLogs,\n}: {\n  message: AssistantMessage;\n  onAction?: (message: AssistantMessage, action: Action) => void;\n  execLogs?: Record<string, ExecLogEntry>;\n}) {\n  const alignment = message.role === \"user\" ? \"items-end\" : \"items-start\";\n  const bubbleClass = message.role === \"user\"\n    ? \"bg-gradient-to-br from-sky-500/80 to-blue-500/60 text-white\"\n    : \"bg-slate-900/70 text-slate-200\";\n\n  const messageActions = extractActions(message);\n  const logs = messageActions\n    .map((action) => (action ? execLogs?.[action.id] : undefined))\n    .filter(Boolean) as ExecLogEntry[];\n\n  return (\n    <div className={cn(\"flex w-full\", alignment)}>\n      <div className=\"max-w-2xl space-y-3\">\n        {message.role === \"user\" && (\n          <div className={cn(\"rounded-3xl px-4 py-3 text-sm shadow-lg\", bubbleClass)}>\n            {message.content}\n          </div>\n        )}\n\n        {message.role === \"assistant\" && message.kind === \"text\" && (\n          <div className={cn(\"rounded-3xl px-4 py-3 text-sm shadow-lg\", bubbleClass)}>\n            {message.content}\n            <div className=\"mt-3\">\n              <ActionBar\n                actions={message.actions}\n                onAction={(action) => onAction?.(message, action)}\n              />\n            </div>\n          </div>\n        )}\n\n        {message.role === \"assistant\" && message.kind === \"briefing\" && (\n          <BriefingCard\n            sections={message.sections}\n            onAction={(action) => onAction?.(message, action)}\n          />\n        )}\n\n        {message.role === \"assistant\" && message.kind === \"insight\" && (\n          <InsightCard\n            card={message.card}\n            onAction={(action) => onAction?.(message, action)}\n          />\n        )}\n\n        {message.role === \"assistant\" && message.kind === \"decision\" && (\n          <DecisionCard\n            title={message.title}\n            options={message.options}\n            onSelect={(option) => onAction?.(message, option.action)}\n          />\n        )}\n\n        {message.role === \"assistant\" && message.kind === \"rule\" && (\n          <RuleCard\n            rule={message.rule}\n            testResult={message.testResult}\n            onAction={(action) => onAction?.(message, action)}\n          />\n        )}\n\n        {message.role === \"assistant\" && message.kind === \"editor\" && (\n          <InlineEditor\n            form={message.form}\n            onSubmit={(values) =>\n              onAction?.(message, {\n                id: `${message.id}-editor-submit`,\n                label: \"Save\",\n                type: \"accept\",\n                payload: { values, tool: \"transaction\" },\n              })\n            }\n          />\n        )}\n\n        {logs.length > 0 && (\n          <div className=\"flex flex-wrap gap-2\">\n            {logs.map((log) => (\n              <ExecLog key={`${log.actionId}-${log.id}`} log={log} />\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nfunction extractActions(message: AssistantMessage): Action[] {\n  if (message.role !== \"assistant\") return [];\n  if (message.kind === \"text\") return message.actions ?? [];\n  if (message.kind === \"briefing\") return message.sections.flatMap((section) => section.actions ?? []);\n  if (message.kind === \"insight\") return message.card.actions ?? [];\n  if (message.kind === \"decision\") return message.options.map((option) => option.action);\n  if (message.kind === \"rule\")\n    return [\n      {\n        id: `${message.rule.id}-test`,\n        label: \"Test\",\n        type: \"simulate\",\n      },\n      {\n        id: `${message.rule.id}-toggle`,\n        label: message.rule.enabled ? \"Disable\" : \"Enable\",\n        type: \"accept\",\n      },\n    ];\n  if (message.kind === \"editor\")\n    return [\n      {\n        id: `${message.id}-editor-submit`,\n        label: message.form.submitLabel ?? \"Save\",\n        type: \"accept\",\n      },\n    ];\n  return [];\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2490, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/assistant/Thread.tsx"],"sourcesContent":["\"use client\";\n\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport type { AssistantMessage, ExecLogEntry } from \"@/lib/assistant/types\";\nimport { Message } from \"./Message\";\n\nexport function Thread({\n  messages,\n  loading,\n  onAction,\n  execLogs,\n}: {\n  messages: AssistantMessage[];\n  loading?: boolean;\n  onAction?: (message: AssistantMessage, action: import(\"@/lib/assistant/types\").Action) => void;\n  execLogs?: Record<string, ExecLogEntry>;\n}) {\n  return (\n    <div className=\"flex h-full flex-col\">\n      <ScrollArea className=\"flex-1\">\n        <div className=\"flex flex-col gap-4 p-4\">\n          <AnimatePresence initial={false}>\n            {messages.map((message) => (\n              <motion.div\n                key={message.id}\n                initial={{ opacity: 0, y: 8 }}\n                animate={{ opacity: 1, y: 0 }}\n                exit={{ opacity: 0, y: -8 }}\n                transition={{ duration: 0.2 }}\n              >\n                <Message message={message} onAction={onAction} execLogs={execLogs} />\n              </motion.div>\n            ))}\n          </AnimatePresence>\n\n          {loading && (\n            <div className=\"flex flex-col gap-3\">\n              <Skeleton className=\"h-5 w-1/3 bg-slate-800/80\" />\n              <Skeleton className=\"h-16 rounded-2xl bg-slate-900/60\" />\n              <Skeleton className=\"h-4 w-1/4 bg-slate-800/70\" />\n            </div>\n          )}\n        </div>\n      </ScrollArea>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AAAA;AACA;AACA;AAEA;AANA;;;;;;AAQO,SAAS,OAAO,EACrB,QAAQ,EACR,OAAO,EACP,QAAQ,EACR,QAAQ,EAMT;IACC,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC,0IAAA,CAAA,aAAU;YAAC,WAAU;sBACpB,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,yLAAA,CAAA,kBAAe;wBAAC,SAAS;kCACvB,SAAS,GAAG,CAAC,CAAC,wBACb,8OAAC,0LAAA,CAAA,SAAM,CAAC,GAAG;gCAET,SAAS;oCAAE,SAAS;oCAAG,GAAG;gCAAE;gCAC5B,SAAS;oCAAE,SAAS;oCAAG,GAAG;gCAAE;gCAC5B,MAAM;oCAAE,SAAS;oCAAG,GAAG,CAAC;gCAAE;gCAC1B,YAAY;oCAAE,UAAU;gCAAI;0CAE5B,cAAA,8OAAC,0IAAA,CAAA,UAAO;oCAAC,SAAS;oCAAS,UAAU;oCAAU,UAAU;;;;;;+BANpD,QAAQ,EAAE;;;;;;;;;;oBAWpB,yBACC,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,oIAAA,CAAA,WAAQ;gCAAC,WAAU;;;;;;0CACpB,8OAAC,oIAAA,CAAA,WAAQ;gCAAC,WAAU;;;;;;0CACpB,8OAAC,oIAAA,CAAA,WAAQ;gCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOlC","debugId":null}},
    {"offset": {"line": 2603, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/assistant/mode-toggle.tsx"],"sourcesContent":["\"use client\";\n\nimport { useMemo } from \"react\";\nimport { useAssistantContext } from \"@/lib/assistant/context\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\n\nconst MODES = [\n  { value: \"brief\", label: \"Brief\" },\n  { value: \"capture\", label: \"Capture\" },\n  { value: \"plan\", label: \"Plan\" },\n  { value: \"coach\", label: \"Coach\" },\n] as const;\n\nexport function ModeToggle() {\n  const { mode, setMode } = useAssistantContext();\n  const placeholder = useMemo(() => MODES.find((item) => item.value === mode)?.label ?? \"Brief\", [mode]);\n  return (\n    <Select value={mode} onValueChange={(value) => setMode(value as typeof mode)}>\n      <SelectTrigger className=\"w-full bg-slate-900/70 text-slate-200\">\n        <SelectValue placeholder={placeholder} />\n      </SelectTrigger>\n      <SelectContent className=\"bg-slate-900/90 text-slate-100\">\n        {MODES.map((item) => (\n          <SelectItem key={item.value} value={item.value}>\n            {item.label}\n          </SelectItem>\n        ))}\n      </SelectContent>\n    </Select>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;;AAMA,MAAM,QAAQ;IACZ;QAAE,OAAO;QAAS,OAAO;IAAQ;IACjC;QAAE,OAAO;QAAW,OAAO;IAAU;IACrC;QAAE,OAAO;QAAQ,OAAO;IAAO;IAC/B;QAAE,OAAO;QAAS,OAAO;IAAQ;CAClC;AAEM,SAAS;IACd,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,CAAA,GAAA,mIAAA,CAAA,sBAAmB,AAAD;IAC5C,MAAM,cAAc,CAAA,GAAA,qMAAA,CAAA,UAAO,AAAD,EAAE,IAAM,MAAM,IAAI,CAAC,CAAC,OAAS,KAAK,KAAK,KAAK,OAAO,SAAS,SAAS;QAAC;KAAK;IACrG,qBACE,8OAAC,kIAAA,CAAA,SAAM;QAAC,OAAO;QAAM,eAAe,CAAC,QAAU,QAAQ;;0BACrD,8OAAC,kIAAA,CAAA,gBAAa;gBAAC,WAAU;0BACvB,cAAA,8OAAC,kIAAA,CAAA,cAAW;oBAAC,aAAa;;;;;;;;;;;0BAE5B,8OAAC,kIAAA,CAAA,gBAAa;gBAAC,WAAU;0BACtB,MAAM,GAAG,CAAC,CAAC,qBACV,8OAAC,kIAAA,CAAA,aAAU;wBAAkB,OAAO,KAAK,KAAK;kCAC3C,KAAK,KAAK;uBADI,KAAK,KAAK;;;;;;;;;;;;;;;;AAOrC","debugId":null}},
    {"offset": {"line": 2684, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/assistant/SidePanelCards.tsx"],"sourcesContent":["\"use client\";\n\nimport { CalendarDays, CreditCard, HeartPulse, Target, PlusCircle, Receipt, MessageCircle } from \"lucide-react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\n\nexport function SidePanelCards({\n  onQuickAction,\n}: {\n  onQuickAction?: (action: string) => void;\n}) {\n  return (\n    <ScrollArea className=\"h-full\">\n      <div className=\"flex flex-col gap-4 p-4\">\n        <ScheduleCapsule onQuickAction={onQuickAction} />\n        <BillsCapsule onQuickAction={onQuickAction} />\n        <CareCapsule onQuickAction={onQuickAction} />\n        <GoalsCapsule onQuickAction={onQuickAction} />\n        <QuickActions onQuickAction={onQuickAction} />\n        <SavedPrompts onQuickAction={onQuickAction} />\n      </div>\n    </ScrollArea>\n  );\n}\n\nfunction ScheduleCapsule({ onQuickAction }: { onQuickAction?: (action: string) => void }) {\n  return (\n    <Card className=\"border-slate-800/80 bg-slate-950/60\">\n      <CardHeader className=\"space-y-1\">\n        <div className=\"flex items-center gap-2\">\n          <CalendarDays className=\"h-4 w-4 text-slate-300\" />\n          <CardTitle className=\"text-sm text-slate-200\">Today</CardTitle>\n        </div>\n        <p className=\"text-xs text-slate-400\">Strategy standup 9:30 • Care check-in 13:00</p>\n      </CardHeader>\n      <CardContent>\n        <Button\n          size=\"sm\"\n          variant=\"secondary\"\n          className=\"text-xs\"\n          onClick={() => onQuickAction?.(\"create-event\")}\n        >\n          Add quick event\n        </Button>\n      </CardContent>\n    </Card>\n  );\n}\n\nfunction BillsCapsule({ onQuickAction }: { onQuickAction?: (action: string) => void }) {\n  return (\n    <Card className=\"border-slate-800/80 bg-slate-950/60\">\n      <CardHeader className=\"space-y-1\">\n        <div className=\"flex items-center gap-2\">\n          <CreditCard className=\"h-4 w-4 text-slate-300\" />\n          <CardTitle className=\"text-sm text-slate-200\">Bills</CardTitle>\n        </div>\n        <p className=\"text-xs text-slate-400\">5 due • 2 autopay eligible</p>\n      </CardHeader>\n      <CardContent className=\"flex flex-wrap gap-2\">\n        <Button size=\"sm\" variant=\"secondary\" className=\"text-xs\" onClick={() => onQuickAction?.(\"record-payment\")}>\n          Record payment\n        </Button>\n        <Button size=\"sm\" variant=\"secondary\" className=\"text-xs\" onClick={() => onQuickAction?.(\"schedule-bill\")}>\n          Schedule\n        </Button>\n      </CardContent>\n    </Card>\n  );\n}\n\nfunction CareCapsule({ onQuickAction }: { onQuickAction?: (action: string) => void }) {\n  return (\n    <Card className=\"border-slate-800/80 bg-slate-950/60\">\n      <CardHeader className=\"space-y-1\">\n        <div className=\"flex items-center gap-2\">\n          <HeartPulse className=\"h-4 w-4 text-slate-300\" />\n          <CardTitle className=\"text-sm text-slate-200\">Care</CardTitle>\n        </div>\n        <p className=\"text-xs text-slate-400\">Theo: Hydroxyurea refill by Wed</p>\n      </CardHeader>\n      <CardContent>\n        <Button size=\"sm\" variant=\"secondary\" className=\"text-xs\" onClick={() => onQuickAction?.(\"record-dose\")}>\n          Record dose\n        </Button>\n      </CardContent>\n    </Card>\n  );\n}\n\nfunction GoalsCapsule({ onQuickAction }: { onQuickAction?: (action: string) => void }) {\n  return (\n    <Card className=\"border-slate-800/80 bg-slate-950/60\">\n      <CardHeader className=\"space-y-1\">\n        <div className=\"flex items-center gap-2\">\n          <Target className=\"h-4 w-4 text-slate-300\" />\n          <CardTitle className=\"text-sm text-slate-200\">Goals</CardTitle>\n        </div>\n        <p className=\"text-xs text-slate-400\">Emergency fund 78% • Tuition 44%</p>\n      </CardHeader>\n      <CardContent>\n        <Button size=\"sm\" variant=\"secondary\" className=\"text-xs\" onClick={() => onQuickAction?.(\"fund-goal\")}>\n          Fund goal\n        </Button>\n      </CardContent>\n    </Card>\n  );\n}\n\nfunction QuickActions({ onQuickAction }: { onQuickAction?: (action: string) => void }) {\n  const actions = [\n    { icon: PlusCircle, label: \"Add transaction\", action: \"add-transaction\" },\n    { icon: Receipt, label: \"Scan receipt\", action: \"scan-receipt\" },\n    { icon: CalendarDays, label: \"Create event\", action: \"create-event\" },\n    { icon: CreditCard, label: \"Record payment\", action: \"record-payment\" },\n    { icon: MessageCircle, label: \"Send nudge\", action: \"send-nudge\" },\n  ];\n  return (\n    <Card className=\"border-slate-800/80 bg-slate-950/60\">\n      <CardHeader>\n        <CardTitle className=\"text-sm text-slate-200\">Quick actions</CardTitle>\n      </CardHeader>\n      <CardContent className=\"flex flex-wrap gap-2\">\n        {actions.map(({ icon: Icon, label, action }) => (\n          <Button\n            key={action}\n            size=\"sm\"\n            variant=\"secondary\"\n            className=\"flex items-center gap-2 text-xs\"\n            onClick={() => onQuickAction?.(action)}\n          >\n            <Icon className=\"h-3.5 w-3.5\" />\n            {label}\n          </Button>\n        ))}\n      </CardContent>\n    </Card>\n  );\n}\n\nfunction SavedPrompts({ onQuickAction }: { onQuickAction?: (action: string) => void }) {\n  const prompts = [\n    \"Summarize anomalies (7d)\",\n    \"Draft evening brief\",\n    \"Plan payday routine\",\n  ];\n  return (\n    <Card className=\"border-slate-800/80 bg-slate-950/60\">\n      <CardHeader>\n        <CardTitle className=\"text-sm text-slate-200\">Saved prompts</CardTitle>\n      </CardHeader>\n      <CardContent className=\"flex flex-col gap-2\">\n        {prompts.map((prompt) => (\n          <Button\n            key={prompt}\n            size=\"sm\"\n            variant=\"ghost\"\n            className=\"justify-start text-xs text-slate-300 hover:bg-slate-900/80\"\n            onClick={() => onQuickAction?.(prompt)}\n          >\n            {prompt}\n          </Button>\n        ))}\n      </CardContent>\n    </Card>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3187, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/assistant/SidePanel.tsx"],"sourcesContent":["\"use client\";\n\nimport { useMemo } from \"react\";\nimport { useAssistantContext } from \"@/lib/assistant/context\";\nimport { ModeToggle } from \"./mode-toggle\";\nimport { SidePanelCards } from \"./SidePanelCards\";\n\nexport function SidePanel({ onQuickAction }: { onQuickAction?: (action: string) => void }) {\n  const { mode, chips } = useAssistantContext();\n  const activeChips = useMemo(() => chips.filter((chip) => chip.active), [chips]);\n  return (\n    <div className=\"flex h-full flex-col gap-4 rounded-3xl border border-slate-900/60 bg-slate-950/70 p-4\">\n      <div className=\"flex flex-col gap-2\">\n        <p className=\"text-xs uppercase tracking-wide text-slate-500\">Mode</p>\n        <ModeToggle />\n        <p className=\"text-xs text-slate-400\">{activeChips.length} session constraints in {mode} mode</p>\n      </div>\n      <div className=\"flex-1 overflow-hidden\">\n        <SidePanelCards onQuickAction={onQuickAction} />\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOO,SAAS,UAAU,EAAE,aAAa,EAAgD;IACvF,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,mIAAA,CAAA,sBAAmB,AAAD;IAC1C,MAAM,cAAc,CAAA,GAAA,qMAAA,CAAA,UAAO,AAAD,EAAE,IAAM,MAAM,MAAM,CAAC,CAAC,OAAS,KAAK,MAAM,GAAG;QAAC;KAAM;IAC9E,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAE,WAAU;kCAAiD;;;;;;kCAC9D,8OAAC,iJAAA,CAAA,aAAU;;;;;kCACX,8OAAC;wBAAE,WAAU;;4BAA0B,YAAY,MAAM;4BAAC;4BAAyB;4BAAK;;;;;;;;;;;;;0BAE1F,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,iJAAA,CAAA,iBAAc;oBAAC,eAAe;;;;;;;;;;;;;;;;;AAIvC","debugId":null}},
    {"offset": {"line": 3271, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/assistant/Modals/AttachPicker.tsx"],"sourcesContent":["\"use client\";\n\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { UploadCloud, FileText, ImageIcon } from \"lucide-react\";\n\nconst OPTIONS = [\n  { icon: UploadCloud, label: \"Upload file\", description: \"PDF, CSV, image\" },\n  { icon: FileText, label: \"Fetch from Vault\", description: \"Contracts, policies\" },\n  { icon: ImageIcon, label: \"Scan receipt\", description: \"Open camera\" },\n];\n\nexport function AttachPicker({\n  open,\n  onOpenChange,\n  onSelect,\n}: {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onSelect?: (label: string) => void;\n}) {\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-sm border-slate-800 bg-slate-950/90\">\n        <DialogHeader>\n          <DialogTitle className=\"text-slate-100\">Attach</DialogTitle>\n        </DialogHeader>\n        <div className=\"flex flex-col gap-2\">\n          {OPTIONS.map(({ icon: Icon, label, description }) => (\n            <Button\n              key={label}\n              variant=\"ghost\"\n              className=\"flex h-auto flex-col items-start gap-1 rounded-2xl border border-slate-800/60 bg-slate-900/40 px-4 py-3 text-left text-sm text-slate-200 hover:bg-slate-900/70\"\n              onClick={() => onSelect?.(label)}\n            >\n              <div className=\"flex items-center gap-2\">\n                <Icon className=\"h-4 w-4\" />\n                {label}\n              </div>\n              <span className=\"text-xs text-slate-400\">{description}</span>\n            </Button>\n          ))}\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAAA;AAAA;AAJA;;;;;AAMA,MAAM,UAAU;IACd;QAAE,MAAM,oNAAA,CAAA,cAAW;QAAE,OAAO;QAAe,aAAa;IAAkB;IAC1E;QAAE,MAAM,8MAAA,CAAA,WAAQ;QAAE,OAAO;QAAoB,aAAa;IAAsB;IAChF;QAAE,MAAM,wMAAA,CAAA,YAAS;QAAE,OAAO;QAAgB,aAAa;IAAc;CACtE;AAEM,SAAS,aAAa,EAC3B,IAAI,EACJ,YAAY,EACZ,QAAQ,EAKT;IACC,qBACE,8OAAC,kIAAA,CAAA,SAAM;QAAC,MAAM;QAAM,cAAc;kBAChC,cAAA,8OAAC,kIAAA,CAAA,gBAAa;YAAC,WAAU;;8BACvB,8OAAC,kIAAA,CAAA,eAAY;8BACX,cAAA,8OAAC,kIAAA,CAAA,cAAW;wBAAC,WAAU;kCAAiB;;;;;;;;;;;8BAE1C,8OAAC;oBAAI,WAAU;8BACZ,QAAQ,GAAG,CAAC,CAAC,EAAE,MAAM,IAAI,EAAE,KAAK,EAAE,WAAW,EAAE,iBAC9C,8OAAC,kIAAA,CAAA,SAAM;4BAEL,SAAQ;4BACR,WAAU;4BACV,SAAS,IAAM,WAAW;;8CAE1B,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAK,WAAU;;;;;;wCACf;;;;;;;8CAEH,8OAAC;oCAAK,WAAU;8CAA0B;;;;;;;2BATrC;;;;;;;;;;;;;;;;;;;;;AAgBnB","debugId":null}},
    {"offset": {"line": 3384, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/checkbox.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,yBAAW,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG9B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,oKAAA,CAAA,OAAsB;QACrB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,kTACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,oKAAA,CAAA,YAA2B;YAC1B,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE;sBAEd,cAAA,8OAAC,oMAAA,CAAA,QAAK;gBAAC,WAAU;;;;;;;;;;;;;;;;AAIvB,SAAS,WAAW,GAAG,oKAAA,CAAA,OAAsB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 3429, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/assistant/Modals/ImportDialog.tsx"],"sourcesContent":["\"use client\";\n\nimport { useMemo, useState } from \"react\";\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport type { ProposedAction } from \"@/lib/assistant/types\";\n\nexport function ImportDialog({\n  open,\n  onOpenChange,\n  payload,\n  onImport,\n}: {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  payload?: { type: string; confidence: number; proposedActions: ProposedAction[] };\n  onImport?: (actions: ProposedAction[]) => void;\n}) {\n  const [selected, setSelected] = useState<string[]>([]);\n\n  const actions = payload?.proposedActions ?? [];\n  const summary = useMemo(() => `${payload?.type ?? \"unknown\"} (${Math.round((payload?.confidence ?? 0) * 100)}% sure)`, [payload]);\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-xl border-slate-800 bg-slate-950/90\">\n        <DialogHeader>\n          <DialogTitle className=\"text-slate-100\">Import capture</DialogTitle>\n          <DialogDescription className=\"text-xs text-slate-400\">\n            {summary}\n          </DialogDescription>\n        </DialogHeader>\n        <ScrollArea className=\"max-h-[300px] space-y-3 pr-4\">\n          <div className=\"space-y-2\">\n            {actions.map((action) => (\n              <label\n                key={action.label}\n                className=\"flex cursor-pointer items-start gap-3 rounded-2xl border border-slate-800/70 bg-slate-900/60 px-4 py-3\"\n              >\n                <Checkbox\n                  checked={selected.includes(action.label)}\n                  onCheckedChange={(checked) => {\n                    setSelected((prev) =>\n                      checked\n                        ? [...prev, action.label]\n                        : prev.filter((item) => item !== action.label),\n                    );\n                  }}\n                />\n                <div className=\"space-y-1\">\n                  <p className=\"text-sm text-slate-200\">{action.label}</p>\n                  <pre className=\"whitespace-pre-wrap text-[11px] text-slate-400\">\n                    {JSON.stringify(action.payloadPreview, null, 2)}\n                  </pre>\n                </div>\n              </label>\n            ))}\n          </div>\n        </ScrollArea>\n        <div className=\"flex justify-end gap-2\">\n          <Button variant=\"secondary\" onClick={() => onOpenChange(false)}>\n            Cancel\n          </Button>\n          <Button\n            onClick={() =>\n              onImport?.(actions.filter((action) => selected.includes(action.label)))\n            }\n          >\n            Import selected\n          </Button>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AANA;;;;;;;AASO,SAAS,aAAa,EAC3B,IAAI,EACJ,YAAY,EACZ,OAAO,EACP,QAAQ,EAMT;IACC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAY,EAAE;IAErD,MAAM,UAAU,SAAS,mBAAmB,EAAE;IAC9C,MAAM,UAAU,CAAA,GAAA,qMAAA,CAAA,UAAO,AAAD,EAAE,IAAM,GAAG,SAAS,QAAQ,UAAU,EAAE,EAAE,KAAK,KAAK,CAAC,CAAC,SAAS,cAAc,CAAC,IAAI,KAAK,OAAO,CAAC,EAAE;QAAC;KAAQ;IAEhI,qBACE,8OAAC,kIAAA,CAAA,SAAM;QAAC,MAAM;QAAM,cAAc;kBAChC,cAAA,8OAAC,kIAAA,CAAA,gBAAa;YAAC,WAAU;;8BACvB,8OAAC,kIAAA,CAAA,eAAY;;sCACX,8OAAC,kIAAA,CAAA,cAAW;4BAAC,WAAU;sCAAiB;;;;;;sCACxC,8OAAC,kIAAA,CAAA,oBAAiB;4BAAC,WAAU;sCAC1B;;;;;;;;;;;;8BAGL,8OAAC,0IAAA,CAAA,aAAU;oBAAC,WAAU;8BACpB,cAAA,8OAAC;wBAAI,WAAU;kCACZ,QAAQ,GAAG,CAAC,CAAC,uBACZ,8OAAC;gCAEC,WAAU;;kDAEV,8OAAC,oIAAA,CAAA,WAAQ;wCACP,SAAS,SAAS,QAAQ,CAAC,OAAO,KAAK;wCACvC,iBAAiB,CAAC;4CAChB,YAAY,CAAC,OACX,UACI;uDAAI;oDAAM,OAAO,KAAK;iDAAC,GACvB,KAAK,MAAM,CAAC,CAAC,OAAS,SAAS,OAAO,KAAK;wCAEnD;;;;;;kDAEF,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAE,WAAU;0DAA0B,OAAO,KAAK;;;;;;0DACnD,8OAAC;gDAAI,WAAU;0DACZ,KAAK,SAAS,CAAC,OAAO,cAAc,EAAE,MAAM;;;;;;;;;;;;;+BAhB5C,OAAO,KAAK;;;;;;;;;;;;;;;8BAuBzB,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,kIAAA,CAAA,SAAM;4BAAC,SAAQ;4BAAY,SAAS,IAAM,aAAa;sCAAQ;;;;;;sCAGhE,8OAAC,kIAAA,CAAA,SAAM;4BACL,SAAS,IACP,WAAW,QAAQ,MAAM,CAAC,CAAC,SAAW,SAAS,QAAQ,CAAC,OAAO,KAAK;sCAEvE;;;;;;;;;;;;;;;;;;;;;;;AAOX","debugId":null}},
    {"offset": {"line": 3586, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/radio-group.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IAC1B,qBACE,8OAAC,0KAAA,CAAA,OAAwB;QACvB,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,cAAc;QAC3B,GAAG,KAAK;QACT,KAAK;;;;;;AAGX;AACA,WAAW,WAAW,GAAG,0KAAA,CAAA,OAAwB,CAAC,WAAW;AAE7D,MAAM,+BAAiB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGpC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IAC1B,qBACE,8OAAC,0KAAA,CAAA,OAAwB;QACvB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,4OACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,0KAAA,CAAA,YAA6B;YAAC,WAAU;sBACvC,cAAA,8OAAC,sMAAA,CAAA,SAAM;gBAAC,WAAU;;;;;;;;;;;;;;;;AAI1B;AACA,eAAe,WAAW,GAAG,0KAAA,CAAA,OAAwB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 3646, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/assistant/Modals/NewBriefingDialog.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\nimport { Label } from \"@/components/ui/label\";\n\nconst BRIEFING_TYPES = [\n  { value: \"morning\", label: \"Morning\", description: \"Cash, care, and calls before 9am\" },\n  { value: \"evening\", label: \"Evening\", description: \"Wrap-up, nudges, and tomorrow prep\" },\n  { value: \"weekly\", label: \"Weekly\", description: \"Ledger reconciliation + progress\" },\n  { value: \"monthly-audit\", label: \"Monthly audit\", description: \"Full automation and risk review\" },\n];\n\nexport function NewBriefingDialog({\n  open,\n  onOpenChange,\n  onRun,\n}: {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onRun?: (type: string) => void;\n}) {\n  const [type, setType] = useState(\"morning\");\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-md border-slate-800 bg-slate-950/90\">\n        <DialogHeader>\n          <DialogTitle className=\"text-slate-100\">New briefing</DialogTitle>\n          <DialogDescription className=\"text-xs text-slate-400\">\n            Choose the cadence and Beno will synthesize finance, household, care, and goals.\n          </DialogDescription>\n        </DialogHeader>\n        <RadioGroup value={type} onValueChange={setType} className=\"space-y-3\">\n          {BRIEFING_TYPES.map((item) => (\n            <Label\n              key={item.value}\n              htmlFor={`brief-${item.value}`}\n              className=\"flex cursor-pointer items-center justify-between rounded-2xl border border-slate-800/70 bg-slate-900/60 px-4 py-3 hover:border-slate-700\"\n            >\n              <div className=\"space-y-1\">\n                <p className=\"text-sm font-medium text-slate-200\">{item.label}</p>\n                <p className=\"text-xs text-slate-400\">{item.description}</p>\n              </div>\n              <RadioGroupItem id={`brief-${item.value}`} value={item.value} />\n            </Label>\n          ))}\n        </RadioGroup>\n        <Button onClick={() => onRun?.(type)}>Run briefing</Button>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AANA;;;;;;;AAQA,MAAM,iBAAiB;IACrB;QAAE,OAAO;QAAW,OAAO;QAAW,aAAa;IAAmC;IACtF;QAAE,OAAO;QAAW,OAAO;QAAW,aAAa;IAAqC;IACxF;QAAE,OAAO;QAAU,OAAO;QAAU,aAAa;IAAmC;IACpF;QAAE,OAAO;QAAiB,OAAO;QAAiB,aAAa;IAAkC;CAClG;AAEM,SAAS,kBAAkB,EAChC,IAAI,EACJ,YAAY,EACZ,KAAK,EAKN;IACC,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,qBACE,8OAAC,kIAAA,CAAA,SAAM;QAAC,MAAM;QAAM,cAAc;kBAChC,cAAA,8OAAC,kIAAA,CAAA,gBAAa;YAAC,WAAU;;8BACvB,8OAAC,kIAAA,CAAA,eAAY;;sCACX,8OAAC,kIAAA,CAAA,cAAW;4BAAC,WAAU;sCAAiB;;;;;;sCACxC,8OAAC,kIAAA,CAAA,oBAAiB;4BAAC,WAAU;sCAAyB;;;;;;;;;;;;8BAIxD,8OAAC,0IAAA,CAAA,aAAU;oBAAC,OAAO;oBAAM,eAAe;oBAAS,WAAU;8BACxD,eAAe,GAAG,CAAC,CAAC,qBACnB,8OAAC,iIAAA,CAAA,QAAK;4BAEJ,SAAS,CAAC,MAAM,EAAE,KAAK,KAAK,EAAE;4BAC9B,WAAU;;8CAEV,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAE,WAAU;sDAAsC,KAAK,KAAK;;;;;;sDAC7D,8OAAC;4CAAE,WAAU;sDAA0B,KAAK,WAAW;;;;;;;;;;;;8CAEzD,8OAAC,0IAAA,CAAA,iBAAc;oCAAC,IAAI,CAAC,MAAM,EAAE,KAAK,KAAK,EAAE;oCAAE,OAAO,KAAK,KAAK;;;;;;;2BARvD,KAAK,KAAK;;;;;;;;;;8BAYrB,8OAAC,kIAAA,CAAA,SAAM;oBAAC,SAAS,IAAM,QAAQ;8BAAO;;;;;;;;;;;;;;;;;AAI9C","debugId":null}},
    {"offset": {"line": 3794, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/sheet.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;AAEA;AACA;AACA;AACA;AAEA;AAPA;;;;;;;AASA,MAAM,QAAQ,kKAAA,CAAA,OAAmB;AAEjC,MAAM,eAAe,kKAAA,CAAA,UAAsB;AAE3C,MAAM,aAAa,kKAAA,CAAA,QAAoB;AAEvC,MAAM,cAAc,kKAAA,CAAA,SAAqB;AAEzC,MAAM,6BAAe,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,UAAsB;QACrB,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,2JACA;QAED,GAAG,KAAK;QACT,KAAK;;;;;;AAGT,aAAa,WAAW,GAAG,kKAAA,CAAA,UAAsB,CAAC,WAAW;AAE7D,MAAM,gBAAgB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACtB,oMACA;IACE,UAAU;QACR,MAAM;YACJ,KAAK;YACL,QACE;YACF,MAAM;YACN,OACE;QACJ;IACF;IACA,iBAAiB;QACf,MAAM;IACR;AACF;AAOF,MAAM,6BAAe,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGlC,CAAC,EAAE,OAAO,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpD,8OAAC;;0BACC,8OAAC;;;;;0BACD,8OAAC,kKAAA,CAAA,UAAsB;gBACrB,KAAK;gBACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,cAAc;oBAAE;gBAAK,IAAI;gBACtC,GAAG,KAAK;;oBAER;kCACD,8OAAC,kKAAA,CAAA,QAAoB;wBAAC,WAAU;;0CAC9B,8OAAC,4LAAA,CAAA,IAAC;gCAAC,WAAU;;;;;;0CACb,8OAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAKlC,aAAa,WAAW,GAAG,kKAAA,CAAA,UAAsB,CAAC,WAAW;AAE7D,MAAM,cAAc,CAAC,EACnB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,oDACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG;AAE1B,MAAM,cAAc,CAAC,EACnB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,iEACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,QAAoB;QACnB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,yCAAyC;QACtD,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG,kKAAA,CAAA,QAAoB,CAAC,WAAW;AAEzD,MAAM,iCAAmB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,cAA0B;QACzB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,iBAAiB,WAAW,GAAG,kKAAA,CAAA,cAA0B,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 3943, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/assistant/Modals/CreateRuleDrawer.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { Sheet, SheetContent, SheetHeader, SheetTitle } from \"@/components/ui/sheet\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\n\nexport function CreateRuleDrawer({\n  open,\n  onOpenChange,\n  onCreate,\n}: {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onCreate?: (rule: { name: string; trigger: string; filters: string; actions: string }) => void;\n}) {\n  const [name, setName] = useState(\"Groceries > 90% budget\");\n  const [trigger, setTrigger] = useState(\"spend_ratio > 0.9 before month_end\");\n  const [filters, setFilters] = useState(\"category:groceries; household:1017\");\n  const [actions, setActions] = useState(\"nudge:Marcus; create_brief:coach\");\n  return (\n    <Sheet open={open} onOpenChange={onOpenChange}>\n      <SheetContent side=\"right\" className=\"w-full border-l border-slate-800 bg-slate-950/95 sm:max-w-xl\">\n        <SheetHeader>\n          <SheetTitle className=\"text-slate-100\">Create rule</SheetTitle>\n        </SheetHeader>\n        <ScrollArea className=\"mt-6 h-[calc(100vh-10rem)] pr-4\">\n          <div className=\"flex flex-col gap-4\">\n            <Field label=\"Name\">\n              <Input value={name} onChange={(event) => setName(event.target.value)} className=\"bg-slate-900/70\" />\n            </Field>\n            <Field label=\"Trigger\">\n              <Textarea value={trigger} onChange={(event) => setTrigger(event.target.value)} className=\"bg-slate-900/70\" />\n            </Field>\n            <Field label=\"Filters\">\n              <Textarea value={filters} onChange={(event) => setFilters(event.target.value)} className=\"bg-slate-900/70\" />\n            </Field>\n            <Field label=\"Actions\">\n              <Textarea value={actions} onChange={(event) => setActions(event.target.value)} className=\"bg-slate-900/70\" />\n            </Field>\n            <div className=\"rounded-2xl border border-slate-800/70 bg-slate-900/60 p-4 text-xs text-slate-300\">\n              Dry run matched 2 transactions in the last 30 days.\n            </div>\n            <Button\n              className=\"self-start\"\n              onClick={() => onCreate?.({ name, trigger, filters, actions })}\n            >\n              Save rule\n            </Button>\n          </div>\n        </ScrollArea>\n      </SheetContent>\n    </Sheet>\n  );\n}\n\nfunction Field({ label, children }: { label: string; children: React.ReactNode }) {\n  return (\n    <div className=\"space-y-2\">\n      <Label className=\"text-xs uppercase tracking-wide text-slate-400\">{label}</Label>\n      {children}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;;;;;;;;AAUO,SAAS,iBAAiB,EAC/B,IAAI,EACJ,YAAY,EACZ,QAAQ,EAKT;IACC,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,qBACE,8OAAC,iIAAA,CAAA,QAAK;QAAC,MAAM;QAAM,cAAc;kBAC/B,cAAA,8OAAC,iIAAA,CAAA,eAAY;YAAC,MAAK;YAAQ,WAAU;;8BACnC,8OAAC,iIAAA,CAAA,cAAW;8BACV,cAAA,8OAAC,iIAAA,CAAA,aAAU;wBAAC,WAAU;kCAAiB;;;;;;;;;;;8BAEzC,8OAAC,0IAAA,CAAA,aAAU;oBAAC,WAAU;8BACpB,cAAA,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAM,OAAM;0CACX,cAAA,8OAAC,iIAAA,CAAA,QAAK;oCAAC,OAAO;oCAAM,UAAU,CAAC,QAAU,QAAQ,MAAM,MAAM,CAAC,KAAK;oCAAG,WAAU;;;;;;;;;;;0CAElF,8OAAC;gCAAM,OAAM;0CACX,cAAA,8OAAC,oIAAA,CAAA,WAAQ;oCAAC,OAAO;oCAAS,UAAU,CAAC,QAAU,WAAW,MAAM,MAAM,CAAC,KAAK;oCAAG,WAAU;;;;;;;;;;;0CAE3F,8OAAC;gCAAM,OAAM;0CACX,cAAA,8OAAC,oIAAA,CAAA,WAAQ;oCAAC,OAAO;oCAAS,UAAU,CAAC,QAAU,WAAW,MAAM,MAAM,CAAC,KAAK;oCAAG,WAAU;;;;;;;;;;;0CAE3F,8OAAC;gCAAM,OAAM;0CACX,cAAA,8OAAC,oIAAA,CAAA,WAAQ;oCAAC,OAAO;oCAAS,UAAU,CAAC,QAAU,WAAW,MAAM,MAAM,CAAC,KAAK;oCAAG,WAAU;;;;;;;;;;;0CAE3F,8OAAC;gCAAI,WAAU;0CAAoF;;;;;;0CAGnG,8OAAC,kIAAA,CAAA,SAAM;gCACL,WAAU;gCACV,SAAS,IAAM,WAAW;wCAAE;wCAAM;wCAAS;wCAAS;oCAAQ;0CAC7D;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQb;AAEA,SAAS,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAgD;IAC9E,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,iIAAA,CAAA,QAAK;gBAAC,WAAU;0BAAkD;;;;;;YAClE;;;;;;;AAGP","debugId":null}},
    {"offset": {"line": 4129, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/switch.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,uBAAS,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,OAAqB;QACpB,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,sXACA;QAED,GAAG,KAAK;QACT,KAAK;kBAEL,cAAA,8OAAC,kKAAA,CAAA,QAAsB;YACrB,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV;;;;;;;;;;;AAKR,OAAO,WAAW,GAAG,kKAAA,CAAA,OAAqB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 4165, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/assistant/Modals/NudgeDialog.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Label } from \"@/components/ui/label\";\n\nexport function NudgeDialog({\n  open,\n  onOpenChange,\n  onSend,\n}: {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onSend?: (payload: { contact: string; message: string; channel: \"sms\" | \"whatsapp\"; quietHours: boolean }) => void;\n}) {\n  const [contact, setContact] = useState(\"Marcus\");\n  const [message, setMessage] = useState(\"Need anything before I submit rent? Receipt ready to share.\");\n  const [channel, setChannel] = useState<\"sms\" | \"whatsapp\">(\"whatsapp\");\n  const [quiet, setQuiet] = useState(false);\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-lg border-slate-800 bg-slate-950/90\">\n        <DialogHeader>\n          <DialogTitle className=\"text-slate-100\">Send nudge</DialogTitle>\n          <DialogDescription className=\"text-xs text-slate-400\">\n            Nudges respect privacy controls. Attachments auto-mask PHI when enabled.\n          </DialogDescription>\n        </DialogHeader>\n        <div className=\"space-y-3\">\n          <Label className=\"text-xs uppercase tracking-wide text-slate-400\">Contact</Label>\n          <Input value={contact} onChange={(event) => setContact(event.target.value)} className=\"bg-slate-900/70\" />\n          <Label className=\"text-xs uppercase tracking-wide text-slate-400\">Channel</Label>\n          <div className=\"flex gap-2\">\n            <Button\n              size=\"sm\"\n              variant={channel === \"whatsapp\" ? \"default\" : \"secondary\"}\n              onClick={() => setChannel(\"whatsapp\")}\n            >\n              WhatsApp\n            </Button>\n            <Button size=\"sm\" variant={channel === \"sms\" ? \"default\" : \"secondary\"} onClick={() => setChannel(\"sms\")}>\n              SMS\n            </Button>\n          </div>\n          <Label className=\"text-xs uppercase tracking-wide text-slate-400\">Message</Label>\n          <Textarea value={message} onChange={(event) => setMessage(event.target.value)} className=\"bg-slate-900/70\" />\n          <div className=\"flex items-center justify-between rounded-2xl border border-slate-800/70 bg-slate-900/60 px-4 py-3\">\n            <div>\n              <p className=\"text-sm text-slate-200\">Bypass quiet hours</p>\n              <p className=\"text-xs text-slate-400\">Urgent updates still respect privacy masking</p>\n            </div>\n            <Switch checked={quiet} onCheckedChange={setQuiet} />\n          </div>\n        </div>\n        <DialogFooter>\n          <Button variant=\"secondary\" onClick={() => onOpenChange(false)}>\n            Cancel\n          </Button>\n          <Button onClick={() => onSend?.({ contact, message, channel, quietHours: quiet })}>Send nudge</Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;;;;;;;;AAUO,SAAS,YAAY,EAC1B,IAAI,EACJ,YAAY,EACZ,MAAM,EAKP;IACC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAsB;IAC3D,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEnC,qBACE,8OAAC,kIAAA,CAAA,SAAM;QAAC,MAAM;QAAM,cAAc;kBAChC,cAAA,8OAAC,kIAAA,CAAA,gBAAa;YAAC,WAAU;;8BACvB,8OAAC,kIAAA,CAAA,eAAY;;sCACX,8OAAC,kIAAA,CAAA,cAAW;4BAAC,WAAU;sCAAiB;;;;;;sCACxC,8OAAC,kIAAA,CAAA,oBAAiB;4BAAC,WAAU;sCAAyB;;;;;;;;;;;;8BAIxD,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,iIAAA,CAAA,QAAK;4BAAC,WAAU;sCAAiD;;;;;;sCAClE,8OAAC,iIAAA,CAAA,QAAK;4BAAC,OAAO;4BAAS,UAAU,CAAC,QAAU,WAAW,MAAM,MAAM,CAAC,KAAK;4BAAG,WAAU;;;;;;sCACtF,8OAAC,iIAAA,CAAA,QAAK;4BAAC,WAAU;sCAAiD;;;;;;sCAClE,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,kIAAA,CAAA,SAAM;oCACL,MAAK;oCACL,SAAS,YAAY,aAAa,YAAY;oCAC9C,SAAS,IAAM,WAAW;8CAC3B;;;;;;8CAGD,8OAAC,kIAAA,CAAA,SAAM;oCAAC,MAAK;oCAAK,SAAS,YAAY,QAAQ,YAAY;oCAAa,SAAS,IAAM,WAAW;8CAAQ;;;;;;;;;;;;sCAI5G,8OAAC,iIAAA,CAAA,QAAK;4BAAC,WAAU;sCAAiD;;;;;;sCAClE,8OAAC,oIAAA,CAAA,WAAQ;4BAAC,OAAO;4BAAS,UAAU,CAAC,QAAU,WAAW,MAAM,MAAM,CAAC,KAAK;4BAAG,WAAU;;;;;;sCACzF,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;;sDACC,8OAAC;4CAAE,WAAU;sDAAyB;;;;;;sDACtC,8OAAC;4CAAE,WAAU;sDAAyB;;;;;;;;;;;;8CAExC,8OAAC,kIAAA,CAAA,SAAM;oCAAC,SAAS;oCAAO,iBAAiB;;;;;;;;;;;;;;;;;;8BAG7C,8OAAC,kIAAA,CAAA,eAAY;;sCACX,8OAAC,kIAAA,CAAA,SAAM;4BAAC,SAAQ;4BAAY,SAAS,IAAM,aAAa;sCAAQ;;;;;;sCAGhE,8OAAC,kIAAA,CAAA,SAAM;4BAAC,SAAS,IAAM,SAAS;oCAAE;oCAAS;oCAAS;oCAAS,YAAY;gCAAM;sCAAI;;;;;;;;;;;;;;;;;;;;;;;AAK7F","debugId":null}},
    {"offset": {"line": 4389, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/assistant/Modals/OpenInDrawer.tsx"],"sourcesContent":["\"use client\";\n\nimport { Sheet, SheetContent, SheetHeader, SheetTitle } from \"@/components/ui/sheet\";\nimport { Button } from \"@/components/ui/button\";\n\nexport function OpenInDrawer({\n  open,\n  onOpenChange,\n  destination,\n  preview,\n  onConfirm,\n}: {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  destination?: string;\n  preview?: string;\n  onConfirm?: () => void;\n}) {\n  return (\n    <Sheet open={open} onOpenChange={onOpenChange}>\n      <SheetContent side=\"right\" className=\"w-full border-l border-slate-800 bg-slate-950/95 sm:max-w-md\">\n        <SheetHeader>\n          <SheetTitle className=\"text-slate-100\">Open in {destination ?? \"app\"}</SheetTitle>\n        </SheetHeader>\n        <div className=\"mt-6 space-y-4 text-sm text-slate-300\">\n          <p>{preview ?? \"Review the destination before leaving Beno.\"}</p>\n          <Button onClick={onConfirm}>Open</Button>\n        </div>\n      </SheetContent>\n    </Sheet>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AAKO,SAAS,aAAa,EAC3B,IAAI,EACJ,YAAY,EACZ,WAAW,EACX,OAAO,EACP,SAAS,EAOV;IACC,qBACE,8OAAC,iIAAA,CAAA,QAAK;QAAC,MAAM;QAAM,cAAc;kBAC/B,cAAA,8OAAC,iIAAA,CAAA,eAAY;YAAC,MAAK;YAAQ,WAAU;;8BACnC,8OAAC,iIAAA,CAAA,cAAW;8BACV,cAAA,8OAAC,iIAAA,CAAA,aAAU;wBAAC,WAAU;;4BAAiB;4BAAS,eAAe;;;;;;;;;;;;8BAEjE,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;sCAAG,WAAW;;;;;;sCACf,8OAAC,kIAAA,CAAA,SAAM;4BAAC,SAAS;sCAAW;;;;;;;;;;;;;;;;;;;;;;;AAKtC","debugId":null}},
    {"offset": {"line": 4466, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/assistant/Modals/ScheduleDrawer.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { Sheet, SheetContent, SheetHeader, SheetTitle } from \"@/components/ui/sheet\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Textarea } from \"@/components/ui/textarea\";\n\nexport function ScheduleDrawer({\n  open,\n  onOpenChange,\n  onSchedule,\n}: {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onSchedule?: (payload: { title: string; date: string; channel: string; note: string; share: boolean }) => void;\n}) {\n  const [title, setTitle] = useState(\"Record payment follow-up\");\n  const [date, setDate] = useState(() => new Date().toISOString().slice(0, 16));\n  const [channel, setChannel] = useState(\"calendar\");\n  const [share, setShare] = useState(true);\n  const [note, setNote] = useState(\"Attach rent ledger and notify Marcus\");\n\n  return (\n    <Sheet open={open} onOpenChange={onOpenChange}>\n      <SheetContent side=\"right\" className=\"w-full border-l border-slate-800 bg-slate-950/95 sm:max-w-lg\">\n        <SheetHeader>\n          <SheetTitle className=\"text-slate-100\">Schedule</SheetTitle>\n        </SheetHeader>\n        <div className=\"mt-6 space-y-4\">\n          <Field label=\"Title\">\n            <Input value={title} onChange={(event) => setTitle(event.target.value)} className=\"bg-slate-900/70\" />\n          </Field>\n          <Field label=\"Start\">\n            <Input\n              type=\"datetime-local\"\n              value={date}\n              onChange={(event) => setDate(event.target.value)}\n              className=\"bg-slate-900/70\"\n            />\n          </Field>\n          <Field label=\"Channel\">\n            <Input value={channel} onChange={(event) => setChannel(event.target.value)} className=\"bg-slate-900/70\" />\n          </Field>\n          <Field label=\"Note\">\n            <Textarea value={note} onChange={(event) => setNote(event.target.value)} className=\"bg-slate-900/70\" />\n          </Field>\n          <div className=\"flex items-center justify-between rounded-2xl border border-slate-800/70 bg-slate-900/60 px-4 py-3\">\n            <div>\n              <p className=\"text-sm text-slate-200\">Share update via WhatsApp</p>\n              <p className=\"text-xs text-slate-400\">Respect quiet hours when off</p>\n            </div>\n            <Switch checked={share} onCheckedChange={setShare} />\n          </div>\n          <Button\n            onClick={() => onSchedule?.({ title, date, channel, note, share })}\n            className=\"self-start\"\n          >\n            Schedule\n          </Button>\n        </div>\n      </SheetContent>\n    </Sheet>\n  );\n}\n\nfunction Field({ label, children }: { label: string; children: React.ReactNode }) {\n  return (\n    <div className=\"space-y-2\">\n      <Label className=\"text-xs uppercase tracking-wide text-slate-400\">{label}</Label>\n      {children}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;;;;;;;;AAUO,SAAS,eAAe,EAC7B,IAAI,EACJ,YAAY,EACZ,UAAU,EAKX;IACC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,IAAM,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,GAAG;IACzE,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEjC,qBACE,8OAAC,iIAAA,CAAA,QAAK;QAAC,MAAM;QAAM,cAAc;kBAC/B,cAAA,8OAAC,iIAAA,CAAA,eAAY;YAAC,MAAK;YAAQ,WAAU;;8BACnC,8OAAC,iIAAA,CAAA,cAAW;8BACV,cAAA,8OAAC,iIAAA,CAAA,aAAU;wBAAC,WAAU;kCAAiB;;;;;;;;;;;8BAEzC,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAM,OAAM;sCACX,cAAA,8OAAC,iIAAA,CAAA,QAAK;gCAAC,OAAO;gCAAO,UAAU,CAAC,QAAU,SAAS,MAAM,MAAM,CAAC,KAAK;gCAAG,WAAU;;;;;;;;;;;sCAEpF,8OAAC;4BAAM,OAAM;sCACX,cAAA,8OAAC,iIAAA,CAAA,QAAK;gCACJ,MAAK;gCACL,OAAO;gCACP,UAAU,CAAC,QAAU,QAAQ,MAAM,MAAM,CAAC,KAAK;gCAC/C,WAAU;;;;;;;;;;;sCAGd,8OAAC;4BAAM,OAAM;sCACX,cAAA,8OAAC,iIAAA,CAAA,QAAK;gCAAC,OAAO;gCAAS,UAAU,CAAC,QAAU,WAAW,MAAM,MAAM,CAAC,KAAK;gCAAG,WAAU;;;;;;;;;;;sCAExF,8OAAC;4BAAM,OAAM;sCACX,cAAA,8OAAC,oIAAA,CAAA,WAAQ;gCAAC,OAAO;gCAAM,UAAU,CAAC,QAAU,QAAQ,MAAM,MAAM,CAAC,KAAK;gCAAG,WAAU;;;;;;;;;;;sCAErF,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;;sDACC,8OAAC;4CAAE,WAAU;sDAAyB;;;;;;sDACtC,8OAAC;4CAAE,WAAU;sDAAyB;;;;;;;;;;;;8CAExC,8OAAC,kIAAA,CAAA,SAAM;oCAAC,SAAS;oCAAO,iBAAiB;;;;;;;;;;;;sCAE3C,8OAAC,kIAAA,CAAA,SAAM;4BACL,SAAS,IAAM,aAAa;oCAAE;oCAAO;oCAAM;oCAAS;oCAAM;gCAAM;4BAChE,WAAU;sCACX;;;;;;;;;;;;;;;;;;;;;;;AAOX;AAEA,SAAS,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAgD;IAC9E,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,iIAAA,CAAA,QAAK;gBAAC,WAAU;0BAAkD;;;;;;YAClE;;;;;;;AAGP","debugId":null}},
    {"offset": {"line": 4681, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/assistant/Modals/SimulateDrawer.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { Sheet, SheetContent, SheetHeader, SheetTitle } from \"@/components/ui/sheet\";\nimport { Button } from \"@/components/ui/button\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\n\nexport function SimulateDrawer({\n  open,\n  onOpenChange,\n  context,\n  onApply,\n}: {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  context?: string;\n  onApply?: (note: string) => void;\n}) {\n  const [notes, setNotes] = useState(context ?? \"Rent +12% starting January\");\n  return (\n    <Sheet open={open} onOpenChange={onOpenChange}>\n      <SheetContent side=\"right\" className=\"w-full border-l border-slate-800 bg-slate-950/95 sm:max-w-xl\">\n        <SheetHeader>\n          <SheetTitle className=\"text-slate-100\">Simulate scenario</SheetTitle>\n        </SheetHeader>\n        <div className=\"mt-6 space-y-4\">\n          <Field label=\"Scenario\">\n            <Textarea value={notes} onChange={(event) => setNotes(event.target.value)} className=\"bg-slate-900/70\" />\n          </Field>\n          <Card className=\"border-slate-800/70 bg-slate-900/60\">\n            <CardHeader>\n              <CardTitle className=\"text-sm text-slate-200\">Forecast impact</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-2 text-xs text-slate-300\">\n              <p>• Runway shifts from 7.5 → 6.1 months.</p>\n              <p>• Recommend reallocating $450 from travel goal.</p>\n            </CardContent>\n          </Card>\n          <div className=\"flex gap-2\">\n            <Button variant=\"secondary\" onClick={() => onApply?.(notes)}>Apply plan</Button>\n            <Button variant=\"ghost\" onClick={() => onOpenChange(false)}>Close</Button>\n          </div>\n        </div>\n      </SheetContent>\n    </Sheet>\n  );\n}\n\nfunction Field({ label, children }: { label: string; children: React.ReactNode }) {\n  return (\n    <div className=\"space-y-2\">\n      <Label className=\"text-xs uppercase tracking-wide text-slate-400\">{label}</Label>\n      {children}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAPA;;;;;;;;AASO,SAAS,eAAe,EAC7B,IAAI,EACJ,YAAY,EACZ,OAAO,EACP,OAAO,EAMR;IACC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,WAAW;IAC9C,qBACE,8OAAC,iIAAA,CAAA,QAAK;QAAC,MAAM;QAAM,cAAc;kBAC/B,cAAA,8OAAC,iIAAA,CAAA,eAAY;YAAC,MAAK;YAAQ,WAAU;;8BACnC,8OAAC,iIAAA,CAAA,cAAW;8BACV,cAAA,8OAAC,iIAAA,CAAA,aAAU;wBAAC,WAAU;kCAAiB;;;;;;;;;;;8BAEzC,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAM,OAAM;sCACX,cAAA,8OAAC,oIAAA,CAAA,WAAQ;gCAAC,OAAO;gCAAO,UAAU,CAAC,QAAU,SAAS,MAAM,MAAM,CAAC,KAAK;gCAAG,WAAU;;;;;;;;;;;sCAEvF,8OAAC,gIAAA,CAAA,OAAI;4BAAC,WAAU;;8CACd,8OAAC,gIAAA,CAAA,aAAU;8CACT,cAAA,8OAAC,gIAAA,CAAA,YAAS;wCAAC,WAAU;kDAAyB;;;;;;;;;;;8CAEhD,8OAAC,gIAAA,CAAA,cAAW;oCAAC,WAAU;;sDACrB,8OAAC;sDAAE;;;;;;sDACH,8OAAC;sDAAE;;;;;;;;;;;;;;;;;;sCAGP,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,kIAAA,CAAA,SAAM;oCAAC,SAAQ;oCAAY,SAAS,IAAM,UAAU;8CAAQ;;;;;;8CAC7D,8OAAC,kIAAA,CAAA,SAAM;oCAAC,SAAQ;oCAAQ,SAAS,IAAM,aAAa;8CAAQ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMxE;AAEA,SAAS,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAgD;IAC9E,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,iIAAA,CAAA,QAAK;gBAAC,WAAU;0BAAkD;;;;;;YAClE;;;;;;;AAGP","debugId":null}},
    {"offset": {"line": 4858, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/assistant/page.tsx"],"sourcesContent":["'use client';\n\nimport { AssistantProvider, useAssistantContext } from '@/lib/assistant/context';\nimport { useAssistant, SendMessageArgs } from '@/lib/assistant/useAssistant';\nimport { Composer } from '@/components/assistant/Composer';\nimport { Thread } from '@/components/assistant/Thread';\nimport { SidePanel } from '@/components/assistant/SidePanel';\nimport { Action, AssistantMessage } from '@/lib/assistant/types';\nimport { AttachPicker } from '@/components/assistant/Modals/AttachPicker';\nimport { ImportDialog } from '@/components/assistant/Modals/ImportDialog';\nimport { NewBriefingDialog } from '@/components/assistant/Modals/NewBriefingDialog';\nimport { CreateRuleDrawer } from '@/components/assistant/Modals/CreateRuleDrawer';\nimport { NudgeDialog } from '@/components/assistant/Modals/NudgeDialog';\nimport { OpenInDrawer } from '@/components/assistant/Modals/OpenInDrawer';\nimport { ScheduleDrawer } from '@/components/assistant/Modals/ScheduleDrawer';\nimport { SimulateDrawer } from '@/components/assistant/Modals/SimulateDrawer';\nimport { useState } from 'react';\n\nfunction AssistantPageContent() {\n  const [value, setValue] = useState('');\n  const { mode, chips, attachments } = useAssistantContext();\n  const { messages, loading, sendMessage, executeAction, execLogs } = useAssistant();\n\n  const [modal, setModal] = useState<string | null>(null);\n\n  const handleSubmit = () => {\n    const activeChips = chips.filter((c) => c.active).map((c) => c.id);\n    const args: SendMessageArgs = { content: value, mode, chips: activeChips, attachments };\n    sendMessage(args);\n    setValue('');\n  };\n\n  const handleAction = (message: AssistantMessage, action: Action) => {\n    if (action.type === 'nudge') {\n      setModal('nudge');\n    } else {\n      executeAction(action);\n    }\n  };\n\n  const handleQuickAction = (actionId: string) => {\n    switch (actionId) {\n      case 'create-event':\n      case 'record-payment':\n      case 'schedule-bill':\n        setModal('schedule');\n        break;\n      case 'add-transaction':\n        injectMessage({\n          role: 'assistant',\n          kind: 'editor',\n          form: {\n            id: 'quick-add-txn',\n            title: 'Add transaction',\n            fields: [\n              { id: 'amount', label: 'Amount', type: 'currency' },\n              { id: 'category', label: 'Category', type: 'text' },\n            ],\n          },\n        });\n        break;\n      case 'send-nudge':\n        setModal('nudge');\n        break;\n      case 'scan-receipt':\n        setModal('import');\n        break;\n      default:\n        setValue((prev) => `${prev} ${actionId}`.trim());\n        break;\n    }\n  };\n  \n  const { injectMessage } = useAssistant();\n\n  return (\n    <div className=\"grid h-[calc(100vh-8rem)] grid-cols-1 gap-6 lg:grid-cols-3\">\n      <div className=\"flex h-full flex-col lg:col-span-2\">\n        <Thread messages={messages} loading={loading} onAction={handleAction} execLogs={execLogs} />\n        <div className=\"mt-auto px-4 pb-4\">\n          <Composer value={value} onChange={setValue} onSubmit={handleSubmit} loading={loading} />\n        </div>\n      </div>\n      <div className=\"hidden h-full lg:block\">\n        <SidePanel onQuickAction={handleQuickAction} />\n      </div>\n      <AttachPicker open={modal === 'attach'} onOpenChange={() => setModal(null)} />\n      <ImportDialog open={modal === 'import'} onOpenChange={() => setModal(null)} payload={{type: 'receipt', confidence: 0.9, proposedActions: []}} />\n      <NewBriefingDialog open={modal === 'briefing'} onOpenChange={() => setModal(null)} />\n      <CreateRuleDrawer open={modal === 'rule'} onOpenChange={() => setModal(null)} />\n      <NudgeDialog open={modal === 'nudge'} onOpenChange={() => setModal(null)} />\n      <OpenInDrawer open={modal === 'open-in'} onOpenChange={() => setModal(null)} />\n      <ScheduleDrawer open={modal === 'schedule'} onOpenChange={() => setModal(null)} />\n      <SimulateDrawer open={modal === 'simulate'} onOpenChange={() => setModal(null)} />\n    </div>\n  );\n}\n\nexport default function AssistantPage() {\n  return (\n    <AssistantProvider>\n      <AssistantPageContent />\n    </AssistantProvider>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}