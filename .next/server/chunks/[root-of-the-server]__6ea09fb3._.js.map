{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/api/goals/store.ts"],"sourcesContent":["import { randomUUID } from \"crypto\";\nimport { getApps, initializeApp, cert, applicationDefault } from \"firebase-admin/app\";\nimport { getFirestore, Timestamp, FieldValue } from \"firebase-admin/firestore\";\nimport type { Firestore } from \"firebase-admin/firestore\";\nimport type {\n  AutoFundRule,\n  AutomationSuggestion,\n  FundingAccount,\n  Goal,\n  GoalPriority,\n  GoalType,\n  SimulationInput,\n  SimulationResult,\n} from \"@/lib/goals/types\";\n\nconst GOAL_COLLECTION = \"goals\";\nconst AUTOMATION_COLLECTION = \"automations\";\n\nlet firestore: Firestore | null = null;\nconst memoryGoals = new Map<string, Goal>();\nconst memoryAutomations: Array<{ id: string; goalId: string; rule: AutoFundRule & { untilTarget?: boolean; untilDate?: string; note?: string } }> = [];\n\nfunction getFirestoreAdmin(): Firestore | null {\n  if (firestore) return firestore;\n  try {\n    if (!getApps().length) {\n      const serviceAccount = process.env.FIREBASE_SERVICE_ACCOUNT;\n      if (serviceAccount) {\n        initializeApp({\n          credential: cert(JSON.parse(serviceAccount)),\n        });\n      } else {\n        initializeApp({\n          credential: applicationDefault(),\n        });\n      }\n    }\n    firestore = getFirestore();\n  } catch (error) {\n    console.warn(\"[goals] Falling back to in-memory store\", error);\n    firestore = null;\n  }\n  return firestore;\n}\n\nfunction serializeGoal(docId: string, data: FirebaseFirestore.DocumentData): Goal {\n  const deadline = data.deadline instanceof Timestamp ? data.deadline.toDate().toISOString() : data.deadline;\n  const createdAt = data.createdAt instanceof Timestamp ? data.createdAt.toDate().toISOString() : data.createdAt ?? new Date().toISOString();\n  const updatedAt = data.updatedAt instanceof Timestamp ? data.updatedAt.toDate().toISOString() : data.updatedAt ?? createdAt;\n  return {\n    id: docId,\n    name: data.name,\n    type: data.type,\n    target: data.target,\n    current: data.current,\n    currency: data.currency,\n    deadline,\n    priority: data.priority,\n    linkedAccount: data.linkedAccount,\n    linkedEntity: data.linkedEntity ?? undefined,\n    autoFundRule: data.autoFundRule ?? undefined,\n    color: data.color ?? undefined,\n    notes: data.notes ?? undefined,\n    status: data.status ?? undefined,\n    archived: data.archived ?? false,\n    createdAt,\n    updatedAt,\n  } as Goal;\n}\n\nexport async function listGoals(): Promise<Goal[]> {\n  const db = getFirestoreAdmin();\n  if (!db) {\n    return Array.from(memoryGoals.values()).sort((a, b) => new Date(b.updatedAt).getTime() - new Date(a.updatedAt).getTime());\n  }\n  const snapshot = await db.collection(GOAL_COLLECTION).orderBy(\"createdAt\", \"desc\").get();\n  return snapshot.docs.map(doc => serializeGoal(doc.id, doc.data()));\n}\n\nexport async function getGoal(goalId: string): Promise<Goal | null> {\n  const db = getFirestoreAdmin();\n  if (!db) {\n    return memoryGoals.get(goalId) ?? null;\n  }\n  const doc = await db.collection(GOAL_COLLECTION).doc(goalId).get();\n  if (!doc.exists) return null;\n  return serializeGoal(doc.id, doc.data()!);\n}\n\nexport async function createGoal(payload: Partial<Goal>): Promise<Goal> {\n  const id = payload.id ?? randomUUID();\n  const now = Timestamp.now();\n  const db = getFirestoreAdmin();\n  const data = {\n    name: payload.name ?? \"Untitled goal\",\n    type: payload.type ?? (\"financial\" satisfies GoalType),\n    target: payload.target ?? 0,\n    current: payload.current ?? 0,\n    currency: payload.currency ?? \"USD\",\n    deadline: payload.deadline ? Timestamp.fromDate(new Date(payload.deadline)) : null,\n    priority: payload.priority ?? (\"medium\" satisfies GoalPriority),\n    linkedAccount: payload.linkedAccount ?? null,\n    linkedEntity: payload.linkedEntity ?? null,\n    autoFundRule: payload.autoFundRule ?? null,\n    color: payload.color ?? null,\n    notes: payload.notes ?? \"\",\n    status: payload.status ?? \"active\",\n    archived: false,\n    createdAt: now,\n    updatedAt: now,\n  };\n  if (db) {\n    await db.collection(GOAL_COLLECTION).doc(id).set(data);\n    return serializeGoal(id, data);\n  }\n  const goal: Goal = {\n    id,\n    name: data.name,\n    type: data.type,\n    target: data.target,\n    current: data.current,\n    currency: data.currency ?? undefined,\n    deadline: data.deadline ? new Date(payload.deadline as string).toISOString() : undefined,\n    priority: data.priority,\n    linkedAccount: payload.linkedAccount,\n    linkedEntity: payload.linkedEntity ?? undefined,\n    autoFundRule: payload.autoFundRule ?? undefined,\n    color: payload.color ?? undefined,\n    notes: payload.notes ?? \"\",\n    status: payload.status ?? \"active\",\n    archived: false,\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n  };\n  memoryGoals.set(id, goal);\n  return goal;\n}\n\nexport async function updateGoal(goalId: string, payload: Partial<Goal>): Promise<Goal> {\n  const db = getFirestoreAdmin();\n  const now = Timestamp.now();\n  if (db) {\n    const docRef = db.collection(GOAL_COLLECTION).doc(goalId);\n    const updateData: Record<string, unknown> = {\n      ...payload,\n      updatedAt: now,\n    };\n    if (payload.deadline !== undefined) {\n      updateData.deadline = payload.deadline ? Timestamp.fromDate(new Date(payload.deadline)) : null;\n    }\n    if (payload.linkedEntity === undefined) {\n      // keep existing value\n    } else {\n      updateData.linkedEntity = payload.linkedEntity ?? null;\n    }\n    await docRef.set(updateData, { merge: true });\n    const updated = await docRef.get();\n    return serializeGoal(updated.id, updated.data()!);\n  }\n  const existing = memoryGoals.get(goalId);\n  if (!existing) throw new Error(\"Goal not found\");\n  const updated: Goal = {\n    ...existing,\n    ...payload,\n    deadline: payload.deadline ?? existing.deadline,\n    updatedAt: new Date().toISOString(),\n  };\n  memoryGoals.set(goalId, updated);\n  return updated;\n}\n\nexport async function archiveGoal(goalId: string): Promise<void> {\n  const db = getFirestoreAdmin();\n  if (db) {\n    await db.collection(GOAL_COLLECTION).doc(goalId).set({ archived: true, status: \"archived\", updatedAt: Timestamp.now() }, { merge: true });\n    return;\n  }\n  const existing = memoryGoals.get(goalId);\n  if (existing) {\n    memoryGoals.set(goalId, { ...existing, archived: true, status: \"archived\", updatedAt: new Date().toISOString() });\n  }\n}\n\nexport async function fundGoal(goalId: string, amount: number): Promise<Goal> {\n  if (Number.isNaN(amount) || amount <= 0) throw new Error(\"Amount must be positive\");\n  const db = getFirestoreAdmin();\n  if (db) {\n    const docRef = db.collection(GOAL_COLLECTION).doc(goalId);\n    await docRef.set(\n      {\n        current: FieldValue.increment(amount),\n        updatedAt: Timestamp.now(),\n      },\n      { merge: true },\n    );\n    const snapshot = await docRef.get();\n    return serializeGoal(snapshot.id, snapshot.data()!);\n  }\n  const existing = memoryGoals.get(goalId);\n  if (!existing) throw new Error(\"Goal not found\");\n  const updated: Goal = {\n    ...existing,\n    current: existing.current + amount,\n    updatedAt: new Date().toISOString(),\n  };\n  memoryGoals.set(goalId, updated);\n  return updated;\n}\n\nexport async function upsertAutoFundRule(\n  goalId: string,\n  payload: AutoFundRule & { untilTarget?: boolean; untilDate?: string; note?: string },\n): Promise<{ automationId: string; goal: Goal }> {\n  const automationId = randomUUID();\n  const db = getFirestoreAdmin();\n  if (db) {\n    await db.collection(AUTOMATION_COLLECTION).doc(automationId).set({\n      type: \"autoFund\",\n      goalId,\n      trigger: { type: \"cron\", freq: payload.frequency },\n      action: { transfer: payload.amount, sourceAccountId: payload.sourceAccountId },\n      meta: { untilTarget: payload.untilTarget ?? true, untilDate: payload.untilDate ?? null, note: payload.note ?? null },\n      enabled: true,\n      createdAt: Timestamp.now(),\n    });\n    await db.collection(GOAL_COLLECTION).doc(goalId).set({ autoFundRule: payload, updatedAt: Timestamp.now() }, { merge: true });\n    const updated = await getGoal(goalId);\n    if (!updated) throw new Error(\"Goal not found after automation\");\n    return { automationId, goal: updated };\n  }\n  memoryAutomations.push({ id: automationId, goalId, rule: payload });\n  const existing = memoryGoals.get(goalId);\n  if (!existing) throw new Error(\"Goal not found\");\n  const updatedGoal = { ...existing, autoFundRule: payload, updatedAt: new Date().toISOString() };\n  memoryGoals.set(goalId, updatedGoal);\n  return { automationId, goal: updatedGoal };\n}\n\nfunction computeSimulation(goal: Goal, input: SimulationInput): SimulationResult {\n  const monthlyContribution = input.weeklyContribution * (52 / 12) * (1 + input.incomeChangePct / 100);\n  const points: { monthLabel: string; projectedTotal: number; contribution: number }[] = [];\n  let current = goal.current;\n  let month = 0;\n  const maxMonths = 60;\n\n  while (current < goal.target && month < maxMonths) {\n    current += monthlyContribution;\n    month += 1;\n    points.push({ monthLabel: `M${month}`, projectedTotal: Number(current.toFixed(2)), contribution: Number(monthlyContribution.toFixed(2)) });\n  }\n\n  if (points.length === 0) {\n    points.push({ monthLabel: \"Now\", projectedTotal: goal.current, contribution: 0 });\n  }\n\n  const reachDate = new Date();\n  reachDate.setMonth(reachDate.getMonth() + month);\n\n  return {\n    points,\n    monthsToTarget: month,\n    reachDate: reachDate.toISOString(),\n  };\n}\n\nexport async function simulateGoal(goalId: string, input: SimulationInput): Promise<SimulationResult> {\n  const goal = await getGoal(goalId);\n  if (!goal) throw new Error(\"Goal not found\");\n  return computeSimulation(goal, input);\n}\n\nconst fallbackFundingAccounts: FundingAccount[] = [\n  { id: \"plaid-checking\", name: \"Checking • 5231\", balance: 8200, institution: \"Royal Bank\", type: \"checking\", currency: \"USD\" },\n  { id: \"plaid-savings\", name: \"High Yield • 9944\", balance: 15200, institution: \"Ally\", type: \"savings\", currency: \"USD\" },\n  { id: \"plaid-invest\", name: \"Invest • 7710\", balance: 6400, institution: \"Wealthsimple\", type: \"investment\", currency: \"USD\" },\n];\n\nexport async function listFundingAccounts(): Promise<FundingAccount[]> {\n  return fallbackFundingAccounts;\n}\n\nexport async function computeAutomationSuggestion(): Promise<AutomationSuggestion | null> {\n  const goals = await listGoals();\n  const atRisk = goals\n    .filter(goal => !goal.archived && goal.current < goal.target)\n    .sort((a, b) => {\n      const deadlineA = a.deadline ? new Date(a.deadline).getTime() : Infinity;\n      const deadlineB = b.deadline ? new Date(b.deadline).getTime() : Infinity;\n      return deadlineA - deadlineB;\n    });\n  const targetGoal = atRisk[0];\n  if (!targetGoal) return null;\n  const remaining = targetGoal.target - targetGoal.current;\n  const weeksLeft = targetGoal.deadline ? Math.max(1, Math.round((new Date(targetGoal.deadline).getTime() - Date.now()) / (1000 * 60 * 60 * 24 * 7))) : 16;\n  const recommendedIncrease = Math.max(10, Math.round(remaining / weeksLeft / 10) * 10);\n  return {\n    id: `suggest-${targetGoal.id}`,\n    goalId: targetGoal.id,\n    headline: `Boost ${targetGoal.name} by $${recommendedIncrease}/week to stay on track`,\n    detail: `You're currently on pace to miss the ${targetGoal.deadline ? new Date(targetGoal.deadline).toLocaleDateString() : \"target\"}. Beno recommends a ${recommendedIncrease > 0 ? `$${recommendedIncrease}` : \"small\"} bump per cycle.`,\n    recommendedIncrease,\n    cta: {\n      applyLabel: \"Apply rule\",\n      simulateLabel: \"Simulate new plan\",\n    },\n  };\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 456, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/api/goals/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport { createGoal, listGoals } from \"./store\";\n\nexport async function GET() {\n  const goals = await listGoals();\n  return NextResponse.json(goals);\n}\n\nexport async function POST(request: Request) {\n  try {\n    const payload = await request.json();\n    const goal = await createGoal(payload);\n    return NextResponse.json(goal, { status: 201 });\n  } catch (error) {\n    console.error(\"[goals] create failed\", error);\n    return NextResponse.json({ error: \"Failed to create goal\" }, { status: 400 });\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;;;;;AAEO,eAAe;IACpB,MAAM,QAAQ,MAAM,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IAC5B,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;AAC3B;AAEO,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,UAAU,MAAM,QAAQ,IAAI;QAClC,MAAM,OAAO,MAAM,CAAA,GAAA,qIAAA,CAAA,aAAU,AAAD,EAAE;QAC9B,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC,MAAM;YAAE,QAAQ;QAAI;IAC/C,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC7E;AACF","debugId":null}}]
}