{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/core/sse.ts"],"sourcesContent":["import { randomUUID } from \"crypto\";\n\ntype Client = {\n  id: string;\n  send: (data: string) => void;\n};\n\nconst clients = new Map<string, Client>();\n\nexport function registerClient(send: Client[\"send\"]) {\n  const id = randomUUID();\n  const client: Client = { id, send };\n  clients.set(id, client);\n  return () => {\n    clients.delete(id);\n  };\n}\n\nexport function broadcastProjectionUpdate(keys: string[]) {\n  const payload = JSON.stringify({ keys });\n  for (const client of clients.values()) {\n    client.send(`data: ${payload}\\n\\n`);\n  }\n}\n\n"],"names":[],"mappings":";;;;AAAA;;AAOA,MAAM,UAAU,IAAI;AAEb,SAAS,eAAe,IAAoB;IACjD,MAAM,KAAK,CAAA,GAAA,qGAAA,CAAA,aAAU,AAAD;IACpB,MAAM,SAAiB;QAAE;QAAI;IAAK;IAClC,QAAQ,GAAG,CAAC,IAAI;IAChB,OAAO;QACL,QAAQ,MAAM,CAAC;IACjB;AACF;AAEO,SAAS,0BAA0B,IAAc;IACtD,MAAM,UAAU,KAAK,SAAS,CAAC;QAAE;IAAK;IACtC,KAAK,MAAM,UAAU,QAAQ,MAAM,GAAI;QACrC,OAAO,IAAI,CAAC,CAAC,MAAM,EAAE,QAAQ,IAAI,CAAC;IACpC;AACF","debugId":null}},
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/core/projections.ts"],"sourcesContent":["import { addMinutes, formatISO, subMinutes } from \"date-fns\";\nimport {\n  CanvasContext,\n  ImpactPlan,\n  Overview,\n  QueueItem,\n  ScenarioPreview,\n  TimelineEntry,\n} from \"../graph/types\";\nimport { EventRecord } from \"./eventLog\";\nimport { broadcastProjectionUpdate } from \"./sse\";\n\nconst overviewState: Overview = {\n  netWorth: 185000,\n  cashOnHand: { amount: 42000, runwayDays: 128 },\n  nextBills: { count: 5, total: 3200, soonest: new Date().toISOString() },\n  monthlyBurn: { actual: 6400, target: 6000 },\n  savingsProgress: { percent: 58, delta: 3 },\n  adherence: { percent30d: 92, onHandDays: 16 },\n  goals: {\n    top: [\n      { id: \"goal-emergency\", name: \"Emergency fund\", percent: 72, eta: \"2025-04-30\" },\n      { id: \"goal-rental\", name: \"Rental upgrade\", percent: 34, eta: \"2025-12-01\" },\n      { id: \"goal-pulse\", name: \"Pulse bankroll\", percent: 55 },\n    ],\n  },\n  pulse: { games: 3, bestValueScore: 7.6 },\n};\n\nlet queueState: QueueItem[] = [\n  {\n    id: \"bill-electric\",\n    kind: \"bill\",\n    category: \"finance\",\n    title: \"Electric Co. payment due\",\n    detail: \"Due in 2 days · autopay off\",\n    priorityScore: 86,\n    impact: { runwayDelta: -3 },\n    actions: [\"Accept\", \"Schedule\", \"Nudge\", \"Explain\", \"Open\"],\n    links: [\n      { entityId: \"bill-electric\", entityType: \"bill\" },\n      { entityId: \"doc-electric-statement\", entityType: \"document\" },\n    ],\n  },\n  {\n    id: \"goal-emergency\",\n    kind: \"goalUnderfunded\",\n    category: \"goals\",\n    title: \"Emergency fund behind pace\",\n    detail: \"Allocate $300 to recover 2 weeks\",\n    priorityScore: 74,\n    impact: { goalEtaDeltaDays: -14 },\n    actions: [\"Accept\", \"Simulate\", \"Explain\"],\n    links: [{ entityId: \"goal-emergency\", entityType: \"goal\" }],\n  },\n  {\n    id: \"dose-levothyroxine\",\n    kind: \"doseOverdue\",\n    category: \"care\",\n    title: \"Levothyroxine dose overdue\",\n    detail: \"Missed 30m · safety bypass active\",\n    priorityScore: 92,\n    impact: { adherenceDelta: 2 },\n    actions: [\"Accept\", \"Nudge\", \"Explain\"],\n    links: [\n      { entityId: \"med-levothyroxine\", entityType: \"medication\" },\n      { entityId: \"dose-levothyroxine\", entityType: \"dose\" },\n    ],\n  },\n  {\n    id: \"weather-storm\",\n    kind: \"weatherAlert\",\n    category: \"home\",\n    title: \"Severe weather incoming\",\n    detail: \"Wind advisory overlaps soccer practice\",\n    priorityScore: 65,\n    actions: [\"Schedule\", \"Explain\", \"Open\"],\n    links: [{ entityId: \"event-soccer\", entityType: \"event\" }],\n  },\n  {\n    id: \"pulse-value\",\n    kind: \"valuePlay\",\n    category: \"pulse\",\n    title: \"Lakers -3.5 model edge\",\n    detail: \"Edge +6.2% after injury update\",\n    priorityScore: 61,\n    impact: { runwayDelta: 1 },\n    actions: [\"Simulate\", \"Explain\", \"Open\"],\n    links: [{ entityId: \"play-lakers\", entityType: \"play\" }],\n  },\n];\n\nconst contextById = new Map<string, CanvasContext>();\n\nfunction buildTimeline(baseId: string, label: string): TimelineEntry[] {\n  const now = new Date();\n  return [\n    {\n      id: `${baseId}-timeline-1`,\n      date: subMinutes(now, 120).toISOString(),\n      label: `${label} flagged`,\n      detail: \"System raised attention item\",\n      status: \"completed\",\n    },\n    {\n      id: `${baseId}-timeline-2`,\n      date: now.toISOString(),\n      label: \"Review in Command Bridge\",\n      detail: \"Awaiting decision\",\n      status: \"scheduled\",\n    },\n    {\n      id: `${baseId}-timeline-3`,\n      date: addMinutes(now, 45).toISOString(),\n      label: \"Auto follow-up\",\n      detail: \"Nudge planned if no action\",\n      status: \"atRisk\",\n    },\n  ];\n}\n\nfunction seedContexts() {\n  contextById.set(\n    \"Electric Co. payment due\",\n    {\n      summary: {\n        title: \"Electric Co. payment due\",\n        subtitle: \"$182 · due in 2 days · autopay disabled\",\n        impact: { runwayDays: -3 },\n      },\n      timeline: buildTimeline(\"bill-electric\", \"Bill\"),\n      cashflow: {\n        variance: 4,\n        burnRate: 6200,\n        transactions: [\n          {\n            id: \"txn-electric-last\",\n            postedAt: subMinutes(new Date(), 1440).toISOString(),\n            amount: 182,\n            category: \"Utilities\",\n            status: \"cleared\",\n            memo: \"Last month paid\",\n          },\n          {\n            id: \"txn-electric-forecast\",\n            postedAt: addMinutes(new Date(), 2880).toISOString(),\n            amount: 186,\n            category: \"Utilities\",\n            status: \"forecast\",\n            memo: \"Forecast next\",\n          },\n        ],\n      },\n      docs: [\n        {\n          id: \"doc-electric-statement\",\n          name: \"Statement Mar\",\n          kind: \"invoice\",\n          uploadedAt: formatISO(subMinutes(new Date(), 60)),\n          link: \"#\",\n        },\n      ],\n      people: [\n        {\n          id: \"contact-utility\",\n          name: \"Utility support\",\n          role: \"Vendor\",\n          reachableVia: [\"phone\", \"email\"],\n          preferredChannel: \"email\",\n        },\n      ],\n      rules: [\n        {\n          id: \"rule-bill-notify\",\n          name: \"Alert if utilities unpaid 3d\",\n          status: \"enabled\",\n          description: \"Sends nudge and raises queue item\",\n          lastRunAt: subMinutes(new Date(), 5).toISOString(),\n          hitCount: 12,\n        },\n      ],\n      scenarios: [\n        {\n          id: \"scenario-pay-now\",\n          title: \"Pay now\",\n          description: \"Reduces runway by 3 days but clears queue\",\n          runwayDelta: -3,\n        },\n        {\n          id: \"scenario-schedule\",\n          title: \"Schedule Friday\",\n          description: \"Keeps runway neutral; increases burn variance\",\n          burnDelta: 1.5,\n        },\n      ],\n      explain: [\n        \"Bill flagged due to autopay disabled\",\n        \"Runway impact computed from cash forecast\",\n      ],\n    }\n  );\n\n  contextById.set(\n    \"Emergency fund behind pace\",\n    {\n      summary: {\n        title: \"Emergency fund behind pace\",\n        subtitle: \"Target $25k · currently $18k\",\n        impact: { goalEtaDeltaDays: -14 },\n      },\n      timeline: buildTimeline(\"goal-emergency\", \"Goal\"),\n      cashflow: {\n        variance: 3,\n        burnRate: 5800,\n        transactions: [\n          {\n            id: \"txn-savings-boost\",\n            postedAt: subMinutes(new Date(), 720).toISOString(),\n            amount: 500,\n            category: \"Transfer\",\n            status: \"cleared\",\n            memo: \"Transfer to savings\",\n          },\n        ],\n      },\n      docs: [\n        {\n          id: \"doc-goal-plan\",\n          name: \"Goal planning worksheet\",\n          kind: \"other\",\n          uploadedAt: subMinutes(new Date(), 7200).toISOString(),\n        },\n      ],\n      people: [\n        {\n          id: \"contact-beno\",\n          name: \"Beno\",\n          role: \"Owner\",\n          reachableVia: [\"sms\", \"email\"],\n        },\n        {\n          id: \"contact-leo\",\n          name: \"Leo\",\n          role: \"Household\",\n          reachableVia: [\"sms\"],\n        },\n      ],\n      rules: [\n        {\n          id: \"rule-goal-variance\",\n          name: \"Alert if goal trending behind\",\n          status: \"enabled\",\n          description: \"Triggers when ETA slips\",\n          lastRunAt: subMinutes(new Date(), 20).toISOString(),\n          hitCount: 4,\n        },\n      ],\n      scenarios: [\n        {\n          id: \"scenario-allocate-300\",\n          title: \"Allocate $300\",\n          description: \"ETA moves forward 2 weeks\",\n          goalEtaDeltaDays: -14,\n        },\n        {\n          id: \"scenario-sweep-bonus\",\n          title: \"Sweep bonus\",\n          description: \"Runway -1 day; goal complete\",\n          runwayDelta: -1,\n        },\n      ],\n      explain: [\n        \"Goal slip detected from last month trend\",\n        \"Personal weight high because tagged 'safety'\",\n      ],\n    }\n  );\n\n  contextById.set(\n    \"Levothyroxine dose overdue\",\n    {\n      summary: {\n        title: \"Levothyroxine dose overdue\",\n        subtitle: \"Missed 30 minutes\",\n        impact: { adherence: 2 },\n      },\n      timeline: buildTimeline(\"dose-levothyroxine\", \"Care\"),\n      cashflow: {\n        variance: 0,\n        burnRate: 0,\n        transactions: [],\n      },\n      docs: [\n        {\n          id: \"doc-medication-plan\",\n          name: \"Medication schedule\",\n          kind: \"medical\",\n          uploadedAt: subMinutes(new Date(), 1440).toISOString(),\n        },\n      ],\n      people: [\n        {\n          id: \"contact-dr-carter\",\n          name: \"Dr. Carter\",\n          role: \"Endocrinologist\",\n          reachableVia: [\"portal\", \"phone\"],\n        },\n      ],\n      rules: [\n        {\n          id: \"rule-dose-quiet\",\n          name: \"Bypass quiet hours if >20m overdue\",\n          status: \"enabled\",\n          description: \"Ensures adherence\",\n          lastRunAt: subMinutes(new Date(), 10).toISOString(),\n          hitCount: 18,\n        },\n      ],\n      scenarios: [\n        {\n          id: \"scenario-mark-taken\",\n          title: \"Mark as taken\",\n          description: \"Restores adherence\",\n          adherenceDelta: 2,\n        },\n        {\n          id: \"scenario-snooze\",\n          title: \"Snooze 15m\",\n          description: \"Keeps quiet hours respected\",\n        },\n      ],\n      explain: [\"Dose overdue threshold reached\"],\n    }\n  );\n}\n\nseedContexts();\n\nexport type ContextResponse = {\n  context: CanvasContext;\n};\n\nfunction removeQueueItem(id: string) {\n  queueState = queueState.filter(item => item.id !== id);\n}\n\nfunction pushQueueItem(item: QueueItem) {\n  const existing = queueState.find(q => q.id === item.id);\n  if (!existing) {\n    queueState = [...queueState, item];\n  } else {\n    queueState = queueState.map(q => (q.id === item.id ? item : q));\n  }\n  queueState.sort((a, b) => b.priorityScore - a.priorityScore);\n}\n\nexport function getOverview(): Overview {\n  return overviewState;\n}\n\nexport function getQueue(filter?: string): QueueItem[] {\n  const normalized = filter?.toLowerCase();\n  const filtered = normalized && normalized !== \"all\"\n    ? queueState.filter(item => item.category === normalized)\n    : queueState;\n  return filtered.sort((a, b) => b.priorityScore - a.priorityScore);\n}\n\nexport function getContextByQueueItemId(id: string) {\n  const item = queueState.find(q => q.id === id);\n  if (!item) return null;\n  return contextById.get(item.title) ?? null;\n}\n\nexport function recordContextUpdate(id: string, context: CanvasContext) {\n  contextById.set(id, context);\n}\n\nexport function applyEvents(events: EventRecord[]) {\n  const dirty = new Set<string>();\n\n  events.forEach(event => {\n    switch (event.type) {\n      case \"bill.paid\": {\n        removeQueueItem(\"bill-electric\");\n        overviewState.cashOnHand.amount -= Number(event.payload.amount ?? 0);\n        overviewState.monthlyBurn.actual += Number(event.payload.amount ?? 0);\n        overviewState.nextBills.count = Math.max(0, overviewState.nextBills.count - 1);\n        dirty.add(\"bridge:queue\");\n        dirty.add(\"bridge:overview\");\n        break;\n      }\n      case \"goal.allocated\": {\n        const allocation = Number(event.payload.amount ?? 0);\n        const goal = overviewState.goals.top.find(g => g.id === event.payload.goalId);\n        if (goal) {\n          goal.percent = Math.min(100, goal.percent + allocation / 300);\n        }\n        overviewState.savingsProgress.percent = Math.min(100, overviewState.savingsProgress.percent + allocation / 500);\n        dirty.add(\"bridge:overview\");\n        break;\n      }\n      case \"dose.taken\": {\n        overviewState.adherence.percent30d = Math.min(100, overviewState.adherence.percent30d + 1);\n        removeQueueItem(\"dose-levothyroxine\");\n        dirty.add(\"bridge:overview\");\n        dirty.add(\"bridge:queue\");\n        break;\n      }\n      case \"refill.requested\": {\n        pushQueueItem({\n          id: `refill-${event.payload.medicationId}`,\n          kind: \"refill\",\n          category: \"care\",\n          title: \"Refill requested\",\n          detail: \"Pharmacy notified\",\n          priorityScore: 48,\n          actions: [\"Explain\", \"Open\"],\n        });\n        dirty.add(\"bridge:queue\");\n        break;\n      }\n      case \"doc.linked\": {\n        dirty.add(\"bridge:context\");\n        break;\n      }\n      case \"event.created\": {\n        dirty.add(\"bridge:context\");\n        break;\n      }\n      case \"play.tracked\": {\n        overviewState.pulse.games += 1;\n        dirty.add(\"bridge:overview\");\n        break;\n      }\n      default:\n        break;\n    }\n  });\n\n  if (dirty.size > 0) {\n    broadcastProjectionUpdate([...dirty]);\n  }\n}\n\nexport function buildScenarioFromImpact(impact: ImpactPlan[\"kpiDelta\"] | undefined): ScenarioPreview | null {\n  if (!impact) return null;\n  return {\n    id: `scenario-${Math.random().toString(36).slice(2)}`,\n    title: \"Proposed plan\",\n    description: \"Preview of projected metrics\",\n    runwayDelta: impact.runwayDays,\n    burnDelta: impact.burnDelta,\n    goalEtaDeltaDays: impact.goalEtaDeltaDays,\n  };\n}\n\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 656, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/graph/types.ts"],"sourcesContent":["import { z } from \"zod\";\n\nexport const idSchema = z.string().min(1, \"id required\");\n\nexport const timestampSchema = z.union([\n  z.string(),\n  z.date(),\n]);\n\nconst currencySchema = z.object({\n  amount: z.number(),\n  currency: z.string().default(\"USD\"),\n});\n\nexport const transactionSchema = z.object({\n  id: idSchema,\n  accountId: idSchema,\n  postedAt: timestampSchema,\n  description: z.string(),\n  amount: z.number(),\n  category: z.string(),\n  status: z.enum([\"cleared\", \"pending\", \"split\"]),\n  linkedDocuments: z.array(idSchema).default([]),\n});\n\nexport const billSchema = z.object({\n  id: idSchema,\n  name: z.string(),\n  dueDate: timestampSchema,\n  amount: currencySchema,\n  status: z.enum([\"due\", \"paid\", \"overdue\"]),\n  autopay: z.boolean().default(false),\n  accountId: idSchema.optional(),\n});\n\nexport const budgetPeriodSchema = z.object({\n  id: idSchema,\n  name: z.string(),\n  start: timestampSchema,\n  end: timestampSchema,\n  planned: z.number(),\n  actual: z.number(),\n});\n\nexport const goalSchema = z.object({\n  id: idSchema,\n  name: z.string(),\n  targetAmount: z.number(),\n  currentAmount: z.number(),\n  eta: timestampSchema.optional(),\n});\n\nexport const accountSchema = z.object({\n  id: idSchema,\n  name: z.string(),\n  type: z.enum([\"cash\", \"credit\", \"investment\", \"loan\"]),\n  balance: z.number(),\n});\n\nexport const documentSchema = z.object({\n  id: idSchema,\n  name: z.string(),\n  kind: z.enum([\"invoice\", \"receipt\", \"id\", \"medical\", \"other\"]).default(\"other\"),\n  uploadedAt: timestampSchema,\n  sizeKb: z.number().nonnegative(),\n});\n\nexport const eventSchema = z.object({\n  id: idSchema,\n  title: z.string(),\n  startsAt: timestampSchema,\n  endsAt: timestampSchema.optional(),\n  location: z.string().optional(),\n  category: z.string().optional(),\n});\n\nexport const routineSchema = z.object({\n  id: idSchema,\n  name: z.string(),\n  cadence: z.string(),\n  nextOccurrence: timestampSchema,\n});\n\nexport const careProfileSchema = z.object({\n  id: idSchema,\n  name: z.string(),\n  relationship: z.string(),\n});\n\nexport const medicationSchema = z.object({\n  id: idSchema,\n  name: z.string(),\n  dosage: z.string(),\n  schedule: z.array(\n    z.object({\n      time: z.string(),\n      quantity: z.number(),\n    })\n  ),\n});\n\nexport const doseSchema = z.object({\n  id: idSchema,\n  medicationId: idSchema,\n  scheduledAt: timestampSchema,\n  takenAt: timestampSchema.optional(),\n  status: z.enum([\"scheduled\", \"taken\", \"missed\"]),\n});\n\nexport const refillSchema = z.object({\n  id: idSchema,\n  medicationId: idSchema,\n  requestedAt: timestampSchema,\n  status: z.enum([\"pending\", \"submitted\", \"ready\", \"picked_up\"]),\n});\n\nexport const assetSchema = z.object({\n  id: idSchema,\n  name: z.string(),\n  kind: z.enum([\"stock\", \"bond\", \"crypto\", \"cash\", \"other\"]),\n  value: currencySchema,\n  change24h: z.number().optional(),\n});\n\nexport const meterSchema = z.object({\n  id: idSchema,\n  name: z.string(),\n  value: z.number(),\n  unit: z.string(),\n  updatedAt: timestampSchema,\n});\n\nexport const nudgeSchema = z.object({\n  id: idSchema,\n  title: z.string(),\n  message: z.string(),\n  channel: z.enum([\"sms\", \"email\", \"push\", \"whatsapp\"]),\n  scheduledFor: timestampSchema.optional(),\n});\n\nexport const playSchema = z.object({\n  id: idSchema,\n  team: z.string(),\n  opponent: z.string(),\n  line: z.number(),\n  impliedProb: z.number(),\n  kickoff: timestampSchema,\n});\n\nexport const edgeSchema = z.object({\n  id: idSchema,\n  fromId: idSchema,\n  toId: idSchema,\n  role: z.string(),\n  confidence: z.number().min(0).max(1).default(0.5),\n});\n\nexport type Transaction = z.infer<typeof transactionSchema>;\nexport type Bill = z.infer<typeof billSchema>;\nexport type BudgetPeriod = z.infer<typeof budgetPeriodSchema>;\nexport type Goal = z.infer<typeof goalSchema>;\nexport type Account = z.infer<typeof accountSchema>;\nexport type Document = z.infer<typeof documentSchema>;\nexport type Event = z.infer<typeof eventSchema>;\nexport type Routine = z.infer<typeof routineSchema>;\nexport type CareProfile = z.infer<typeof careProfileSchema>;\nexport type Medication = z.infer<typeof medicationSchema>;\nexport type Dose = z.infer<typeof doseSchema>;\nexport type Refill = z.infer<typeof refillSchema>;\nexport type Asset = z.infer<typeof assetSchema>;\nexport type Meter = z.infer<typeof meterSchema>;\nexport type Nudge = z.infer<typeof nudgeSchema>;\nexport type Play = z.infer<typeof playSchema>;\nexport type Edge = z.infer<typeof edgeSchema>;\n\nexport const overviewSchema = z.object({\n  netWorth: z.number(),\n  cashOnHand: z.object({\n    amount: z.number(),\n    runwayDays: z.number(),\n  }),\n  nextBills: z.object({\n    count: z.number(),\n    total: z.number(),\n    soonest: z.string(),\n  }),\n  monthlyBurn: z.object({\n    actual: z.number(),\n    target: z.number(),\n  }),\n  savingsProgress: z.object({\n    percent: z.number(),\n    delta: z.number(),\n  }),\n  adherence: z.object({\n    percent30d: z.number(),\n    onHandDays: z.number().optional(),\n  }),\n  goals: z.object({\n    top: z.array(\n      z.object({\n        id: z.string(),\n        name: z.string(),\n        percent: z.number(),\n        eta: z.string().optional(),\n      })\n    ),\n  }),\n  pulse: z.object({\n    games: z.number(),\n    bestValueScore: z.number(),\n  }),\n});\n\nexport type Overview = z.infer<typeof overviewSchema>;\n\nexport const queueItemSchema = z.object({\n  id: z.string(),\n  kind: z.union([\n    z.literal(\"bill\"),\n    z.literal(\"budgetVariance\"),\n    z.literal(\"txnDuplicate\"),\n    z.literal(\"refill\"),\n    z.literal(\"doseOverdue\"),\n    z.literal(\"docExpiry\"),\n    z.literal(\"rentLedger\"),\n    z.literal(\"goalUnderfunded\"),\n    z.literal(\"maintenance\"),\n    z.literal(\"valuePlay\"),\n    z.literal(\"weatherAlert\"),\n  ]),\n  title: z.string(),\n  detail: z.string(),\n  priorityScore: z.number().min(0).max(100),\n  impact: z\n    .object({\n      runwayDelta: z.number().optional(),\n      burnDelta: z.number().optional(),\n      goalEtaDeltaDays: z.number().optional(),\n      adherenceDelta: z.number().optional(),\n    })\n    .optional(),\n  links: z\n    .array(\n      z.object({\n        entityId: z.string(),\n        entityType: z.string(),\n      })\n    )\n    .optional(),\n  actions: z.array(\n    z.union([\n      z.literal(\"Accept\"),\n      z.literal(\"Schedule\"),\n      z.literal(\"Nudge\"),\n      z.literal(\"Simulate\"),\n      z.literal(\"Explain\"),\n      z.literal(\"Open\"),\n      z.literal(\"Ignore\"),\n    ])\n  ),\n  category: z\n    .union([\n      z.literal(\"finance\"),\n      z.literal(\"care\"),\n      z.literal(\"home\"),\n      z.literal(\"goals\"),\n      z.literal(\"pulse\"),\n    ])\n    .default(\"finance\"),\n});\n\nexport type QueueItem = z.infer<typeof queueItemSchema>;\n\nexport const impactPlanSchema = z.object({\n  warnings: z.array(z.string()),\n  derivedWrites: z.array(\n    z.object({\n      collection: z.string(),\n      id: z.string(),\n      change: z.enum([\"create\", \"update\", \"delete\"]),\n      diff: z.record(z.any()),\n    })\n  ),\n  automations: z.array(\n    z.object({\n      ruleId: z.string(),\n      action: z.string(),\n      params: z.record(z.any()).optional(),\n    })\n  ),\n  aggregatesToRecompute: z.array(z.string()),\n  kpiDelta: z\n    .object({\n      runwayDays: z.number().optional(),\n      burnDelta: z.number().optional(),\n      adherence: z.number().optional(),\n      goalEtaDeltaDays: z.number().optional(),\n    })\n    .optional(),\n});\n\nexport type ImpactPlan = z.infer<typeof impactPlanSchema>;\n\nexport const commandSchema = z.object({\n  type: z.union([\n    z.literal(\"txn.reclassify.bulk\"),\n    z.literal(\"bill.markPaid\"),\n    z.literal(\"goal.allocate\"),\n    z.literal(\"doc.link\"),\n    z.literal(\"event.create\"),\n    z.literal(\"dose.log\"),\n    z.literal(\"refill.request\"),\n    z.literal(\"rule.create\"),\n    z.literal(\"play.track\"),\n  ]),\n  payload: z.record(z.any()),\n  idempotencyKey: z.string(),\n  signedImpactPlan: impactPlanSchema.optional(),\n});\n\nexport type Command = z.infer<typeof commandSchema>;\n\nexport type TimelineEntry = {\n  id: string;\n  date: string;\n  label: string;\n  detail: string;\n  status: \"scheduled\" | \"completed\" | \"atRisk\";\n};\n\nexport type CashflowInsight = {\n  id: string;\n  postedAt: string;\n  amount: number;\n  category: string;\n  status: \"cleared\" | \"pending\" | \"forecast\";\n  memo?: string;\n};\n\nexport type DocSummary = {\n  id: string;\n  name: string;\n  kind: string;\n  uploadedAt: string;\n  link?: string;\n};\n\nexport type PersonSummary = {\n  id: string;\n  name: string;\n  role: string;\n  reachableVia: string[];\n  preferredChannel?: string;\n};\n\nexport type RuleSummary = {\n  id: string;\n  name: string;\n  status: \"enabled\" | \"disabled\";\n  description: string;\n  lastRunAt?: string;\n  hitCount: number;\n};\n\nexport type ScenarioPreview = {\n  id: string;\n  title: string;\n  description: string;\n  runwayDelta?: number;\n  burnDelta?: number;\n  goalEtaDeltaDays?: number;\n};\n\nexport type CanvasContext = {\n  summary: {\n    title: string;\n    subtitle: string;\n    impact?: ImpactPlan[\"kpiDelta\"];\n  };\n  timeline: TimelineEntry[];\n  cashflow: {\n    variance: number;\n    burnRate: number;\n    transactions: CashflowInsight[];\n  };\n  docs: DocSummary[];\n  people: PersonSummary[];\n  rules: RuleSummary[];\n  scenarios: ScenarioPreview[];\n  explain: string[];\n};\n\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AAEO,MAAM,WAAW,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;AAEnC,MAAM,kBAAkB,sIAAA,CAAA,IAAC,CAAC,KAAK,CAAC;IACrC,sIAAA,CAAA,IAAC,CAAC,MAAM;IACR,sIAAA,CAAA,IAAC,CAAC,IAAI;CACP;AAED,MAAM,iBAAiB,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAC9B,QAAQ,sIAAA,CAAA,IAAC,CAAC,MAAM;IAChB,UAAU,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,OAAO,CAAC;AAC/B;AAEO,MAAM,oBAAoB,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IACxC,IAAI;IACJ,WAAW;IACX,UAAU;IACV,aAAa,sIAAA,CAAA,IAAC,CAAC,MAAM;IACrB,QAAQ,sIAAA,CAAA,IAAC,CAAC,MAAM;IAChB,UAAU,sIAAA,CAAA,IAAC,CAAC,MAAM;IAClB,QAAQ,sIAAA,CAAA,IAAC,CAAC,IAAI,CAAC;QAAC;QAAW;QAAW;KAAQ;IAC9C,iBAAiB,sIAAA,CAAA,IAAC,CAAC,KAAK,CAAC,UAAU,OAAO,CAAC,EAAE;AAC/C;AAEO,MAAM,aAAa,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IACjC,IAAI;IACJ,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM;IACd,SAAS;IACT,QAAQ;IACR,QAAQ,sIAAA,CAAA,IAAC,CAAC,IAAI,CAAC;QAAC;QAAO;QAAQ;KAAU;IACzC,SAAS,sIAAA,CAAA,IAAC,CAAC,OAAO,GAAG,OAAO,CAAC;IAC7B,WAAW,SAAS,QAAQ;AAC9B;AAEO,MAAM,qBAAqB,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IACzC,IAAI;IACJ,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM;IACd,OAAO;IACP,KAAK;IACL,SAAS,sIAAA,CAAA,IAAC,CAAC,MAAM;IACjB,QAAQ,sIAAA,CAAA,IAAC,CAAC,MAAM;AAClB;AAEO,MAAM,aAAa,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IACjC,IAAI;IACJ,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM;IACd,cAAc,sIAAA,CAAA,IAAC,CAAC,MAAM;IACtB,eAAe,sIAAA,CAAA,IAAC,CAAC,MAAM;IACvB,KAAK,gBAAgB,QAAQ;AAC/B;AAEO,MAAM,gBAAgB,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IACpC,IAAI;IACJ,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM;IACd,MAAM,sIAAA,CAAA,IAAC,CAAC,IAAI,CAAC;QAAC;QAAQ;QAAU;QAAc;KAAO;IACrD,SAAS,sIAAA,CAAA,IAAC,CAAC,MAAM;AACnB;AAEO,MAAM,iBAAiB,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IACrC,IAAI;IACJ,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM;IACd,MAAM,sIAAA,CAAA,IAAC,CAAC,IAAI,CAAC;QAAC;QAAW;QAAW;QAAM;QAAW;KAAQ,EAAE,OAAO,CAAC;IACvE,YAAY;IACZ,QAAQ,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,WAAW;AAChC;AAEO,MAAM,cAAc,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAClC,IAAI;IACJ,OAAO,sIAAA,CAAA,IAAC,CAAC,MAAM;IACf,UAAU;IACV,QAAQ,gBAAgB,QAAQ;IAChC,UAAU,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;IAC7B,UAAU,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;AAC/B;AAEO,MAAM,gBAAgB,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IACpC,IAAI;IACJ,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM;IACd,SAAS,sIAAA,CAAA,IAAC,CAAC,MAAM;IACjB,gBAAgB;AAClB;AAEO,MAAM,oBAAoB,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IACxC,IAAI;IACJ,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM;IACd,cAAc,sIAAA,CAAA,IAAC,CAAC,MAAM;AACxB;AAEO,MAAM,mBAAmB,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IACvC,IAAI;IACJ,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM;IACd,QAAQ,sIAAA,CAAA,IAAC,CAAC,MAAM;IAChB,UAAU,sIAAA,CAAA,IAAC,CAAC,KAAK,CACf,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACP,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM;QACd,UAAU,sIAAA,CAAA,IAAC,CAAC,MAAM;IACpB;AAEJ;AAEO,MAAM,aAAa,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IACjC,IAAI;IACJ,cAAc;IACd,aAAa;IACb,SAAS,gBAAgB,QAAQ;IACjC,QAAQ,sIAAA,CAAA,IAAC,CAAC,IAAI,CAAC;QAAC;QAAa;QAAS;KAAS;AACjD;AAEO,MAAM,eAAe,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IACnC,IAAI;IACJ,cAAc;IACd,aAAa;IACb,QAAQ,sIAAA,CAAA,IAAC,CAAC,IAAI,CAAC;QAAC;QAAW;QAAa;QAAS;KAAY;AAC/D;AAEO,MAAM,cAAc,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAClC,IAAI;IACJ,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM;IACd,MAAM,sIAAA,CAAA,IAAC,CAAC,IAAI,CAAC;QAAC;QAAS;QAAQ;QAAU;QAAQ;KAAQ;IACzD,OAAO;IACP,WAAW,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;AAChC;AAEO,MAAM,cAAc,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAClC,IAAI;IACJ,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM;IACd,OAAO,sIAAA,CAAA,IAAC,CAAC,MAAM;IACf,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM;IACd,WAAW;AACb;AAEO,MAAM,cAAc,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAClC,IAAI;IACJ,OAAO,sIAAA,CAAA,IAAC,CAAC,MAAM;IACf,SAAS,sIAAA,CAAA,IAAC,CAAC,MAAM;IACjB,SAAS,sIAAA,CAAA,IAAC,CAAC,IAAI,CAAC;QAAC;QAAO;QAAS;QAAQ;KAAW;IACpD,cAAc,gBAAgB,QAAQ;AACxC;AAEO,MAAM,aAAa,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IACjC,IAAI;IACJ,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM;IACd,UAAU,sIAAA,CAAA,IAAC,CAAC,MAAM;IAClB,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM;IACd,aAAa,sIAAA,CAAA,IAAC,CAAC,MAAM;IACrB,SAAS;AACX;AAEO,MAAM,aAAa,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IACjC,IAAI;IACJ,QAAQ;IACR,MAAM;IACN,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM;IACd,YAAY,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,OAAO,CAAC;AAC/C;AAoBO,MAAM,iBAAiB,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IACrC,UAAU,sIAAA,CAAA,IAAC,CAAC,MAAM;IAClB,YAAY,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACnB,QAAQ,sIAAA,CAAA,IAAC,CAAC,MAAM;QAChB,YAAY,sIAAA,CAAA,IAAC,CAAC,MAAM;IACtB;IACA,WAAW,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QAClB,OAAO,sIAAA,CAAA,IAAC,CAAC,MAAM;QACf,OAAO,sIAAA,CAAA,IAAC,CAAC,MAAM;QACf,SAAS,sIAAA,CAAA,IAAC,CAAC,MAAM;IACnB;IACA,aAAa,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACpB,QAAQ,sIAAA,CAAA,IAAC,CAAC,MAAM;QAChB,QAAQ,sIAAA,CAAA,IAAC,CAAC,MAAM;IAClB;IACA,iBAAiB,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACxB,SAAS,sIAAA,CAAA,IAAC,CAAC,MAAM;QACjB,OAAO,sIAAA,CAAA,IAAC,CAAC,MAAM;IACjB;IACA,WAAW,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QAClB,YAAY,sIAAA,CAAA,IAAC,CAAC,MAAM;QACpB,YAAY,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;IACjC;IACA,OAAO,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACd,KAAK,sIAAA,CAAA,IAAC,CAAC,KAAK,CACV,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACP,IAAI,sIAAA,CAAA,IAAC,CAAC,MAAM;YACZ,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM;YACd,SAAS,sIAAA,CAAA,IAAC,CAAC,MAAM;YACjB,KAAK,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;QAC1B;IAEJ;IACA,OAAO,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACd,OAAO,sIAAA,CAAA,IAAC,CAAC,MAAM;QACf,gBAAgB,sIAAA,CAAA,IAAC,CAAC,MAAM;IAC1B;AACF;AAIO,MAAM,kBAAkB,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IACtC,IAAI,sIAAA,CAAA,IAAC,CAAC,MAAM;IACZ,MAAM,sIAAA,CAAA,IAAC,CAAC,KAAK,CAAC;QACZ,sIAAA,CAAA,IAAC,CAAC,OAAO,CAAC;QACV,sIAAA,CAAA,IAAC,CAAC,OAAO,CAAC;QACV,sIAAA,CAAA,IAAC,CAAC,OAAO,CAAC;QACV,sIAAA,CAAA,IAAC,CAAC,OAAO,CAAC;QACV,sIAAA,CAAA,IAAC,CAAC,OAAO,CAAC;QACV,sIAAA,CAAA,IAAC,CAAC,OAAO,CAAC;QACV,sIAAA,CAAA,IAAC,CAAC,OAAO,CAAC;QACV,sIAAA,CAAA,IAAC,CAAC,OAAO,CAAC;QACV,sIAAA,CAAA,IAAC,CAAC,OAAO,CAAC;QACV,sIAAA,CAAA,IAAC,CAAC,OAAO,CAAC;QACV,sIAAA,CAAA,IAAC,CAAC,OAAO,CAAC;KACX;IACD,OAAO,sIAAA,CAAA,IAAC,CAAC,MAAM;IACf,QAAQ,sIAAA,CAAA,IAAC,CAAC,MAAM;IAChB,eAAe,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC;IACrC,QAAQ,sIAAA,CAAA,IAAC,CACN,MAAM,CAAC;QACN,aAAa,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;QAChC,WAAW,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;QAC9B,kBAAkB,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;QACrC,gBAAgB,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;IACrC,GACC,QAAQ;IACX,OAAO,sIAAA,CAAA,IAAC,CACL,KAAK,CACJ,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACP,UAAU,sIAAA,CAAA,IAAC,CAAC,MAAM;QAClB,YAAY,sIAAA,CAAA,IAAC,CAAC,MAAM;IACtB,IAED,QAAQ;IACX,SAAS,sIAAA,CAAA,IAAC,CAAC,KAAK,CACd,sIAAA,CAAA,IAAC,CAAC,KAAK,CAAC;QACN,sIAAA,CAAA,IAAC,CAAC,OAAO,CAAC;QACV,sIAAA,CAAA,IAAC,CAAC,OAAO,CAAC;QACV,sIAAA,CAAA,IAAC,CAAC,OAAO,CAAC;QACV,sIAAA,CAAA,IAAC,CAAC,OAAO,CAAC;QACV,sIAAA,CAAA,IAAC,CAAC,OAAO,CAAC;QACV,sIAAA,CAAA,IAAC,CAAC,OAAO,CAAC;QACV,sIAAA,CAAA,IAAC,CAAC,OAAO,CAAC;KACX;IAEH,UAAU,sIAAA,CAAA,IAAC,CACR,KAAK,CAAC;QACL,sIAAA,CAAA,IAAC,CAAC,OAAO,CAAC;QACV,sIAAA,CAAA,IAAC,CAAC,OAAO,CAAC;QACV,sIAAA,CAAA,IAAC,CAAC,OAAO,CAAC;QACV,sIAAA,CAAA,IAAC,CAAC,OAAO,CAAC;QACV,sIAAA,CAAA,IAAC,CAAC,OAAO,CAAC;KACX,EACA,OAAO,CAAC;AACb;AAIO,MAAM,mBAAmB,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IACvC,UAAU,sIAAA,CAAA,IAAC,CAAC,KAAK,CAAC,sIAAA,CAAA,IAAC,CAAC,MAAM;IAC1B,eAAe,sIAAA,CAAA,IAAC,CAAC,KAAK,CACpB,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACP,YAAY,sIAAA,CAAA,IAAC,CAAC,MAAM;QACpB,IAAI,sIAAA,CAAA,IAAC,CAAC,MAAM;QACZ,QAAQ,sIAAA,CAAA,IAAC,CAAC,IAAI,CAAC;YAAC;YAAU;YAAU;SAAS;QAC7C,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC,sIAAA,CAAA,IAAC,CAAC,GAAG;IACtB;IAEF,aAAa,sIAAA,CAAA,IAAC,CAAC,KAAK,CAClB,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACP,QAAQ,sIAAA,CAAA,IAAC,CAAC,MAAM;QAChB,QAAQ,sIAAA,CAAA,IAAC,CAAC,MAAM;QAChB,QAAQ,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC,sIAAA,CAAA,IAAC,CAAC,GAAG,IAAI,QAAQ;IACpC;IAEF,uBAAuB,sIAAA,CAAA,IAAC,CAAC,KAAK,CAAC,sIAAA,CAAA,IAAC,CAAC,MAAM;IACvC,UAAU,sIAAA,CAAA,IAAC,CACR,MAAM,CAAC;QACN,YAAY,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;QAC/B,WAAW,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;QAC9B,WAAW,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;QAC9B,kBAAkB,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;IACvC,GACC,QAAQ;AACb;AAIO,MAAM,gBAAgB,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IACpC,MAAM,sIAAA,CAAA,IAAC,CAAC,KAAK,CAAC;QACZ,sIAAA,CAAA,IAAC,CAAC,OAAO,CAAC;QACV,sIAAA,CAAA,IAAC,CAAC,OAAO,CAAC;QACV,sIAAA,CAAA,IAAC,CAAC,OAAO,CAAC;QACV,sIAAA,CAAA,IAAC,CAAC,OAAO,CAAC;QACV,sIAAA,CAAA,IAAC,CAAC,OAAO,CAAC;QACV,sIAAA,CAAA,IAAC,CAAC,OAAO,CAAC;QACV,sIAAA,CAAA,IAAC,CAAC,OAAO,CAAC;QACV,sIAAA,CAAA,IAAC,CAAC,OAAO,CAAC;QACV,sIAAA,CAAA,IAAC,CAAC,OAAO,CAAC;KACX;IACD,SAAS,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC,sIAAA,CAAA,IAAC,CAAC,GAAG;IACvB,gBAAgB,sIAAA,CAAA,IAAC,CAAC,MAAM;IACxB,kBAAkB,iBAAiB,QAAQ;AAC7C","debugId":null}},
    {"offset": {"line": 983, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/api/bridge/queue/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\nimport { getQueue } from \"@/lib/core/projections\";\nimport { queueItemSchema } from \"@/lib/graph/types\";\n\nexport async function GET(request: NextRequest) {\n  const filter = request.nextUrl.searchParams.get(\"filter\") ?? undefined;\n  const queue = getQueue(filter);\n  const items = queue.map(item => queueItemSchema.parse(item));\n  return NextResponse.json({ items });\n}\n\n"],"names":[],"mappings":";;;AAAA;AACA;AACA;;;;AAEO,eAAe,IAAI,OAAoB;IAC5C,MAAM,SAAS,QAAQ,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,aAAa;IAC7D,MAAM,QAAQ,CAAA,GAAA,mIAAA,CAAA,WAAQ,AAAD,EAAE;IACvB,MAAM,QAAQ,MAAM,GAAG,CAAC,CAAA,OAAQ,8HAAA,CAAA,kBAAe,CAAC,KAAK,CAAC;IACtD,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;QAAE;IAAM;AACnC","debugId":null}}]
}