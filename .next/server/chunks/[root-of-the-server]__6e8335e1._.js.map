{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/core/sse.ts"],"sourcesContent":["import { randomUUID } from \"crypto\";\n\ntype Client = {\n  id: string;\n  send: (data: string) => void;\n};\n\nconst clients = new Map<string, Client>();\n\nexport function registerClient(send: Client[\"send\"]) {\n  const id = randomUUID();\n  const client: Client = { id, send };\n  clients.set(id, client);\n  return () => {\n    clients.delete(id);\n  };\n}\n\nexport function broadcastProjectionUpdate(keys: string[]) {\n  const payload = JSON.stringify({ keys });\n  for (const client of clients.values()) {\n    client.send(`data: ${payload}\\n\\n`);\n  }\n}\n\n"],"names":[],"mappings":";;;;AAAA;;AAOA,MAAM,UAAU,IAAI;AAEb,SAAS,eAAe,IAAoB;IACjD,MAAM,KAAK,CAAA,GAAA,qGAAA,CAAA,aAAU,AAAD;IACpB,MAAM,SAAiB;QAAE;QAAI;IAAK;IAClC,QAAQ,GAAG,CAAC,IAAI;IAChB,OAAO;QACL,QAAQ,MAAM,CAAC;IACjB;AACF;AAEO,SAAS,0BAA0B,IAAc;IACtD,MAAM,UAAU,KAAK,SAAS,CAAC;QAAE;IAAK;IACtC,KAAK,MAAM,UAAU,QAAQ,MAAM,GAAI;QACrC,OAAO,IAAI,CAAC,CAAC,MAAM,EAAE,QAAQ,IAAI,CAAC;IACpC;AACF","debugId":null}},
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/core/projections.ts"],"sourcesContent":["import { addMinutes, formatISO, subMinutes } from \"date-fns\";\nimport {\n  CanvasContext,\n  ImpactPlan,\n  Overview,\n  QueueItem,\n  ScenarioPreview,\n  TimelineEntry,\n} from \"../graph/types\";\nimport { EventRecord } from \"./eventLog\";\nimport { broadcastProjectionUpdate } from \"./sse\";\n\nconst overviewState: Overview = {\n  netWorth: 185000,\n  cashOnHand: { amount: 42000, runwayDays: 128 },\n  nextBills: { count: 5, total: 3200, soonest: new Date().toISOString() },\n  monthlyBurn: { actual: 6400, target: 6000 },\n  savingsProgress: { percent: 58, delta: 3 },\n  adherence: { percent30d: 92, onHandDays: 16 },\n  goals: {\n    top: [\n      { id: \"goal-emergency\", name: \"Emergency fund\", percent: 72, eta: \"2025-04-30\" },\n      { id: \"goal-rental\", name: \"Rental upgrade\", percent: 34, eta: \"2025-12-01\" },\n      { id: \"goal-pulse\", name: \"Pulse bankroll\", percent: 55 },\n    ],\n  },\n  pulse: { games: 3, bestValueScore: 7.6 },\n};\n\nlet queueState: QueueItem[] = [\n  {\n    id: \"bill-electric\",\n    kind: \"bill\",\n    category: \"finance\",\n    title: \"Electric Co. payment due\",\n    detail: \"Due in 2 days · autopay off\",\n    priorityScore: 86,\n    impact: { runwayDelta: -3 },\n    actions: [\"Accept\", \"Schedule\", \"Nudge\", \"Explain\", \"Open\"],\n    links: [\n      { entityId: \"bill-electric\", entityType: \"bill\" },\n      { entityId: \"doc-electric-statement\", entityType: \"document\" },\n    ],\n  },\n  {\n    id: \"goal-emergency\",\n    kind: \"goalUnderfunded\",\n    category: \"goals\",\n    title: \"Emergency fund behind pace\",\n    detail: \"Allocate $300 to recover 2 weeks\",\n    priorityScore: 74,\n    impact: { goalEtaDeltaDays: -14 },\n    actions: [\"Accept\", \"Simulate\", \"Explain\"],\n    links: [{ entityId: \"goal-emergency\", entityType: \"goal\" }],\n  },\n  {\n    id: \"dose-levothyroxine\",\n    kind: \"doseOverdue\",\n    category: \"care\",\n    title: \"Levothyroxine dose overdue\",\n    detail: \"Missed 30m · safety bypass active\",\n    priorityScore: 92,\n    impact: { adherenceDelta: 2 },\n    actions: [\"Accept\", \"Nudge\", \"Explain\"],\n    links: [\n      { entityId: \"med-levothyroxine\", entityType: \"medication\" },\n      { entityId: \"dose-levothyroxine\", entityType: \"dose\" },\n    ],\n  },\n  {\n    id: \"weather-storm\",\n    kind: \"weatherAlert\",\n    category: \"home\",\n    title: \"Severe weather incoming\",\n    detail: \"Wind advisory overlaps soccer practice\",\n    priorityScore: 65,\n    actions: [\"Schedule\", \"Explain\", \"Open\"],\n    links: [{ entityId: \"event-soccer\", entityType: \"event\" }],\n  },\n  {\n    id: \"pulse-value\",\n    kind: \"valuePlay\",\n    category: \"pulse\",\n    title: \"Lakers -3.5 model edge\",\n    detail: \"Edge +6.2% after injury update\",\n    priorityScore: 61,\n    impact: { runwayDelta: 1 },\n    actions: [\"Simulate\", \"Explain\", \"Open\"],\n    links: [{ entityId: \"play-lakers\", entityType: \"play\" }],\n  },\n];\n\nconst contextById = new Map<string, CanvasContext>();\n\nfunction buildTimeline(baseId: string, label: string): TimelineEntry[] {\n  const now = new Date();\n  return [\n    {\n      id: `${baseId}-timeline-1`,\n      date: subMinutes(now, 120).toISOString(),\n      label: `${label} flagged`,\n      detail: \"System raised attention item\",\n      status: \"completed\",\n    },\n    {\n      id: `${baseId}-timeline-2`,\n      date: now.toISOString(),\n      label: \"Review in Command Bridge\",\n      detail: \"Awaiting decision\",\n      status: \"scheduled\",\n    },\n    {\n      id: `${baseId}-timeline-3`,\n      date: addMinutes(now, 45).toISOString(),\n      label: \"Auto follow-up\",\n      detail: \"Nudge planned if no action\",\n      status: \"atRisk\",\n    },\n  ];\n}\n\nfunction seedContexts() {\n  contextById.set(\n    \"Electric Co. payment due\",\n    {\n      summary: {\n        title: \"Electric Co. payment due\",\n        subtitle: \"$182 · due in 2 days · autopay disabled\",\n        impact: { runwayDays: -3 },\n      },\n      timeline: buildTimeline(\"bill-electric\", \"Bill\"),\n      cashflow: {\n        variance: 4,\n        burnRate: 6200,\n        transactions: [\n          {\n            id: \"txn-electric-last\",\n            postedAt: subMinutes(new Date(), 1440).toISOString(),\n            amount: 182,\n            category: \"Utilities\",\n            status: \"cleared\",\n            memo: \"Last month paid\",\n          },\n          {\n            id: \"txn-electric-forecast\",\n            postedAt: addMinutes(new Date(), 2880).toISOString(),\n            amount: 186,\n            category: \"Utilities\",\n            status: \"forecast\",\n            memo: \"Forecast next\",\n          },\n        ],\n      },\n      docs: [\n        {\n          id: \"doc-electric-statement\",\n          name: \"Statement Mar\",\n          kind: \"invoice\",\n          uploadedAt: formatISO(subMinutes(new Date(), 60)),\n          link: \"#\",\n        },\n      ],\n      people: [\n        {\n          id: \"contact-utility\",\n          name: \"Utility support\",\n          role: \"Vendor\",\n          reachableVia: [\"phone\", \"email\"],\n          preferredChannel: \"email\",\n        },\n      ],\n      rules: [\n        {\n          id: \"rule-bill-notify\",\n          name: \"Alert if utilities unpaid 3d\",\n          status: \"enabled\",\n          description: \"Sends nudge and raises queue item\",\n          lastRunAt: subMinutes(new Date(), 5).toISOString(),\n          hitCount: 12,\n        },\n      ],\n      scenarios: [\n        {\n          id: \"scenario-pay-now\",\n          title: \"Pay now\",\n          description: \"Reduces runway by 3 days but clears queue\",\n          runwayDelta: -3,\n        },\n        {\n          id: \"scenario-schedule\",\n          title: \"Schedule Friday\",\n          description: \"Keeps runway neutral; increases burn variance\",\n          burnDelta: 1.5,\n        },\n      ],\n      explain: [\n        \"Bill flagged due to autopay disabled\",\n        \"Runway impact computed from cash forecast\",\n      ],\n    }\n  );\n\n  contextById.set(\n    \"Emergency fund behind pace\",\n    {\n      summary: {\n        title: \"Emergency fund behind pace\",\n        subtitle: \"Target $25k · currently $18k\",\n        impact: { goalEtaDeltaDays: -14 },\n      },\n      timeline: buildTimeline(\"goal-emergency\", \"Goal\"),\n      cashflow: {\n        variance: 3,\n        burnRate: 5800,\n        transactions: [\n          {\n            id: \"txn-savings-boost\",\n            postedAt: subMinutes(new Date(), 720).toISOString(),\n            amount: 500,\n            category: \"Transfer\",\n            status: \"cleared\",\n            memo: \"Transfer to savings\",\n          },\n        ],\n      },\n      docs: [\n        {\n          id: \"doc-goal-plan\",\n          name: \"Goal planning worksheet\",\n          kind: \"other\",\n          uploadedAt: subMinutes(new Date(), 7200).toISOString(),\n        },\n      ],\n      people: [\n        {\n          id: \"contact-beno\",\n          name: \"Beno\",\n          role: \"Owner\",\n          reachableVia: [\"sms\", \"email\"],\n        },\n        {\n          id: \"contact-leo\",\n          name: \"Leo\",\n          role: \"Household\",\n          reachableVia: [\"sms\"],\n        },\n      ],\n      rules: [\n        {\n          id: \"rule-goal-variance\",\n          name: \"Alert if goal trending behind\",\n          status: \"enabled\",\n          description: \"Triggers when ETA slips\",\n          lastRunAt: subMinutes(new Date(), 20).toISOString(),\n          hitCount: 4,\n        },\n      ],\n      scenarios: [\n        {\n          id: \"scenario-allocate-300\",\n          title: \"Allocate $300\",\n          description: \"ETA moves forward 2 weeks\",\n          goalEtaDeltaDays: -14,\n        },\n        {\n          id: \"scenario-sweep-bonus\",\n          title: \"Sweep bonus\",\n          description: \"Runway -1 day; goal complete\",\n          runwayDelta: -1,\n        },\n      ],\n      explain: [\n        \"Goal slip detected from last month trend\",\n        \"Personal weight high because tagged 'safety'\",\n      ],\n    }\n  );\n\n  contextById.set(\n    \"Levothyroxine dose overdue\",\n    {\n      summary: {\n        title: \"Levothyroxine dose overdue\",\n        subtitle: \"Missed 30 minutes\",\n        impact: { adherence: 2 },\n      },\n      timeline: buildTimeline(\"dose-levothyroxine\", \"Care\"),\n      cashflow: {\n        variance: 0,\n        burnRate: 0,\n        transactions: [],\n      },\n      docs: [\n        {\n          id: \"doc-medication-plan\",\n          name: \"Medication schedule\",\n          kind: \"medical\",\n          uploadedAt: subMinutes(new Date(), 1440).toISOString(),\n        },\n      ],\n      people: [\n        {\n          id: \"contact-dr-carter\",\n          name: \"Dr. Carter\",\n          role: \"Endocrinologist\",\n          reachableVia: [\"portal\", \"phone\"],\n        },\n      ],\n      rules: [\n        {\n          id: \"rule-dose-quiet\",\n          name: \"Bypass quiet hours if >20m overdue\",\n          status: \"enabled\",\n          description: \"Ensures adherence\",\n          lastRunAt: subMinutes(new Date(), 10).toISOString(),\n          hitCount: 18,\n        },\n      ],\n      scenarios: [\n        {\n          id: \"scenario-mark-taken\",\n          title: \"Mark as taken\",\n          description: \"Restores adherence\",\n          adherenceDelta: 2,\n        },\n        {\n          id: \"scenario-snooze\",\n          title: \"Snooze 15m\",\n          description: \"Keeps quiet hours respected\",\n        },\n      ],\n      explain: [\"Dose overdue threshold reached\"],\n    }\n  );\n}\n\nseedContexts();\n\nexport type ContextResponse = {\n  context: CanvasContext;\n};\n\nfunction removeQueueItem(id: string) {\n  queueState = queueState.filter(item => item.id !== id);\n}\n\nfunction pushQueueItem(item: QueueItem) {\n  const existing = queueState.find(q => q.id === item.id);\n  if (!existing) {\n    queueState = [...queueState, item];\n  } else {\n    queueState = queueState.map(q => (q.id === item.id ? item : q));\n  }\n  queueState.sort((a, b) => b.priorityScore - a.priorityScore);\n}\n\nexport function getOverview(): Overview {\n  return overviewState;\n}\n\nexport function getQueue(filter?: string): QueueItem[] {\n  const normalized = filter?.toLowerCase();\n  const filtered = normalized && normalized !== \"all\"\n    ? queueState.filter(item => item.category === normalized)\n    : queueState;\n  return filtered.sort((a, b) => b.priorityScore - a.priorityScore);\n}\n\nexport function getContextByQueueItemId(id: string) {\n  const item = queueState.find(q => q.id === id);\n  if (!item) return null;\n  return contextById.get(item.title) ?? null;\n}\n\nexport function recordContextUpdate(id: string, context: CanvasContext) {\n  contextById.set(id, context);\n}\n\nexport function applyEvents(events: EventRecord[]) {\n  const dirty = new Set<string>();\n\n  events.forEach(event => {\n    switch (event.type) {\n      case \"bill.paid\": {\n        removeQueueItem(\"bill-electric\");\n        overviewState.cashOnHand.amount -= Number(event.payload.amount ?? 0);\n        overviewState.monthlyBurn.actual += Number(event.payload.amount ?? 0);\n        overviewState.nextBills.count = Math.max(0, overviewState.nextBills.count - 1);\n        dirty.add(\"bridge:queue\");\n        dirty.add(\"bridge:overview\");\n        break;\n      }\n      case \"goal.allocated\": {\n        const allocation = Number(event.payload.amount ?? 0);\n        const goal = overviewState.goals.top.find(g => g.id === event.payload.goalId);\n        if (goal) {\n          goal.percent = Math.min(100, goal.percent + allocation / 300);\n        }\n        overviewState.savingsProgress.percent = Math.min(100, overviewState.savingsProgress.percent + allocation / 500);\n        dirty.add(\"bridge:overview\");\n        break;\n      }\n      case \"dose.taken\": {\n        overviewState.adherence.percent30d = Math.min(100, overviewState.adherence.percent30d + 1);\n        removeQueueItem(\"dose-levothyroxine\");\n        dirty.add(\"bridge:overview\");\n        dirty.add(\"bridge:queue\");\n        break;\n      }\n      case \"refill.requested\": {\n        pushQueueItem({\n          id: `refill-${event.payload.medicationId}`,\n          kind: \"refill\",\n          category: \"care\",\n          title: \"Refill requested\",\n          detail: \"Pharmacy notified\",\n          priorityScore: 48,\n          actions: [\"Explain\", \"Open\"],\n        });\n        dirty.add(\"bridge:queue\");\n        break;\n      }\n      case \"doc.linked\": {\n        dirty.add(\"bridge:context\");\n        break;\n      }\n      case \"event.created\": {\n        dirty.add(\"bridge:context\");\n        break;\n      }\n      case \"play.tracked\": {\n        overviewState.pulse.games += 1;\n        dirty.add(\"bridge:overview\");\n        break;\n      }\n      default:\n        break;\n    }\n  });\n\n  if (dirty.size > 0) {\n    broadcastProjectionUpdate([...dirty]);\n  }\n}\n\nexport function buildScenarioFromImpact(impact: ImpactPlan[\"kpiDelta\"] | undefined): ScenarioPreview | null {\n  if (!impact) return null;\n  return {\n    id: `scenario-${Math.random().toString(36).slice(2)}`,\n    title: \"Proposed plan\",\n    description: \"Preview of projected metrics\",\n    runwayDelta: impact.runwayDays,\n    burnDelta: impact.burnDelta,\n    goalEtaDeltaDays: impact.goalEtaDeltaDays,\n  };\n}\n\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 656, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/api/bridge/context/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\nimport { getContextByQueueItemId } from \"@/lib/core/projections\";\n\nexport async function GET(request: NextRequest) {\n  const id = request.nextUrl.searchParams.get(\"id\");\n  if (!id) {\n    return NextResponse.json({ error: \"Missing id\" }, { status: 400 });\n  }\n  const context = getContextByQueueItemId(id);\n  if (!context) {\n    return NextResponse.json({ error: \"Not found\" }, { status: 404 });\n  }\n  return NextResponse.json({ context });\n}\n\n"],"names":[],"mappings":";;;AAAA;AACA;;;AAEO,eAAe,IAAI,OAAoB;IAC5C,MAAM,KAAK,QAAQ,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC;IAC5C,IAAI,CAAC,IAAI;QACP,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAa,GAAG;YAAE,QAAQ;QAAI;IAClE;IACA,MAAM,UAAU,CAAA,GAAA,mIAAA,CAAA,0BAAuB,AAAD,EAAE;IACxC,IAAI,CAAC,SAAS;QACZ,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAY,GAAG;YAAE,QAAQ;QAAI;IACjE;IACA,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;QAAE;IAAQ;AACrC","debugId":null}}]
}