{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/api/household/store.ts"],"sourcesContent":["import {\n  Appointment,\n  Asset,\n  CareProfile,\n  Dose,\n  LedgerEntry,\n  Member,\n  MeterReading,\n  Medication,\n  ShoppingList,\n  Settlement,\n  Ticket,\n} from \"@/lib/household/types\";\n\ninterface HouseholdStore {\n  members: Member[];\n  careProfiles: CareProfile[];\n  medications: Medication[];\n  doses: Dose[];\n  appointments: Appointment[];\n  assets: Asset[];\n  meterReadings: MeterReading[];\n  tickets: Ticket[];\n  shoppingLists: ShoppingList[];\n  ledger: LedgerEntry[];\n  settlements: Settlement[];\n}\n\ndeclare global {\n  // eslint-disable-next-line no-var\n  var __householdStore: HouseholdStore | undefined;\n}\n\nconst defaultMembers: Member[] = [\n  { id: \"m-1\", name: \"Beno\", relation: \"brother\", phone: \"+15550001111\", roleLabel: \"Admin\" },\n  { id: \"m-2\", name: \"Marcus\", relation: \"parent\", phone: \"+15550002222\", roleLabel: \"Family\" },\n  { id: \"m-3\", name: \"Luis\", relation: \"guest\", phone: \"+15550003333\", roleLabel: \"Guest\" },\n];\n\nconst defaultProfiles: CareProfile[] = [\n  { id: \"cp-1\", memberId: \"m-1\", name: \"Beno\", phone: \"+15550001111\" },\n  { id: \"cp-2\", memberId: \"m-2\", name: \"Marcus\", phone: \"+15550002222\" },\n];\n\nconst now = new Date();\n\nconst defaultMedications: Medication[] = [\n  {\n    id: \"med-1\",\n    careProfileId: \"cp-1\",\n    name: \"Hydroxyurea\",\n    strengthMg: 500,\n    form: \"cap\",\n    dosage: { unitsPerDose: 1 },\n    schedule: { type: \"fixed\", times: [\"08:00\", \"20:00\"], daysOfWeek: [1, 2, 3, 4, 5, 6, 0] },\n    pillsOnHand: 22,\n    refillPackSize: 30,\n    lowStockThreshold: 10,\n    refillsRemaining: 2,\n  },\n  {\n    id: \"med-2\",\n    careProfileId: \"cp-2\",\n    name: \"Vitamin D\",\n    strengthMg: 1000,\n    form: \"tab\",\n    dosage: { unitsPerDose: 1 },\n    schedule: { type: \"fixed\", times: [\"09:00\"], daysOfWeek: [1, 3, 5] },\n    pillsOnHand: 15,\n    refillPackSize: 60,\n    lowStockThreshold: 6,\n    refillsRemaining: 4,\n  },\n];\n\nconst defaultDoses: Dose[] = defaultMedications.flatMap((med) =>\n  (med.schedule.times || []).map((time, index) => {\n    const today = new Date();\n    const [hour, minute] = time.split(\":\").map(Number);\n    today.setHours(hour ?? 8, minute ?? 0, 0, 0);\n    return {\n      id: `${med.id}-dose-${index}`,\n      medId: med.id,\n      scheduledAt: today.toISOString(),\n      status: index % 2 === 0 ? \"taken\" : \"due\",\n    } as Dose;\n  }),\n);\n\nconst defaultAppointments: Appointment[] = [\n  {\n    id: \"appt-1\",\n    careProfileId: \"cp-1\",\n    title: \"Hematology follow-up\",\n    type: \"specialist\",\n    start: new Date(now.getTime() + 3 * 24 * 60 * 60 * 1000).toISOString(),\n    end: new Date(now.getTime() + 3 * 24 * 60 * 60 * 1000 + 60 * 60 * 1000).toISOString(),\n    location: \"City Hospital\",\n    provider: \"Dr. Singh\",\n  },\n];\n\nconst defaultAssets: Asset[] = [\n  {\n    id: \"asset-1\",\n    name: \"Dyson V12\",\n    category: \"appliance\",\n    condition: \"good\",\n    purchaseDate: new Date(now.getTime() - 200 * 24 * 60 * 60 * 1000).toISOString(),\n    warrantyEnd: new Date(now.getTime() + 165 * 24 * 60 * 60 * 1000).toISOString(),\n    maintenance: { next: new Date(now.getTime() + 20 * 24 * 60 * 60 * 1000).toISOString(), cadenceDays: 90, history: [] },\n  },\n];\n\nconst defaultShopping: ShoppingList[] = [\n  {\n    id: \"list-1\",\n    name: \"Shared essentials\",\n    items: [\n      { id: \"item-1\", label: \"Paper towels\", priority: \"med\", recurring: true, isChecked: false },\n      { id: \"item-2\", label: \"Laundry detergent\", priority: \"high\", recurring: true, priceTarget: 12, isChecked: false },\n    ],\n  },\n];\n\nconst defaultLedger: LedgerEntry[] = [\n  {\n    id: \"ledger-1\",\n    label: \"Groceries\",\n    amount: 120,\n    currency: \"USD\",\n    date: new Date(now.getTime() - 4 * 24 * 60 * 60 * 1000).toISOString(),\n    payer: \"Marcus\",\n  },\n  {\n    id: \"ledger-2\",\n    label: \"Internet bill\",\n    amount: 80,\n    currency: \"USD\",\n    date: new Date(now.getTime() - 2 * 24 * 60 * 60 * 1000).toISOString(),\n    payer: \"Beno\",\n  },\n];\n\nconst defaultTickets: Ticket[] = [\n  {\n    id: \"ticket-1\",\n    apartmentId: \"apt-1\",\n    title: \"Fix shower handle\",\n    type: \"repair\",\n    severity: \"med\",\n    status: \"open\",\n  },\n];\n\nconst defaultMeters: MeterReading[] = [\n  {\n    id: \"meter-1\",\n    apartmentId: \"apt-1\",\n    type: \"power\",\n    reading: 2334,\n    unit: \"kWh\",\n    takenAt: new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000).toISOString(),\n  },\n  {\n    id: \"meter-2\",\n    apartmentId: \"apt-1\",\n    type: \"power\",\n    reading: 2404,\n    unit: \"kWh\",\n    takenAt: now.toISOString(),\n  },\n];\n\nconst defaultSettlements: Settlement[] = [\n  {\n    id: \"set-1\",\n    payer: \"Beno\",\n    amount: 200,\n    method: \"etransfer\",\n    date: new Date(now.getTime() - 20 * 24 * 60 * 60 * 1000).toISOString(),\n  },\n];\n\nexport function getHouseholdStore(): HouseholdStore {\n  if (!globalThis.__householdStore) {\n    globalThis.__householdStore = {\n      members: defaultMembers,\n      careProfiles: defaultProfiles,\n      medications: defaultMedications,\n      doses: defaultDoses,\n      appointments: defaultAppointments,\n      assets: defaultAssets,\n      meterReadings: defaultMeters,\n      tickets: defaultTickets,\n      shoppingLists: defaultShopping,\n      ledger: defaultLedger,\n      settlements: defaultSettlements,\n    };\n  }\n  return globalThis.__householdStore;\n}\n\nexport function setHouseholdStore(store: HouseholdStore) {\n  globalThis.__householdStore = store;\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 310, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/api/household/shopping/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport { randomUUID } from \"crypto\";\nimport { getHouseholdStore, setHouseholdStore } from \"../store\";\nimport type { ShoppingItem, ShoppingList } from \"@/lib/household/types\";\n\nexport async function GET() {\n  return NextResponse.json(getHouseholdStore().shoppingLists);\n}\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const store = getHouseholdStore();\n  const { action } = body as { action?: string };\n\n  if (action === \"addItem\") {\n    const payload = body.payload as {\n      listId: string;\n      label: string;\n      qty?: string;\n      priority: ShoppingItem[\"priority\"];\n      recurring?: boolean;\n      priceTarget?: number;\n    };\n    const list = store.shoppingLists.find((item) => item.id === payload.listId);\n    if (!list) {\n      return NextResponse.json({ error: \"Shopping list not found\" }, { status: 404 });\n    }\n    const item: ShoppingItem = {\n      id: randomUUID(),\n      label: payload.label,\n      qty: payload.qty,\n      priority: payload.priority,\n      recurring: payload.recurring,\n      priceTarget: payload.priceTarget,\n      isChecked: false,\n    };\n    list.items.push(item);\n    setHouseholdStore(store);\n    return NextResponse.json(list, { status: 201 });\n  }\n\n  if (action === \"toggle\") {\n    const { listId, itemId, payload: togglePayload } = body as {\n      listId: string;\n      itemId: string;\n      payload: { listId: string; itemId: string; checked: boolean };\n    };\n    const list = store.shoppingLists.find((item) => item.id === listId || item.id === togglePayload?.listId);\n    const item = list?.items.find((entry) => entry.id === itemId || entry.id === togglePayload?.itemId);\n    if (list && item) {\n      item.isChecked = togglePayload?.checked ?? body.payload?.checked ?? false;\n      setHouseholdStore(store);\n      return NextResponse.json(list);\n    }\n    return NextResponse.json({ error: \"Item not found\" }, { status: 404 });\n  }\n\n  if (action === \"priceTarget\") {\n    const payload = body.payload as { listId: string; itemId: string; priceTarget?: number };\n    const list = store.shoppingLists.find((item) => item.id === payload.listId);\n    const item = list?.items.find((entry) => entry.id === payload.itemId);\n    if (item) {\n      item.priceTarget = payload.priceTarget;\n      setHouseholdStore(store);\n      return NextResponse.json(list);\n    }\n    return NextResponse.json({ error: \"Item not found\" }, { status: 404 });\n  }\n\n  if (action === \"createList\") {\n    const payload = body.payload as { name: string };\n    const list: ShoppingList = { id: randomUUID(), name: payload.name, items: [] };\n    store.shoppingLists.push(list);\n    setHouseholdStore(store);\n    return NextResponse.json(list, { status: 201 });\n  }\n\n  return NextResponse.json({ error: \"Unsupported action\" }, { status: 400 });\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}