{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/progress.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,yBAAW,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAG9B,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,OAAO,EAAE,oBACjC,6LAAC,uKAAA,CAAA,OAAsB;QACrB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,iEACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,uKAAA,CAAA,YAA2B;YAC1B,WAAU;YACV,OAAO;gBAAE,WAAW,CAAC,YAAY,EAAE,MAAM,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC;YAAC;;;;;;;;;;;;AAIhE,SAAS,WAAW,GAAG,uKAAA,CAAA,OAAsB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 53, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/onboarding/types.ts"],"sourcesContent":["import { Setup, StepKey, PreviewResponse } from \"./validators\";\n\nexport type StepDefinition = {\n  key: StepKey;\n  title: string;\n  description: string;\n  metricsLabel: string;\n};\n\nexport type DetectResponse = {\n  missing: StepKey[];\n  progressByStep: Record<StepKey, number>;\n  setup: Setup;\n};\n\nexport type PreviewData = PreviewResponse;\n\nexport type SaveRequest = {\n  setup: Setup;\n  finalize?: boolean;\n  enableAutomations?: boolean;\n};\n\nexport type SaveResponse = {\n  ok: boolean;\n  setup: Setup;\n  created?: Record<string, number>;\n  warnings?: string[];\n};\n\nexport const StepDefinitions: StepDefinition[] = [\n  {\n    key: \"accounts\",\n    title: \"Link accounts\",\n    description: \"Connect Plaid, calendars, drive and email ingest.\",\n    metricsLabel: \"Integrations\",\n  },\n  {\n    key: \"people\",\n    title: \"Add household contacts\",\n    description: \"Share brothers and vendors for nudges.\",\n    metricsLabel: \"Contacts\",\n  },\n  {\n    key: \"documents\",\n    title: \"Upload first docs\",\n    description: \"Drop receipts or IDs to test OCR.\",\n    metricsLabel: \"Documents\",\n  },\n  {\n    key: \"household\",\n    title: \"Describe your household\",\n    description: \"Address, utilities and tracked assets.\",\n    metricsLabel: \"Assets\",\n  },\n  {\n    key: \"finance\",\n    title: \"Set up finances\",\n    description: \"Income, bills and budgets for automation.\",\n    metricsLabel: \"Items\",\n  },\n  {\n    key: \"health\",\n    title: \"Care & meds\",\n    description: \"Capture meds to track refills and reminders.\",\n    metricsLabel: \"Profiles\",\n  },\n  {\n    key: \"automations\",\n    title: \"Automation rules\",\n    description: \"Pre-build nudges and automations.\",\n    metricsLabel: \"Rules\",\n  },\n  {\n    key: \"goals\",\n    title: \"Household goals\",\n    description: \"Create goals and funding plans.\",\n    metricsLabel: \"Goals\",\n  },\n];\n"],"names":[],"mappings":";;;AA8BO,MAAM,kBAAoC;IAC/C;QACE,KAAK;QACL,OAAO;QACP,aAAa;QACb,cAAc;IAChB;IACA;QACE,KAAK;QACL,OAAO;QACP,aAAa;QACb,cAAc;IAChB;IACA;QACE,KAAK;QACL,OAAO;QACP,aAAa;QACb,cAAc;IAChB;IACA;QACE,KAAK;QACL,OAAO;QACP,aAAa;QACb,cAAc;IAChB;IACA;QACE,KAAK;QACL,OAAO;QACP,aAAa;QACb,cAAc;IAChB;IACA;QACE,KAAK;QACL,OAAO;QACP,aAAa;QACb,cAAc;IAChB;IACA;QACE,KAAK;QACL,OAAO;QACP,aAAa;QACb,cAAc;IAChB;IACA;QACE,KAAK;QACL,OAAO;QACP,aAAa;QACb,cAAc;IAChB;CACD","debugId":null}},
    {"offset": {"line": 115, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/onboarding/validators.ts"],"sourcesContent":["import { z } from \"zod\";\n\nexport const IntegrationProviderSchema = z.object({\n  provider: z.enum([\"google\", \"outlook\"]),\n  id: z.string(),\n  name: z.string(),\n});\n\nexport const ScheduleSchema = z.union([\n  z.object({\n    type: z.literal(\"fixed\"),\n    times: z.array(z.string()),\n  }),\n  z.object({\n    type: z.literal(\"interval\"),\n    hours: z.number(),\n  }),\n]);\n\nexport const SetupSchema = z.object({\n  version: z.literal(1),\n  progress: z.number().min(0).max(100),\n  steps: z.object({\n    accounts: z.boolean(),\n    people: z.boolean(),\n    documents: z.boolean(),\n    household: z.boolean(),\n    finance: z.boolean(),\n    health: z.boolean(),\n    automations: z.boolean(),\n    goals: z.boolean(),\n  }),\n  data: z.object({\n    integrations: z.object({\n      plaid: z.boolean().optional(),\n      calendars: z.array(IntegrationProviderSchema).optional(),\n      emailIngest: z.boolean().optional(),\n      drive: z.boolean().optional(),\n      health: z.array(z.enum([\"apple\", \"google\", \"fitbit\"])).optional(),\n    }),\n    contacts: z\n      .array(\n        z.object({\n          id: z.string(),\n          name: z.string(),\n          relation: z.enum([\"head\", \"family\", \"guest\", \"vendor\"]).default(\"family\"),\n          phone: z.string().optional(),\n          defaultChannel: z.enum([\"whatsapp\", \"sms\", \"none\"]).default(\"whatsapp\"),\n          notes: z.string().optional(),\n        })\n      )\n      .optional(),\n    docs: z\n      .array(\n        z.object({\n          id: z.string(),\n          filename: z.string(),\n          type: z.enum([\"id\", \"policy\", \"contract\", \"receipt\", \"medical\", \"other\"]),\n          expiresAt: z.string().nullable(),\n          tags: z.array(z.string()).optional(),\n        })\n      )\n      .optional(),\n    household: z\n      .object({\n        name: z.string(),\n        address: z.string().optional(),\n        utilities: z.array(z.enum([\"internet\", \"electricity\", \"water\", \"gas\"])).optional(),\n        assets: z\n          .array(\n            z.object({\n              id: z.string(),\n              label: z.string(),\n              category: z.enum([\"appliance\", \"electronics\", \"vehicle\", \"furniture\", \"other\"]),\n              serial: z.string().optional(),\n              warrantyEnd: z.string().nullable(),\n            })\n          )\n          .optional(),\n      })\n      .optional(),\n    finance: z\n      .object({\n        currency: z.string().default(\"CAD\"),\n        income: z.array(\n          z.object({\n            name: z.string(),\n            amount: z.number(),\n            frequency: z.enum([\"weekly\", \"biweekly\", \"monthly\"]),\n            nextDate: z.string(),\n          })\n        ),\n        bills: z.array(\n          z.object({\n            name: z.string(),\n            amount: z.number(),\n            dueDay: z.number(),\n            autopay: z.boolean().default(false),\n            tag: z.string().optional(),\n          })\n        ),\n        budgetTemplate: z\n          .array(\n            z.object({\n              category: z.string(),\n              percent: z.number(),\n            })\n          )\n          .optional(),\n      })\n      .optional(),\n    care: z\n      .array(\n        z.object({\n          name: z.string(),\n          relation: z.string(),\n          meds: z.array(\n            z.object({\n              name: z.string(),\n              strengthMg: z.number().optional(),\n              schedule: ScheduleSchema,\n              unitsPerDose: z.number(),\n              pillsOnHand: z.number().optional(),\n              lowStockDays: z.number().default(7),\n            })\n          ),\n        })\n      )\n      .optional(),\n    rules: z\n      .array(\n        z.object({\n          id: z.string(),\n          trigger: z.string(),\n          action: z.string(),\n        })\n      )\n      .optional(),\n    goals: z\n      .array(\n        z.object({\n          name: z.string(),\n          target: z.number(),\n          deadline: z.string().optional(),\n          priority: z.number().min(1).max(5),\n        })\n      )\n      .optional(),\n  }),\n});\n\nexport type Setup = z.infer<typeof SetupSchema>;\nexport type StepKey = keyof Setup[\"steps\"];\nexport type SetupData = Setup[\"data\"];\n\nexport const StepOrder: StepKey[] = [\n  \"accounts\",\n  \"people\",\n  \"documents\",\n  \"household\",\n  \"finance\",\n  \"health\",\n  \"automations\",\n  \"goals\",\n];\n\nexport type PreviewResponse = {\n  finance?: {\n    forecast: number[];\n    bills: Array<{ name: string; due: string; amount: number }>;\n  };\n  care?: Array<{ person: string; nextDose: string }>;\n  rules?: Array<{ id: string; count: number }>;\n  readiness: number;\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 288, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/onboarding/state.ts"],"sourcesContent":["\"use client\";\n\nimport { create } from \"zustand\";\nimport { devtools } from \"zustand/middleware\";\nimport { Setup, SetupData, StepKey, StepOrder } from \"./validators\";\n\nexport type DrawerState = {\n  open: boolean;\n  step?: StepKey;\n};\n\nexport type PreviewState = {\n  readiness: number;\n  financeForecast: number[];\n  upcomingBills: Array<{ name: string; due: string; amount: number }>;\n  care: Array<{ person: string; nextDose: string }>;\n  rules: Array<{ id: string; count: number }>;\n};\n\nconst emptyPreview: PreviewState = {\n  readiness: 0,\n  financeForecast: [],\n  upcomingBills: [],\n  care: [],\n  rules: [],\n};\n\nconst blankSetup: Setup = {\n  version: 1,\n  progress: 0,\n  steps: {\n    accounts: false,\n    people: false,\n    documents: false,\n    household: false,\n    finance: false,\n    health: false,\n    automations: false,\n    goals: false,\n  },\n  data: {\n    integrations: {},\n  },\n};\n\nfunction computeProgress(steps: Setup[\"steps\"]): number {\n  const total = StepOrder.length;\n  const completed = StepOrder.filter((key) => steps[key]).length;\n  return Math.round((completed / total) * 100);\n}\n\nfunction ensureContacts(data?: SetupData[\"contacts\"]): SetupData[\"contacts\"] {\n  return data?.map((contact) => ({\n    defaultChannel: \"whatsapp\",\n    relation: \"family\",\n    ...contact,\n  }));\n}\n\nexport interface OnboardingStore {\n  setup: Setup;\n  drawer: DrawerState;\n  preview: PreviewState;\n  loading: boolean;\n  focusedStepIndex: number;\n  setSetup: (setup: Setup) => void;\n  loadFromServer: (setup: Partial<Setup>) => void;\n  openDrawer: (step: StepKey) => void;\n  closeDrawer: () => void;\n  updateStepCompletion: (step: StepKey, completed: boolean) => void;\n  updateData: (path: StepKey, data: Partial<SetupData>) => void;\n  setPreview: (preview: Partial<PreviewState>) => void;\n  nextStep: () => void;\n  prevStep: () => void;\n}\n\nexport const useOnboardingStore = create<OnboardingStore>()(\n  devtools(\n    (set, get) => ({\n      setup: blankSetup,\n      drawer: { open: false },\n      preview: emptyPreview,\n      loading: false,\n      focusedStepIndex: 0,\n      setSetup: (setup) =>\n        set((state) => ({\n          setup: {\n            ...setup,\n            steps: { ...setup.steps },\n            data: {\n              ...setup.data,\n              contacts: ensureContacts(setup.data.contacts),\n            },\n            progress: computeProgress(setup.steps),\n          },\n        })),\n      loadFromServer: (incoming) =>\n        set((state) => {\n          const next: Setup = {\n            ...state.setup,\n            ...incoming,\n            steps: {\n              ...state.setup.steps,\n              ...incoming.steps,\n            },\n            data: {\n              ...state.setup.data,\n              ...incoming.data,\n            },\n          } as Setup;\n          next.progress = computeProgress(next.steps);\n          next.data.contacts = ensureContacts(next.data.contacts);\n          return { setup: next };\n        }),\n      openDrawer: (step) =>\n        set((state) => ({\n          drawer: { open: true, step },\n          focusedStepIndex: StepOrder.indexOf(step),\n        })),\n      closeDrawer: () =>\n        set(() => ({\n          drawer: { open: false },\n        })),\n      updateStepCompletion: (step, completed) =>\n        set((state) => {\n          const newSteps = { ...state.setup.steps, [step]: completed };\n          return {\n            setup: {\n              ...state.setup,\n              steps: newSteps,\n              progress: computeProgress(newSteps),\n            },\n          };\n        }),\n      updateData: (step, data) =>\n        set((state) => {\n          const newSetup = {\n            ...state.setup,\n            data: { ...state.setup.data, ...data },\n          };\n          newSetup.steps[step] = true;\n          newSetup.progress = computeProgress(newSetup.steps);\n          return { setup: newSetup };\n        }),\n      setPreview: (preview) =>\n        set((state) => ({\n          preview: { ...state.preview, ...preview },\n        })),\n      nextStep: () =>\n        set((state) => ({\n          focusedStepIndex: (state.focusedStepIndex + 1) % StepOrder.length,\n        })),\n      prevStep: () =>\n        set((state) => ({\n          focusedStepIndex:\n            (state.focusedStepIndex - 1 + StepOrder.length) % StepOrder.length,\n        })),\n    })\n  )\n);\n\nexport function getFocusedStep(stepIndex: number): StepKey {\n  return StepOrder[stepIndex] ?? \"accounts\";\n}\n\nexport function createEmptySetup(): Setup {\n  return JSON.parse(JSON.stringify(blankSetup));\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 443, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/onboarding/ProgressMeter.tsx"],"sourcesContent":["\"use client\";\n\nimport { useMemo } from \"react\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { StepDefinitions } from \"@/lib/onboarding/types\";\nimport { useOnboardingStore } from \"@/lib/onboarding/state\";\n\nexport function ProgressMeter() {\n  const progress = useOnboardingStore((state) => state.setup.progress);\n  const steps = useOnboardingStore((state) => state.setup.steps);\n\n  const completed = useMemo(\n    () =>\n      StepDefinitions.map((definition) => ({\n        key: definition.key,\n        done: steps[definition.key],\n      })),\n    [steps]\n  );\n\n  return (\n    <div className=\"space-y-3\">\n      <div className=\"flex items-center justify-between text-sm text-muted-foreground\">\n        <span>Progress</span>\n        <span className=\"font-medium text-foreground\">{progress}%</span>\n      </div>\n      <Progress value={progress} className=\"h-2\" />\n      <div className=\"grid grid-cols-4 gap-2 text-[10px] uppercase tracking-wide text-muted-foreground\">\n        {completed.map((step) => (\n          <div\n            key={step.key}\n            className={`flex items-center gap-2 rounded border px-2 py-1 ${\n              step.done\n                ? \"border-emerald-500/60 bg-emerald-500/10 text-emerald-400\"\n                : \"border-border\"\n            }`}\n          >\n            <span className=\"inline-flex h-2 w-2 rounded-full bg-current\" />\n            {step.key}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAOO,SAAS;;IACd,MAAM,WAAW,CAAA,GAAA,oIAAA,CAAA,qBAAkB,AAAD;sDAAE,CAAC,QAAU,MAAM,KAAK,CAAC,QAAQ;;IACnE,MAAM,QAAQ,CAAA,GAAA,oIAAA,CAAA,qBAAkB,AAAD;mDAAE,CAAC,QAAU,MAAM,KAAK,CAAC,KAAK;;IAE7D,MAAM,YAAY,CAAA,GAAA,6JAAA,CAAA,UAAO,AAAD;4CACtB,IACE,oIAAA,CAAA,kBAAe,CAAC,GAAG;oDAAC,CAAC,aAAe,CAAC;wBACnC,KAAK,WAAW,GAAG;wBACnB,MAAM,KAAK,CAAC,WAAW,GAAG,CAAC;oBAC7B,CAAC;;2CACH;QAAC;KAAM;IAGT,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;kCAAK;;;;;;kCACN,6LAAC;wBAAK,WAAU;;4BAA+B;4BAAS;;;;;;;;;;;;;0BAE1D,6LAAC,uIAAA,CAAA,WAAQ;gBAAC,OAAO;gBAAU,WAAU;;;;;;0BACrC,6LAAC;gBAAI,WAAU;0BACZ,UAAU,GAAG,CAAC,CAAC,qBACd,6LAAC;wBAEC,WAAW,CAAC,iDAAiD,EAC3D,KAAK,IAAI,GACL,6DACA,iBACJ;;0CAEF,6LAAC;gCAAK,WAAU;;;;;;4BACf,KAAK,GAAG;;uBARJ,KAAK,GAAG;;;;;;;;;;;;;;;;AAczB;GArCgB;;QACG,oIAAA,CAAA,qBAAkB;QACrB,oIAAA,CAAA,qBAAkB;;;KAFlB","debugId":null}},
    {"offset": {"line": 563, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/onboarding/LaunchHeader.tsx"],"sourcesContent":["\"use client\";\n\nimport { Button } from \"@/components/ui/button\";\nimport { ProgressMeter } from \"./ProgressMeter\";\nimport { useOnboardingStore } from \"@/lib/onboarding/state\";\nimport { getFocusedStep } from \"@/lib/onboarding/state\";\n\ninterface LaunchHeaderProps {\n  onStart: () => void;\n  onSkip?: () => void;\n}\n\nexport function LaunchHeader({ onStart, onSkip }: LaunchHeaderProps) {\n  const progress = useOnboardingStore((state) => state.setup.progress);\n  const focusedStepIndex = useOnboardingStore((state) => state.focusedStepIndex);\n  const openDrawer = useOnboardingStore((state) => state.openDrawer);\n\n  return (\n    <header className=\"space-y-6 rounded-xl border border-border/60 bg-background/50 p-6 shadow-sm\">\n      <div className=\"flex flex-col justify-between gap-4 md:flex-row md:items-center\">\n        <div>\n          <h1 className=\"text-3xl font-semibold tracking-tight\">Onboarding</h1>\n          <p className=\"mt-2 max-w-xl text-muted-foreground\">\n            Kickstart BENO with a guided checklist.\n          </p>\n        </div>\n        <div className=\"flex flex-wrap items-center gap-2\">\n          <Button variant=\"ghost\" onClick={onSkip}>\n            Skip for now\n          </Button>\n          <Button\n            onClick={() => {\n              const current = getFocusedStep(focusedStepIndex);\n              openDrawer(current);\n              onStart();\n            }}\n          >\n            {progress === 0 ? \"Start guided setup\" : \"Continue guided setup\"}\n          </Button>\n        </div>\n      </div>\n      <ProgressMeter />\n    </header>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;;;AAJA;;;;;AAYO,SAAS,aAAa,EAAE,OAAO,EAAE,MAAM,EAAqB;;IACjE,MAAM,WAAW,CAAA,GAAA,oIAAA,CAAA,qBAAkB,AAAD;qDAAE,CAAC,QAAU,MAAM,KAAK,CAAC,QAAQ;;IACnE,MAAM,mBAAmB,CAAA,GAAA,oIAAA,CAAA,qBAAkB,AAAD;6DAAE,CAAC,QAAU,MAAM,gBAAgB;;IAC7E,MAAM,aAAa,CAAA,GAAA,oIAAA,CAAA,qBAAkB,AAAD;uDAAE,CAAC,QAAU,MAAM,UAAU;;IAEjE,qBACE,6LAAC;QAAO,WAAU;;0BAChB,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;;0CACC,6LAAC;gCAAG,WAAU;0CAAwC;;;;;;0CACtD,6LAAC;gCAAE,WAAU;0CAAsC;;;;;;;;;;;;kCAIrD,6LAAC;wBAAI,WAAU;;0CACb,6LAAC,qIAAA,CAAA,SAAM;gCAAC,SAAQ;gCAAQ,SAAS;0CAAQ;;;;;;0CAGzC,6LAAC,qIAAA,CAAA,SAAM;gCACL,SAAS;oCACP,MAAM,UAAU,CAAA,GAAA,oIAAA,CAAA,iBAAc,AAAD,EAAE;oCAC/B,WAAW;oCACX;gCACF;0CAEC,aAAa,IAAI,uBAAuB;;;;;;;;;;;;;;;;;;0BAI/C,6LAAC,oJAAA,CAAA,gBAAa;;;;;;;;;;;AAGpB;GAhCgB;;QACG,oIAAA,CAAA,qBAAkB;QACV,oIAAA,CAAA,qBAAkB;QACxB,oIAAA,CAAA,qBAAkB;;;KAHvB","debugId":null}},
    {"offset": {"line": 685, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAG1B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,4DACA;QAED,GAAG,KAAK;;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,sDACA;QAED,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QAAa,GAAG,KAAK;;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,SAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 788, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/onboarding/StepCard.tsx"],"sourcesContent":["\"use client\";\n\nimport { useMemo } from \"react\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { StepDefinition } from \"@/lib/onboarding/types\";\nimport { StepKey } from \"@/lib/onboarding/validators\";\nimport { useOnboardingStore } from \"@/lib/onboarding/state\";\n\ninterface StepCardProps {\n  definition: StepDefinition;\n  metrics?: string;\n  onOpen: (step: StepKey) => void;\n}\n\nexport function StepCard({ definition, metrics, onOpen }: StepCardProps) {\n  const steps = useOnboardingStore((state) => state.setup.steps);\n  const progress = useOnboardingStore((state) => state.setup.progress);\n  const status = useMemo(() => {\n    if (steps[definition.key]) return \"Complete\";\n    return progress > 0 ? \"In progress\" : \"Not started\";\n  }, [steps, definition.key, progress]);\n\n  return (\n    <Card className=\"group flex flex-col justify-between border-border bg-background/40 backdrop-blur\">\n      <CardHeader>\n        <CardTitle className=\"flex items-center justify-between text-base\">\n          <span>{definition.title}</span>\n          <span className=\"text-xs font-normal text-muted-foreground\">{status}</span>\n        </CardTitle>\n        <CardDescription>{definition.description}</CardDescription>\n      </CardHeader>\n      <CardContent className=\"flex items-end justify-between gap-3\">\n        <div className=\"text-xs text-muted-foreground\">\n          {definition.metricsLabel}: <span className=\"font-medium text-foreground\">{metrics ?? \"--\"}</span>\n        </div>\n        <Button size=\"sm\" onClick={() => onOpen(definition.key)}>\n          Configure\n        </Button>\n      </CardContent>\n    </Card>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAGA;;;AAPA;;;;;AAeO,SAAS,SAAS,EAAE,UAAU,EAAE,OAAO,EAAE,MAAM,EAAiB;;IACrE,MAAM,QAAQ,CAAA,GAAA,oIAAA,CAAA,qBAAkB,AAAD;8CAAE,CAAC,QAAU,MAAM,KAAK,CAAC,KAAK;;IAC7D,MAAM,WAAW,CAAA,GAAA,oIAAA,CAAA,qBAAkB,AAAD;iDAAE,CAAC,QAAU,MAAM,KAAK,CAAC,QAAQ;;IACnE,MAAM,SAAS,CAAA,GAAA,6JAAA,CAAA,UAAO,AAAD;oCAAE;YACrB,IAAI,KAAK,CAAC,WAAW,GAAG,CAAC,EAAE,OAAO;YAClC,OAAO,WAAW,IAAI,gBAAgB;QACxC;mCAAG;QAAC;QAAO,WAAW,GAAG;QAAE;KAAS;IAEpC,qBACE,6LAAC,mIAAA,CAAA,OAAI;QAAC,WAAU;;0BACd,6LAAC,mIAAA,CAAA,aAAU;;kCACT,6LAAC,mIAAA,CAAA,YAAS;wBAAC,WAAU;;0CACnB,6LAAC;0CAAM,WAAW,KAAK;;;;;;0CACvB,6LAAC;gCAAK,WAAU;0CAA6C;;;;;;;;;;;;kCAE/D,6LAAC,mIAAA,CAAA,kBAAe;kCAAE,WAAW,WAAW;;;;;;;;;;;;0BAE1C,6LAAC,mIAAA,CAAA,cAAW;gBAAC,WAAU;;kCACrB,6LAAC;wBAAI,WAAU;;4BACZ,WAAW,YAAY;4BAAC;0CAAE,6LAAC;gCAAK,WAAU;0CAA+B,WAAW;;;;;;;;;;;;kCAEvF,6LAAC,qIAAA,CAAA,SAAM;wBAAC,MAAK;wBAAK,SAAS,IAAM,OAAO,WAAW,GAAG;kCAAG;;;;;;;;;;;;;;;;;;AAMjE;GA3BgB;;QACA,oIAAA,CAAA,qBAAkB;QACf,oIAAA,CAAA,qBAAkB;;;KAFrB","debugId":null}},
    {"offset": {"line": 925, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/onboarding/PreviewPanel.tsx"],"sourcesContent":["\"use client\";\n\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { useOnboardingStore } from \"@/lib/onboarding/state\";\n\nexport function PreviewPanel() {\n  const preview = useOnboardingStore((state) => state.preview);\n\n  return (\n    <Card className=\"border-border/80 bg-background/70\">\n      <CardHeader>\n        <CardTitle className=\"text-lg\">Live preview</CardTitle>\n      </CardHeader>\n      <CardContent className=\"space-y-6 text-sm\">\n        <section>\n          <h3 className=\"text-xs uppercase text-muted-foreground\">Readiness score</h3>\n          <p className=\"mt-1 text-2xl font-semibold text-emerald-400\">{preview.readiness}%</p>\n        </section>\n        <Separator />\n        <section className=\"space-y-2\">\n          <h3 className=\"text-xs uppercase text-muted-foreground\">Forecast preview</h3>\n          {preview.financeForecast.length ? (\n            <div className=\"flex items-end gap-2\">\n              {preview.financeForecast.map((value, index) => (\n                <div key={index} className=\"flex-1\">\n                  <div className=\"rounded bg-emerald-500/20 p-2 text-center text-xs font-medium\">\n                    +{value.toLocaleString()}\n                  </div>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <p className=\"text-muted-foreground\">Add income and bills to preview cashflow.</p>\n          )}\n        </section>\n        <Separator />\n        <section className=\"space-y-2\">\n          <h3 className=\"text-xs uppercase text-muted-foreground\">Upcoming bills</h3>\n          {preview.upcomingBills.length ? (\n            <ul className=\"space-y-1\">\n              {preview.upcomingBills.map((bill) => (\n                <li key={bill.name} className=\"flex items-center justify-between rounded border border-border/60 px-3 py-2\">\n                  <span>{bill.name}</span>\n                  <span className=\"text-xs text-muted-foreground\">\n                    {bill.due} Â· ${bill.amount}\n                  </span>\n                </li>\n              ))}\n            </ul>\n          ) : (\n            <p className=\"text-muted-foreground\">Bills will appear here once entered.</p>\n          )}\n        </section>\n        <Separator />\n        <section className=\"space-y-2\">\n          <h3 className=\"text-xs uppercase text-muted-foreground\">Care reminders</h3>\n          {preview.care.length ? (\n            <ul className=\"space-y-1\">\n              {preview.care.map((item, index) => (\n                <li key={`${item.person}-${index}`} className=\"flex items-center justify-between rounded border border-border/60 px-3 py-2\">\n                  <span>{item.person}</span>\n                  <span className=\"text-xs text-muted-foreground\">{item.nextDose}</span>\n                </li>\n              ))}\n            </ul>\n          ) : (\n            <p className=\"text-muted-foreground\">Medication reminders preview will show after adding meds.</p>\n          )}\n        </section>\n        <Separator />\n        <section className=\"space-y-2\">\n          <h3 className=\"text-xs uppercase text-muted-foreground\">Automation checks</h3>\n          {preview.rules.length ? (\n            <ul className=\"space-y-1\">\n              {preview.rules.map((rule) => (\n                <li key={rule.id} className=\"flex items-center justify-between rounded border border-border/60 px-3 py-2\">\n                  <span>{rule.id}</span>\n                  <span className=\"text-xs text-muted-foreground\">{rule.count} recent hits</span>\n                </li>\n              ))}\n            </ul>\n          ) : (\n            <p className=\"text-muted-foreground\">Rules dry-run summary will show after enabling automations.</p>\n          )}\n        </section>\n      </CardContent>\n    </Card>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;;;AAJA;;;;AAMO,SAAS;;IACd,MAAM,UAAU,CAAA,GAAA,oIAAA,CAAA,qBAAkB,AAAD;oDAAE,CAAC,QAAU,MAAM,OAAO;;IAE3D,qBACE,6LAAC,mIAAA,CAAA,OAAI;QAAC,WAAU;;0BACd,6LAAC,mIAAA,CAAA,aAAU;0BACT,cAAA,6LAAC,mIAAA,CAAA,YAAS;oBAAC,WAAU;8BAAU;;;;;;;;;;;0BAEjC,6LAAC,mIAAA,CAAA,cAAW;gBAAC,WAAU;;kCACrB,6LAAC;;0CACC,6LAAC;gCAAG,WAAU;0CAA0C;;;;;;0CACxD,6LAAC;gCAAE,WAAU;;oCAAgD,QAAQ,SAAS;oCAAC;;;;;;;;;;;;;kCAEjF,6LAAC,wIAAA,CAAA,YAAS;;;;;kCACV,6LAAC;wBAAQ,WAAU;;0CACjB,6LAAC;gCAAG,WAAU;0CAA0C;;;;;;4BACvD,QAAQ,eAAe,CAAC,MAAM,iBAC7B,6LAAC;gCAAI,WAAU;0CACZ,QAAQ,eAAe,CAAC,GAAG,CAAC,CAAC,OAAO,sBACnC,6LAAC;wCAAgB,WAAU;kDACzB,cAAA,6LAAC;4CAAI,WAAU;;gDAAgE;gDAC3E,MAAM,cAAc;;;;;;;uCAFhB;;;;;;;;;qDAQd,6LAAC;gCAAE,WAAU;0CAAwB;;;;;;;;;;;;kCAGzC,6LAAC,wIAAA,CAAA,YAAS;;;;;kCACV,6LAAC;wBAAQ,WAAU;;0CACjB,6LAAC;gCAAG,WAAU;0CAA0C;;;;;;4BACvD,QAAQ,aAAa,CAAC,MAAM,iBAC3B,6LAAC;gCAAG,WAAU;0CACX,QAAQ,aAAa,CAAC,GAAG,CAAC,CAAC,qBAC1B,6LAAC;wCAAmB,WAAU;;0DAC5B,6LAAC;0DAAM,KAAK,IAAI;;;;;;0DAChB,6LAAC;gDAAK,WAAU;;oDACb,KAAK,GAAG;oDAAC;oDAAK,KAAK,MAAM;;;;;;;;uCAHrB,KAAK,IAAI;;;;;;;;;qDAStB,6LAAC;gCAAE,WAAU;0CAAwB;;;;;;;;;;;;kCAGzC,6LAAC,wIAAA,CAAA,YAAS;;;;;kCACV,6LAAC;wBAAQ,WAAU;;0CACjB,6LAAC;gCAAG,WAAU;0CAA0C;;;;;;4BACvD,QAAQ,IAAI,CAAC,MAAM,iBAClB,6LAAC;gCAAG,WAAU;0CACX,QAAQ,IAAI,CAAC,GAAG,CAAC,CAAC,MAAM,sBACvB,6LAAC;wCAAmC,WAAU;;0DAC5C,6LAAC;0DAAM,KAAK,MAAM;;;;;;0DAClB,6LAAC;gDAAK,WAAU;0DAAiC,KAAK,QAAQ;;;;;;;uCAFvD,GAAG,KAAK,MAAM,CAAC,CAAC,EAAE,OAAO;;;;;;;;;qDAOtC,6LAAC;gCAAE,WAAU;0CAAwB;;;;;;;;;;;;kCAGzC,6LAAC,wIAAA,CAAA,YAAS;;;;;kCACV,6LAAC;wBAAQ,WAAU;;0CACjB,6LAAC;gCAAG,WAAU;0CAA0C;;;;;;4BACvD,QAAQ,KAAK,CAAC,MAAM,iBACnB,6LAAC;gCAAG,WAAU;0CACX,QAAQ,KAAK,CAAC,GAAG,CAAC,CAAC,qBAClB,6LAAC;wCAAiB,WAAU;;0DAC1B,6LAAC;0DAAM,KAAK,EAAE;;;;;;0DACd,6LAAC;gDAAK,WAAU;;oDAAiC,KAAK,KAAK;oDAAC;;;;;;;;uCAFrD,KAAK,EAAE;;;;;;;;;qDAOpB,6LAAC;gCAAE,WAAU;0CAAwB;;;;;;;;;;;;;;;;;;;;;;;;AAMjD;GAnFgB;;QACE,oIAAA,CAAA,qBAAkB;;;KADpB","debugId":null}},
    {"offset": {"line": 1261, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/onboarding/SideAssistant.tsx"],"sourcesContent":["\"use client\";\n\nimport { useMemo } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { useOnboardingStore } from \"@/lib/onboarding/state\";\nimport { StepDefinitions } from \"@/lib/onboarding/types\";\nimport { PreviewPanel } from \"./PreviewPanel\";\n\nexport function SideAssistant() {\n  const setup = useOnboardingStore((state) => state.setup);\n\n  const message = useMemo(() => {\n    const pending = StepDefinitions.find((step) => !setup.steps[step.key]);\n    if (!pending) {\n      return \"All systems ready! You can finish and launch modules.\";\n    }\n    switch (pending.key) {\n      case \"accounts\":\n        return \"Linking Plaid and calendars unlocks smarter nudges.\";\n      case \"finance\":\n        return \"Add recurring income and bills to power your finance forecast.\";\n      case \"health\":\n        return \"Capture medications so Beno can monitor refills.\";\n      default:\n        return `Next up: ${pending.title}.`;\n    }\n  }, [setup.steps]);\n\n  return (\n    <div className=\"space-y-4\">\n      <Card className=\"border-border/80 bg-background/70\">\n        <CardHeader>\n          <CardTitle className=\"text-lg\">Beno Assistant</CardTitle>\n        </CardHeader>\n        <CardContent className=\"text-sm text-muted-foreground\">\n          {message}\n        </CardContent>\n      </Card>\n      <PreviewPanel />\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;;;AANA;;;;;;AAQO,SAAS;;IACd,MAAM,QAAQ,CAAA,GAAA,oIAAA,CAAA,qBAAkB,AAAD;mDAAE,CAAC,QAAU,MAAM,KAAK;;IAEvD,MAAM,UAAU,CAAA,GAAA,6JAAA,CAAA,UAAO,AAAD;0CAAE;YACtB,MAAM,UAAU,oIAAA,CAAA,kBAAe,CAAC,IAAI;0DAAC,CAAC,OAAS,CAAC,MAAM,KAAK,CAAC,KAAK,GAAG,CAAC;;YACrE,IAAI,CAAC,SAAS;gBACZ,OAAO;YACT;YACA,OAAQ,QAAQ,GAAG;gBACjB,KAAK;oBACH,OAAO;gBACT,KAAK;oBACH,OAAO;gBACT,KAAK;oBACH,OAAO;gBACT;oBACE,OAAO,CAAC,SAAS,EAAE,QAAQ,KAAK,CAAC,CAAC,CAAC;YACvC;QACF;yCAAG;QAAC,MAAM,KAAK;KAAC;IAEhB,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC,mIAAA,CAAA,OAAI;gBAAC,WAAU;;kCACd,6LAAC,mIAAA,CAAA,aAAU;kCACT,cAAA,6LAAC,mIAAA,CAAA,YAAS;4BAAC,WAAU;sCAAU;;;;;;;;;;;kCAEjC,6LAAC,mIAAA,CAAA,cAAW;wBAAC,WAAU;kCACpB;;;;;;;;;;;;0BAGL,6LAAC,mJAAA,CAAA,eAAY;;;;;;;;;;;AAGnB;GAjCgB;;QACA,oIAAA,CAAA,qBAAkB;;;KADlB","debugId":null}},
    {"offset": {"line": 1368, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/switch.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,uBAAS,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAG5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,qKAAA,CAAA,OAAqB;QACpB,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,sXACA;QAED,GAAG,KAAK;QACT,KAAK;kBAEL,cAAA,6LAAC,qKAAA,CAAA,QAAsB;YACrB,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV;;;;;;;;;;;;AAKR,OAAO,WAAW,GAAG,qKAAA,CAAA,OAAqB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 1411, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/label.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,gBAAgB,CAAA,GAAA,mKAAA,CAAA,MAAG,AAAD,EACtB;AAGF,MAAM,sBAAQ,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAI3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,oKAAA,CAAA,OAAmB;QAClB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iBAAiB;QAC9B,GAAG,KAAK;;;;;;;AAGb,MAAM,WAAW,GAAG,oKAAA,CAAA,OAAmB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 1450, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/onboarding/common/OAuthTile.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\n\ninterface OAuthTileProps {\n  name: string;\n  description: string;\n  connected?: boolean;\n  onConnect?: () => Promise<void> | void;\n  onDisconnect?: () => Promise<void> | void;\n}\n\nexport function OAuthTile({ name, description, connected, onConnect, onDisconnect }: OAuthTileProps) {\n  const [pending, setPending] = useState(false);\n\n  const handleClick = async () => {\n    if (pending) return;\n    setPending(true);\n    try {\n      if (connected) {\n        await onDisconnect?.();\n      } else {\n        await onConnect?.();\n      }\n    } finally {\n      setPending(false);\n    }\n  };\n\n  return (\n    <div className=\"flex items-center justify-between rounded-lg border border-border/70 bg-background/60 p-4\">\n      <div>\n        <p className=\"text-sm font-medium text-foreground\">{name}</p>\n        <p className=\"text-xs text-muted-foreground\">{description}</p>\n      </div>\n      <div className=\"flex items-center gap-2\">\n        <Badge variant={connected ? \"default\" : \"secondary\"}>\n          {connected ? \"Connected\" : \"Not connected\"}\n        </Badge>\n        <Button size=\"sm\" onClick={handleClick} disabled={pending} variant={connected ? \"outline\" : \"default\"}>\n          {connected ? \"Disconnect\" : \"Connect\"}\n        </Button>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;;;AAJA;;;;AAcO,SAAS,UAAU,EAAE,IAAI,EAAE,WAAW,EAAE,SAAS,EAAE,SAAS,EAAE,YAAY,EAAkB;;IACjG,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,MAAM,cAAc;QAClB,IAAI,SAAS;QACb,WAAW;QACX,IAAI;YACF,IAAI,WAAW;gBACb,MAAM;YACR,OAAO;gBACL,MAAM;YACR;QACF,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;;kCACC,6LAAC;wBAAE,WAAU;kCAAuC;;;;;;kCACpD,6LAAC;wBAAE,WAAU;kCAAiC;;;;;;;;;;;;0BAEhD,6LAAC;gBAAI,WAAU;;kCACb,6LAAC,oIAAA,CAAA,QAAK;wBAAC,SAAS,YAAY,YAAY;kCACrC,YAAY,cAAc;;;;;;kCAE7B,6LAAC,qIAAA,CAAA,SAAM;wBAAC,MAAK;wBAAK,SAAS;wBAAa,UAAU;wBAAS,SAAS,YAAY,YAAY;kCACzF,YAAY,eAAe;;;;;;;;;;;;;;;;;;AAKtC;GAjCgB;KAAA","debugId":null}},
    {"offset": {"line": 1554, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/onboarding/client.ts"],"sourcesContent":["\"use client\";\n\nimport { Setup } from \"./validators\";\nimport { PreviewData, SaveResponse } from \"./types\";\n\nexport async function detectSetup(): Promise<SaveResponse[\"setup\"] | null> {\n  const response = await fetch(\"/api/onboarding/detect\", {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n  });\n  if (!response.ok) return null;\n  const json = await response.json();\n  return json.setup ?? null;\n}\n\nexport async function persistSetup(setup: Setup, finalize = false, enableAutomations = true) {\n  const payload = { setup, finalize, enableAutomations };\n  const response = await fetch(\"/api/onboarding/save\", {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify(payload),\n  });\n  if (!response.ok) {\n    throw new Error(\"Failed to save setup\");\n  }\n  const json: SaveResponse = await response.json();\n  return json;\n}\n\nexport async function requestPreview(setup: Setup): Promise<PreviewData> {\n  const response = await fetch(\"/api/onboarding/preview\", {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ setup }),\n  });\n  if (!response.ok) {\n    throw new Error(\"Failed to load preview\");\n  }\n  return response.json();\n}\n"],"names":[],"mappings":";;;;;AAAA;AAKO,eAAe;IACpB,MAAM,WAAW,MAAM,MAAM,0BAA0B;QACrD,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;IAChD;IACA,IAAI,CAAC,SAAS,EAAE,EAAE,OAAO;IACzB,MAAM,OAAO,MAAM,SAAS,IAAI;IAChC,OAAO,KAAK,KAAK,IAAI;AACvB;AAEO,eAAe,aAAa,KAAY,EAAE,WAAW,KAAK,EAAE,oBAAoB,IAAI;IACzF,MAAM,UAAU;QAAE;QAAO;QAAU;IAAkB;IACrD,MAAM,WAAW,MAAM,MAAM,wBAAwB;QACnD,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;IACvB;IACA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM;IAClB;IACA,MAAM,OAAqB,MAAM,SAAS,IAAI;IAC9C,OAAO;AACT;AAEO,eAAe,eAAe,KAAY;IAC/C,MAAM,WAAW,MAAM,MAAM,2BAA2B;QACtD,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;YAAE;QAAM;IAC/B;IACA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO,SAAS,IAAI;AACtB","debugId":null}},
    {"offset": {"line": 1614, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/onboarding/steps/AccountsDrawer.tsx"],"sourcesContent":["\"use client\";\n\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { Sheet, SheetContent, SheetDescription, SheetFooter, SheetHeader, SheetTitle } from \"@/components/ui/sheet\";\nimport { Button } from \"@/components/ui/button\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Label } from \"@/components/ui/label\";\nimport { OAuthTile } from \"../common/OAuthTile\";\nimport { useOnboardingStore } from \"@/lib/onboarding/state\";\nimport { persistSetup, requestPreview } from \"@/lib/onboarding/client\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface AccountsDrawerProps {\n  open: boolean;\n  onClose: () => void;\n}\n\ntype CalendarEntry = {\n  provider: \"google\" | \"outlook\";\n  id: string;\n  name: string;\n};\n\nexport function AccountsDrawer({ open, onClose }: AccountsDrawerProps) {\n  const { toast } = useToast();\n  const setup = useOnboardingStore((state) => state.setup);\n  const updateData = useOnboardingStore((state) => state.updateData);\n  const setPreview = useOnboardingStore((state) => state.setPreview);\n\n  const [plaid, setPlaid] = useState(false);\n  const [calendarConnected, setCalendarConnected] = useState(false);\n  const [calendarEntries, setCalendarEntries] = useState<CalendarEntry[]>([]);\n  const [emailIngest, setEmailIngest] = useState(false);\n  const [drive, setDrive] = useState(false);\n  const [healthProviders, setHealthProviders] = useState<string[]>([]);\n  const [historyRange, setHistoryRange] = useState(\"90\");\n  const [saving, setSaving] = useState(false);\n\n  useEffect(() => {\n    if (!open) return;\n    const integrations = setup.data.integrations ?? {};\n    setPlaid(Boolean(integrations.plaid));\n    const calendars = integrations.calendars ?? [];\n    setCalendarConnected(calendars.length > 0);\n    setCalendarEntries(calendars as CalendarEntry[]);\n    setEmailIngest(Boolean(integrations.emailIngest));\n    setDrive(Boolean(integrations.drive));\n    setHealthProviders(integrations.health ?? []);\n  }, [open, setup.data.integrations]);\n\n  const historyOptions = useMemo(() => [\"90\", \"180\", \"365\"], []);\n\n  const toggleProvider = (provider: string) => {\n    setHealthProviders((prev) =>\n      prev.includes(provider) ? prev.filter((p) => p !== provider) : [...prev, provider]\n    );\n  };\n\n  const handleSave = useCallback(async () => {\n    setSaving(true);\n    try {\n      const integrations = {\n        plaid,\n        calendars: calendarConnected ? calendarEntries : undefined,\n        emailIngest,\n        drive,\n        health: healthProviders,\n        historyRange,\n      } as any;\n\n      updateData(\"accounts\", { integrations } as any);\n      const latest = useOnboardingStore.getState().setup;\n      const response = await persistSetup(latest, false);\n      const preview = await requestPreview(response.setup);\n      setPreview({\n        readiness: preview.readiness,\n        financeForecast: preview.finance?.forecast ?? [],\n        upcomingBills: preview.finance?.bills ?? [],\n        care: preview.care ?? [],\n        rules: preview.rules ?? [],\n      });\n      toast({\n        title: \"Accounts saved\",\n        description: \"Integrations updated successfully.\",\n      });\n      onClose();\n    } catch (error) {\n      toast({\n        title: \"Failed to save\",\n        description: error instanceof Error ? error.message : \"Unknown error\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setSaving(false);\n    }\n  }, [calendarConnected, calendarEntries, drive, emailIngest, healthProviders, historyRange, onClose, plaid, setPreview, toast, updateData]);\n\n  useEffect(() => {\n    const listener = () => {\n      if (open) {\n        handleSave();\n      }\n    };\n    window.addEventListener(\"onboarding-save\" as any, listener);\n    return () => window.removeEventListener(\"onboarding-save\" as any, listener);\n  }, [handleSave, open]);\n\n  return (\n    <Sheet open={open} onOpenChange={(value) => !value && onClose()}>\n      <SheetContent className=\"w-full overflow-y-auto sm:max-w-2xl\">\n        <SheetHeader>\n          <SheetTitle>Accounts & Integrations</SheetTitle>\n          <SheetDescription>Link data sources to power your launch console.</SheetDescription>\n        </SheetHeader>\n        <div className=\"mt-6 space-y-6\">\n          <section className=\"space-y-4\">\n            <h3 className=\"text-sm font-semibold\">Core integrations</h3>\n            <OAuthTile\n              name=\"Plaid banking\"\n              description=\"Securely connect bank and credit accounts.\"\n              connected={plaid}\n              onConnect={() => setPlaid(true)}\n              onDisconnect={() => setPlaid(false)}\n            />\n            <OAuthTile\n              name=\"Calendar sync\"\n              description=\"Import events to schedule reminders.\"\n              connected={calendarConnected}\n              onConnect={() => {\n                setCalendarConnected(true);\n                if (!calendarEntries.length) {\n                  setCalendarEntries([\n                    { provider: \"google\", id: \"primary\", name: \"Primary Calendar\" },\n                  ]);\n                }\n              }}\n              onDisconnect={() => {\n                setCalendarConnected(false);\n                setCalendarEntries([]);\n              }}\n            />\n            {calendarConnected && (\n              <div className=\"space-y-2 rounded-lg border border-border/60 p-3 text-xs text-muted-foreground\">\n                {calendarEntries.map((calendar) => (\n                  <div key={calendar.id} className=\"flex items-center justify-between\">\n                    <span>{calendar.name}</span>\n                    <span className=\"text-[10px] uppercase\">{calendar.provider}</span>\n                  </div>\n                ))}\n              </div>\n            )}\n            <OAuthTile\n              name=\"Email ingest\"\n              description=\"Parse bills & receipts from a forwarding inbox.\"\n              connected={emailIngest}\n              onConnect={() => setEmailIngest(true)}\n              onDisconnect={() => setEmailIngest(false)}\n            />\n            <OAuthTile\n              name=\"Drive backup\"\n              description=\"Store documents in your preferred cloud drive.\"\n              connected={drive}\n              onConnect={() => setDrive(true)}\n              onDisconnect={() => setDrive(false)}\n            />\n          </section>\n          <section className=\"space-y-4\">\n            <h3 className=\"text-sm font-semibold\">Health data sources</h3>\n            <div className=\"grid gap-3 md:grid-cols-3\">\n              {[\"apple\", \"google\", \"fitbit\"].map((provider) => (\n                <button\n                  key={provider}\n                  type=\"button\"\n                  onClick={() => toggleProvider(provider)}\n                  className={`rounded-lg border px-3 py-2 text-xs uppercase tracking-wide ${\n                    healthProviders.includes(provider)\n                      ? \"border-emerald-400 bg-emerald-500/10 text-emerald-200\"\n                      : \"border-border/60 text-muted-foreground\"\n                  }`}\n                >\n                  {provider}\n                </button>\n              ))}\n            </div>\n          </section>\n          <section className=\"space-y-3\">\n            <h3 className=\"text-sm font-semibold\">Historical import</h3>\n            <p className=\"text-xs text-muted-foreground\">\n              Choose how much historical data to pull when linking accounts.\n            </p>\n            <div className=\"flex gap-3\">\n              {historyOptions.map((option) => (\n                <label key={option} className=\"flex items-center gap-2 text-sm\">\n                  <input\n                    type=\"radio\"\n                    name=\"history-range\"\n                    value={option}\n                    checked={historyRange === option}\n                    onChange={() => setHistoryRange(option)}\n                  />\n                  {option} days\n                </label>\n              ))}\n            </div>\n            <div className=\"flex items-center gap-2 rounded-lg border border-border/60 p-3\">\n              <Switch id=\"test-connection\" />\n              <div>\n                <Label htmlFor=\"test-connection\" className=\"text-sm font-medium\">\n                  Test connections\n                </Label>\n                <p className=\"text-xs text-muted-foreground\">\n                  Run a quick status check before saving.\n                </p>\n              </div>\n            </div>\n          </section>\n        </div>\n        <SheetFooter className=\"mt-8\">\n          <Button variant=\"ghost\" onClick={onClose} disabled={saving}>\n            Discard\n          </Button>\n          <Button onClick={handleSave} disabled={saving}>\n            Save & close\n          </Button>\n        </SheetFooter>\n      </SheetContent>\n    </Sheet>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2095, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/table.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n"],"names":[],"mappings":";;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YACC,KAAK;YACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;YAC9C,GAAG,KAAK;;;;;;;;;;;;AAIf,MAAM,WAAW,GAAG;AAEpB,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAM,KAAK;QAAK,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,mBAAmB;QAAa,GAAG,KAAK;;;;;;;AAEzE,YAAY,WAAW,GAAG;AAE1B,MAAM,0BAAY,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,2DACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG;AAE1B,MAAM,yBAAW,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAG9B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,+EACA;QAED,GAAG,KAAK;;;;;;;AAGb,SAAS,WAAW,GAAG;AAEvB,MAAM,0BAAY,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,SAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,oGACA;QAED,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,0BAAY,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,SAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,kDAAkD;QAC/D,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,6BAAe,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,SAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,sCAAsC;QACnD,GAAG,KAAK;;;;;;;AAGb,aAAa,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 2233, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/onboarding/common/InlineTable.tsx"],"sourcesContent":["\"use client\";\n\nimport { ReactNode } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\n\ninterface InlineTableProps<T> {\n  columns: Array<{ key: keyof T; label: string; render?: (item: T, index: number) => ReactNode }>;\n  data: T[];\n  onAdd: () => void;\n  onRemove?: (index: number) => void;\n  emptyLabel?: string;\n  children?: ReactNode;\n}\n\nexport function InlineTable<T extends Record<string, unknown>>({\n  columns,\n  data,\n  onAdd,\n  onRemove,\n  emptyLabel,\n  children,\n}: InlineTableProps<T>) {\n  return (\n    <div className=\"space-y-2\">\n      <div className=\"rounded-lg border border-border/70\">\n        <Table>\n          <TableHeader>\n            <TableRow>\n              {columns.map((column) => (\n                <TableHead key={String(column.key)}>{column.label}</TableHead>\n              ))}\n              {onRemove && <TableHead className=\"w-12\" />}\n            </TableRow>\n          </TableHeader>\n          <TableBody>\n            {data.length ? (\n              data.map((item, index) => (\n                <TableRow key={index}>\n                  {columns.map((column) => (\n                    <TableCell key={String(column.key)}>\n                      {column.render ? column.render(item, index) : String(item[column.key] ?? \"\")}\n                    </TableCell>\n                  ))}\n                  {onRemove && (\n                    <TableCell className=\"text-right\">\n                      <Button variant=\"ghost\" size=\"sm\" onClick={() => onRemove(index)}>\n                        Remove\n                      </Button>\n                    </TableCell>\n                  )}\n                </TableRow>\n              ))\n            ) : (\n              <TableRow>\n                <TableCell colSpan={columns.length + (onRemove ? 1 : 0)} className=\"text-center text-sm text-muted-foreground\">\n                  {emptyLabel ?? \"No records yet\"}\n                </TableCell>\n              </TableRow>\n            )}\n          </TableBody>\n        </Table>\n      </div>\n      <div className=\"flex items-center justify-between\">\n        <Button variant=\"secondary\" onClick={onAdd} size=\"sm\">\n          Add row\n        </Button>\n        {children}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAGA;AACA;AAJA;;;;AAeO,SAAS,YAA+C,EAC7D,OAAO,EACP,IAAI,EACJ,KAAK,EACL,QAAQ,EACR,UAAU,EACV,QAAQ,EACY;IACpB,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC,oIAAA,CAAA,QAAK;;sCACJ,6LAAC,oIAAA,CAAA,cAAW;sCACV,cAAA,6LAAC,oIAAA,CAAA,WAAQ;;oCACN,QAAQ,GAAG,CAAC,CAAC,uBACZ,6LAAC,oIAAA,CAAA,YAAS;sDAA2B,OAAO,KAAK;2CAAjC,OAAO,OAAO,GAAG;;;;;oCAElC,0BAAY,6LAAC,oIAAA,CAAA,YAAS;wCAAC,WAAU;;;;;;;;;;;;;;;;;sCAGtC,6LAAC,oIAAA,CAAA,YAAS;sCACP,KAAK,MAAM,GACV,KAAK,GAAG,CAAC,CAAC,MAAM,sBACd,6LAAC,oIAAA,CAAA,WAAQ;;wCACN,QAAQ,GAAG,CAAC,CAAC,uBACZ,6LAAC,oIAAA,CAAA,YAAS;0DACP,OAAO,MAAM,GAAG,OAAO,MAAM,CAAC,MAAM,SAAS,OAAO,IAAI,CAAC,OAAO,GAAG,CAAC,IAAI;+CAD3D,OAAO,OAAO,GAAG;;;;;wCAIlC,0BACC,6LAAC,oIAAA,CAAA,YAAS;4CAAC,WAAU;sDACnB,cAAA,6LAAC,qIAAA,CAAA,SAAM;gDAAC,SAAQ;gDAAQ,MAAK;gDAAK,SAAS,IAAM,SAAS;0DAAQ;;;;;;;;;;;;mCARzD;;;;0DAgBjB,6LAAC,oIAAA,CAAA,WAAQ;0CACP,cAAA,6LAAC,oIAAA,CAAA,YAAS;oCAAC,SAAS,QAAQ,MAAM,GAAG,CAAC,WAAW,IAAI,CAAC;oCAAG,WAAU;8CAChE,cAAc;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAO3B,6LAAC;gBAAI,WAAU;;kCACb,6LAAC,qIAAA,CAAA,SAAM;wBAAC,SAAQ;wBAAY,SAAS;wBAAO,MAAK;kCAAK;;;;;;oBAGrD;;;;;;;;;;;;;AAIT;KAxDgB","debugId":null}},
    {"offset": {"line": 2381, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/onboarding/steps/PeopleDrawer.tsx"],"sourcesContent":["\"use client\";\n\nimport { useCallback, useEffect, useState } from \"react\";\nimport { Sheet, SheetContent, SheetDescription, SheetFooter, SheetHeader, SheetTitle } from \"@/components/ui/sheet\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { InlineTable } from \"../common/InlineTable\";\nimport { useOnboardingStore } from \"@/lib/onboarding/state\";\nimport { persistSetup, requestPreview } from \"@/lib/onboarding/client\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface PeopleDrawerProps {\n  open: boolean;\n  onClose: () => void;\n}\n\ntype ContactForm = {\n  id: string;\n  name: string;\n  relation: \"head\" | \"family\" | \"guest\" | \"vendor\";\n  phone?: string;\n  defaultChannel: \"whatsapp\" | \"sms\" | \"none\";\n};\n\nconst relationOptions: ContactForm[\"relation\"][] = [\"head\", \"family\", \"guest\", \"vendor\"];\n\nexport function PeopleDrawer({ open, onClose }: PeopleDrawerProps) {\n  const { toast } = useToast();\n  const setup = useOnboardingStore((state) => state.setup);\n  const updateData = useOnboardingStore((state) => state.updateData);\n  const setPreview = useOnboardingStore((state) => state.setPreview);\n  const createEmptyContact = (): ContactForm => ({\n    id: crypto.randomUUID?.() ?? Math.random().toString(36).slice(2),\n    name: \"\",\n    relation: \"family\",\n    phone: \"\",\n    defaultChannel: \"whatsapp\",\n  });\n\n  const [contacts, setContacts] = useState<ContactForm[]>([]);\n  const [saving, setSaving] = useState(false);\n\n  useEffect(() => {\n    if (!open) return;\n    const current = setup.data.contacts ?? [];\n    setContacts(\n      current.length\n        ? current.map((item) => ({\n            ...item,\n            defaultChannel: item.defaultChannel ?? \"whatsapp\",\n            relation: item.relation ?? \"family\",\n          }))\n        : [createEmptyContact()]\n    );\n  }, [open, setup.data.contacts]);\n\n  const updateContact = (index: number, patch: Partial<ContactForm>) => {\n    setContacts((prev) => {\n      const next = [...prev];\n      next[index] = { ...next[index], ...patch };\n      return next;\n    });\n  };\n\n  const handleSave = useCallback(async () => {\n    setSaving(true);\n    try {\n      const cleaned = contacts.filter((contact) => contact.name.trim().length > 0);\n      updateData(\"people\", { contacts: cleaned } as any);\n      const latest = useOnboardingStore.getState().setup;\n      const response = await persistSetup(latest, false);\n      const preview = await requestPreview(response.setup);\n      setPreview({\n        readiness: preview.readiness,\n        financeForecast: preview.finance?.forecast ?? [],\n        upcomingBills: preview.finance?.bills ?? [],\n        care: preview.care ?? [],\n        rules: preview.rules ?? [],\n      });\n      toast({\n        title: \"Contacts saved\",\n        description: `${cleaned.length} contact${cleaned.length === 1 ? \"\" : \"s\"} added.`,\n      });\n      onClose();\n    } catch (error) {\n      toast({\n        title: \"Failed to save\",\n        description: error instanceof Error ? error.message : \"Unknown error\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setSaving(false);\n    }\n  }, [contacts, onClose, setPreview, toast, updateData]);\n\n  useEffect(() => {\n    const listener = () => {\n      if (open) {\n        handleSave();\n      }\n    };\n    window.addEventListener(\"onboarding-save\" as any, listener);\n    return () => window.removeEventListener(\"onboarding-save\" as any, listener);\n  }, [handleSave, open]);\n\n  return (\n    <Sheet open={open} onOpenChange={(value) => !value && onClose()}>\n      <SheetContent className=\"w-full overflow-y-auto sm:max-w-2xl\">\n        <SheetHeader>\n          <SheetTitle>Household contacts</SheetTitle>\n          <SheetDescription>\n            Add the people Beno should notify for reminders and nudges.\n          </SheetDescription>\n        </SheetHeader>\n        <div className=\"mt-6 space-y-4\">\n          <InlineTable<ContactForm>\n            data={contacts}\n            onAdd={() => setContacts((prev) => [...prev, createEmptyContact()])}\n            onRemove={(index) =>\n              setContacts((prev) => prev.filter((_, itemIndex) => itemIndex !== index))\n            }\n            emptyLabel=\"No contacts yet\"\n            columns={[\n              {\n                key: \"name\",\n                label: \"Name\",\n                render: (item, index) => (\n                  <Input\n                    value={item.name}\n                    onChange={(event) => updateContact(index, { name: event.target.value })}\n                    placeholder=\"Full name\"\n                  />\n                ),\n              },\n              {\n                key: \"relation\",\n                label: \"Relation\",\n                render: (item, index) => (\n                  <select\n                    className=\"w-full rounded border border-border/60 bg-background px-2 py-1 text-sm\"\n                    value={item.relation}\n                    onChange={(event) =>\n                      updateContact(index, { relation: event.target.value as ContactForm[\"relation\"] })\n                    }\n                  >\n                    {relationOptions.map((option) => (\n                      <option key={option} value={option}>\n                        {option}\n                      </option>\n                    ))}\n                  </select>\n                ),\n              },\n              {\n                key: \"phone\",\n                label: \"Phone\",\n                render: (item, index) => (\n                  <Input\n                    value={item.phone ?? \"\"}\n                    onChange={(event) => updateContact(index, { phone: event.target.value })}\n                    placeholder=\"Optional\"\n                  />\n                ),\n              },\n              {\n                key: \"defaultChannel\",\n                label: \"Channel\",\n                render: (item, index) => (\n                  <select\n                    className=\"w-full rounded border border-border/60 bg-background px-2 py-1 text-sm\"\n                    value={item.defaultChannel}\n                    onChange={(event) =>\n                      updateContact(index, {\n                        defaultChannel: event.target.value as ContactForm[\"defaultChannel\"],\n                      })\n                    }\n                  >\n                    <option value=\"whatsapp\">WhatsApp</option>\n                    <option value=\"sms\">SMS</option>\n                    <option value=\"none\">None</option>\n                  </select>\n                ),\n              },\n            ]}\n          />\n          <Button variant=\"secondary\" size=\"sm\">\n            Import from Google Contacts\n          </Button>\n        </div>\n        <SheetFooter className=\"mt-8\">\n          <Button variant=\"ghost\" onClick={onClose} disabled={saving}>\n            Discard\n          </Button>\n          <Button onClick={handleSave} disabled={saving}>\n            Save & close\n          </Button>\n        </SheetFooter>\n      </SheetContent>\n    </Sheet>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AATA;;;;;;;;;AAwBA,MAAM,kBAA6C;IAAC;IAAQ;IAAU;IAAS;CAAS;AAEjF,SAAS,aAAa,EAAE,IAAI,EAAE,OAAO,EAAqB;;IAC/D,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,+HAAA,CAAA,WAAQ,AAAD;IACzB,MAAM,QAAQ,CAAA,GAAA,oIAAA,CAAA,qBAAkB,AAAD;kDAAE,CAAC,QAAU,MAAM,KAAK;;IACvD,MAAM,aAAa,CAAA,GAAA,oIAAA,CAAA,qBAAkB,AAAD;uDAAE,CAAC,QAAU,MAAM,UAAU;;IACjE,MAAM,aAAa,CAAA,GAAA,oIAAA,CAAA,qBAAkB,AAAD;uDAAE,CAAC,QAAU,MAAM,UAAU;;IACjE,MAAM,qBAAqB,IAAmB,CAAC;YAC7C,IAAI,OAAO,UAAU,QAAQ,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,KAAK,CAAC;YAC9D,MAAM;YACN,UAAU;YACV,OAAO;YACP,gBAAgB;QAClB,CAAC;IAED,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAiB,EAAE;IAC1D,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAErC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;YACR,IAAI,CAAC,MAAM;YACX,MAAM,UAAU,MAAM,IAAI,CAAC,QAAQ,IAAI,EAAE;YACzC,YACE,QAAQ,MAAM,GACV,QAAQ,GAAG;0CAAC,CAAC,OAAS,CAAC;wBACrB,GAAG,IAAI;wBACP,gBAAgB,KAAK,cAAc,IAAI;wBACvC,UAAU,KAAK,QAAQ,IAAI;oBAC7B,CAAC;2CACD;gBAAC;aAAqB;QAE9B;iCAAG;QAAC;QAAM,MAAM,IAAI,CAAC,QAAQ;KAAC;IAE9B,MAAM,gBAAgB,CAAC,OAAe;QACpC,YAAY,CAAC;YACX,MAAM,OAAO;mBAAI;aAAK;YACtB,IAAI,CAAC,MAAM,GAAG;gBAAE,GAAG,IAAI,CAAC,MAAM;gBAAE,GAAG,KAAK;YAAC;YACzC,OAAO;QACT;IACF;IAEA,MAAM,aAAa,CAAA,GAAA,6JAAA,CAAA,cAAW,AAAD;gDAAE;YAC7B,UAAU;YACV,IAAI;gBACF,MAAM,UAAU,SAAS,MAAM;oEAAC,CAAC,UAAY,QAAQ,IAAI,CAAC,IAAI,GAAG,MAAM,GAAG;;gBAC1E,WAAW,UAAU;oBAAE,UAAU;gBAAQ;gBACzC,MAAM,SAAS,oIAAA,CAAA,qBAAkB,CAAC,QAAQ,GAAG,KAAK;gBAClD,MAAM,WAAW,MAAM,CAAA,GAAA,qIAAA,CAAA,eAAY,AAAD,EAAE,QAAQ;gBAC5C,MAAM,UAAU,MAAM,CAAA,GAAA,qIAAA,CAAA,iBAAc,AAAD,EAAE,SAAS,KAAK;gBACnD,WAAW;oBACT,WAAW,QAAQ,SAAS;oBAC5B,iBAAiB,QAAQ,OAAO,EAAE,YAAY,EAAE;oBAChD,eAAe,QAAQ,OAAO,EAAE,SAAS,EAAE;oBAC3C,MAAM,QAAQ,IAAI,IAAI,EAAE;oBACxB,OAAO,QAAQ,KAAK,IAAI,EAAE;gBAC5B;gBACA,MAAM;oBACJ,OAAO;oBACP,aAAa,GAAG,QAAQ,MAAM,CAAC,QAAQ,EAAE,QAAQ,MAAM,KAAK,IAAI,KAAK,IAAI,OAAO,CAAC;gBACnF;gBACA;YACF,EAAE,OAAO,OAAO;gBACd,MAAM;oBACJ,OAAO;oBACP,aAAa,iBAAiB,QAAQ,MAAM,OAAO,GAAG;oBACtD,SAAS;gBACX;YACF,SAAU;gBACR,UAAU;YACZ;QACF;+CAAG;QAAC;QAAU;QAAS;QAAY;QAAO;KAAW;IAErD,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;YACR,MAAM;mDAAW;oBACf,IAAI,MAAM;wBACR;oBACF;gBACF;;YACA,OAAO,gBAAgB,CAAC,mBAA0B;YAClD;0CAAO,IAAM,OAAO,mBAAmB,CAAC,mBAA0B;;QACpE;iCAAG;QAAC;QAAY;KAAK;IAErB,qBACE,6LAAC,oIAAA,CAAA,QAAK;QAAC,MAAM;QAAM,cAAc,CAAC,QAAU,CAAC,SAAS;kBACpD,cAAA,6LAAC,oIAAA,CAAA,eAAY;YAAC,WAAU;;8BACtB,6LAAC,oIAAA,CAAA,cAAW;;sCACV,6LAAC,oIAAA,CAAA,aAAU;sCAAC;;;;;;sCACZ,6LAAC,oIAAA,CAAA,mBAAgB;sCAAC;;;;;;;;;;;;8BAIpB,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,4JAAA,CAAA,cAAW;4BACV,MAAM;4BACN,OAAO,IAAM,YAAY,CAAC,OAAS;2CAAI;wCAAM;qCAAqB;4BAClE,UAAU,CAAC,QACT,YAAY,CAAC,OAAS,KAAK,MAAM,CAAC,CAAC,GAAG,YAAc,cAAc;4BAEpE,YAAW;4BACX,SAAS;gCACP;oCACE,KAAK;oCACL,OAAO;oCACP,QAAQ,CAAC,MAAM,sBACb,6LAAC,oIAAA,CAAA,QAAK;4CACJ,OAAO,KAAK,IAAI;4CAChB,UAAU,CAAC,QAAU,cAAc,OAAO;oDAAE,MAAM,MAAM,MAAM,CAAC,KAAK;gDAAC;4CACrE,aAAY;;;;;;gCAGlB;gCACA;oCACE,KAAK;oCACL,OAAO;oCACP,QAAQ,CAAC,MAAM,sBACb,6LAAC;4CACC,WAAU;4CACV,OAAO,KAAK,QAAQ;4CACpB,UAAU,CAAC,QACT,cAAc,OAAO;oDAAE,UAAU,MAAM,MAAM,CAAC,KAAK;gDAA4B;sDAGhF,gBAAgB,GAAG,CAAC,CAAC,uBACpB,6LAAC;oDAAoB,OAAO;8DACzB;mDADU;;;;;;;;;;gCAMrB;gCACA;oCACE,KAAK;oCACL,OAAO;oCACP,QAAQ,CAAC,MAAM,sBACb,6LAAC,oIAAA,CAAA,QAAK;4CACJ,OAAO,KAAK,KAAK,IAAI;4CACrB,UAAU,CAAC,QAAU,cAAc,OAAO;oDAAE,OAAO,MAAM,MAAM,CAAC,KAAK;gDAAC;4CACtE,aAAY;;;;;;gCAGlB;gCACA;oCACE,KAAK;oCACL,OAAO;oCACP,QAAQ,CAAC,MAAM,sBACb,6LAAC;4CACC,WAAU;4CACV,OAAO,KAAK,cAAc;4CAC1B,UAAU,CAAC,QACT,cAAc,OAAO;oDACnB,gBAAgB,MAAM,MAAM,CAAC,KAAK;gDACpC;;8DAGF,6LAAC;oDAAO,OAAM;8DAAW;;;;;;8DACzB,6LAAC;oDAAO,OAAM;8DAAM;;;;;;8DACpB,6LAAC;oDAAO,OAAM;8DAAO;;;;;;;;;;;;gCAG3B;6BACD;;;;;;sCAEH,6LAAC,qIAAA,CAAA,SAAM;4BAAC,SAAQ;4BAAY,MAAK;sCAAK;;;;;;;;;;;;8BAIxC,6LAAC,oIAAA,CAAA,cAAW;oBAAC,WAAU;;sCACrB,6LAAC,qIAAA,CAAA,SAAM;4BAAC,SAAQ;4BAAQ,SAAS;4BAAS,UAAU;sCAAQ;;;;;;sCAG5D,6LAAC,qIAAA,CAAA,SAAM;4BAAC,SAAS;4BAAY,UAAU;sCAAQ;;;;;;;;;;;;;;;;;;;;;;;AAOzD;GA9KgB;;QACI,+HAAA,CAAA,WAAQ;QACZ,oIAAA,CAAA,qBAAkB;QACb,oIAAA,CAAA,qBAAkB;QAClB,oIAAA,CAAA,qBAAkB;;;KAJvB","debugId":null}},
    {"offset": {"line": 2736, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport {cn} from '@/lib/utils';\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, React.ComponentProps<'textarea'>>(\n  ({className, ...props}, ref) => {\n    return (\n      <textarea\n        className={cn(\n          'flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nTextarea.displayName = 'Textarea';\n\nexport {Textarea};\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AAEA,MAAM,yBAAW,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAC9B,CAAC,EAAC,SAAS,EAAE,GAAG,OAAM,EAAE;IACtB,qBACE,6LAAC;QACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,qTACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,SAAS,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 2771, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/onboarding/common/FileDrop.tsx"],"sourcesContent":["\"use client\";\n\nimport { ChangeEvent, useRef } from \"react\";\nimport { cn } from \"@/lib/utils\";\n\ninterface FileDropProps {\n  onFiles: (files: File[]) => void;\n}\n\nexport function FileDrop({ onFiles }: FileDropProps) {\n  const inputRef = useRef<HTMLInputElement | null>(null);\n\n  const handleFiles = (event: ChangeEvent<HTMLInputElement>) => {\n    const files = event.target.files;\n    if (!files) return;\n    onFiles(Array.from(files));\n  };\n\n  return (\n    <button\n      type=\"button\"\n      onClick={() => inputRef.current?.click()}\n      className={cn(\n        \"flex h-32 w-full flex-col items-center justify-center rounded-lg border border-dashed border-border/70 bg-background/60 text-sm text-muted-foreground transition hover:border-emerald-400 hover:bg-emerald-500/10 hover:text-emerald-200\"\n      )}\n    >\n      <input ref={inputRef} type=\"file\" className=\"hidden\" multiple onChange={handleFiles} />\n      <p>Click to browse receipts or IDs</p>\n    </button>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;;;AAHA;;;AASO,SAAS,SAAS,EAAE,OAAO,EAAiB;;IACjD,MAAM,WAAW,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAA2B;IAEjD,MAAM,cAAc,CAAC;QACnB,MAAM,QAAQ,MAAM,MAAM,CAAC,KAAK;QAChC,IAAI,CAAC,OAAO;QACZ,QAAQ,MAAM,IAAI,CAAC;IACrB;IAEA,qBACE,6LAAC;QACC,MAAK;QACL,SAAS,IAAM,SAAS,OAAO,EAAE;QACjC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV;;0BAGF,6LAAC;gBAAM,KAAK;gBAAU,MAAK;gBAAO,WAAU;gBAAS,QAAQ;gBAAC,UAAU;;;;;;0BACxE,6LAAC;0BAAE;;;;;;;;;;;;AAGT;GArBgB;KAAA","debugId":null}},
    {"offset": {"line": 2833, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/onboarding/steps/DocumentsDrawer.tsx"],"sourcesContent":["\"use client\";\n\nimport { useCallback, useEffect, useState } from \"react\";\nimport { Sheet, SheetContent, SheetDescription, SheetFooter, SheetHeader, SheetTitle } from \"@/components/ui/sheet\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { FileDrop } from \"../common/FileDrop\";\nimport { useOnboardingStore } from \"@/lib/onboarding/state\";\nimport { persistSetup, requestPreview } from \"@/lib/onboarding/client\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface DocumentsDrawerProps {\n  open: boolean;\n  onClose: () => void;\n}\n\ntype DocType = \"id\" | \"policy\" | \"contract\" | \"receipt\" | \"medical\" | \"other\";\n\ntype DocumentForm = {\n  id: string;\n  filename: string;\n  type: DocType;\n  expiresAt: string | null;\n  tags: string[];\n};\n\nconst docTypes: DocType[] = [\"id\", \"policy\", \"contract\", \"receipt\", \"medical\", \"other\"];\n\nexport function DocumentsDrawer({ open, onClose }: DocumentsDrawerProps) {\n  const { toast } = useToast();\n  const setup = useOnboardingStore((state) => state.setup);\n  const updateData = useOnboardingStore((state) => state.updateData);\n  const setPreview = useOnboardingStore((state) => state.setPreview);\n  const [docs, setDocs] = useState<DocumentForm[]>([]);\n  const [notes, setNotes] = useState(\"Suggested reminders: 24w, 8w, 2w before expiry.\");\n  const [saving, setSaving] = useState(false);\n\n  useEffect(() => {\n    if (!open) return;\n    const current = setup.data.docs ?? [];\n    setDocs(\n      current.map((doc) => ({\n        id: doc.id,\n        filename: doc.filename,\n        type: doc.type,\n        expiresAt: doc.expiresAt ?? null,\n        tags: doc.tags ?? [],\n      }))\n    );\n  }, [open, setup.data.docs]);\n\n  const handleFiles = (files: File[]) => {\n    setDocs((prev) => [\n      ...prev,\n      ...files.map((file) => ({\n        id: crypto.randomUUID?.() ?? Math.random().toString(36).slice(2),\n        filename: file.name,\n        type: \"receipt\" as DocType,\n        expiresAt: null,\n        tags: [],\n      })),\n    ]);\n  };\n\n  const updateDoc = (index: number, patch: Partial<DocumentForm>) => {\n    setDocs((prev) => {\n      const next = [...prev];\n      next[index] = { ...next[index], ...patch };\n      return next;\n    });\n  };\n\n  const handleSave = useCallback(async () => {\n    setSaving(true);\n    try {\n      updateData(\"documents\", {\n        docs: docs.map((doc) => ({\n          id: doc.id,\n          filename: doc.filename,\n          type: doc.type,\n          expiresAt: doc.expiresAt,\n          tags: doc.tags,\n        })),\n      } as any);\n      const latest = useOnboardingStore.getState().setup;\n      const response = await persistSetup(latest, false);\n      const preview = await requestPreview(response.setup);\n      setPreview({\n        readiness: preview.readiness,\n        financeForecast: preview.finance?.forecast ?? [],\n        upcomingBills: preview.finance?.bills ?? [],\n        care: preview.care ?? [],\n        rules: preview.rules ?? [],\n      });\n      toast({ title: \"Documents saved\", description: `${docs.length} files staged.` });\n      onClose();\n    } catch (error) {\n      toast({\n        title: \"Failed to save\",\n        description: error instanceof Error ? error.message : \"Unknown error\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setSaving(false);\n    }\n  }, [docs, onClose, setPreview, toast, updateData]);\n\n  useEffect(() => {\n    const listener = () => {\n      if (open) {\n        handleSave();\n      }\n    };\n    window.addEventListener(\"onboarding-save\" as any, listener);\n    return () => window.removeEventListener(\"onboarding-save\" as any, listener);\n  }, [handleSave, open]);\n\n  return (\n    <Sheet open={open} onOpenChange={(value) => !value && onClose()}>\n      <SheetContent className=\"w-full overflow-y-auto sm:max-w-2xl\">\n        <SheetHeader>\n          <SheetTitle>Documents</SheetTitle>\n          <SheetDescription>Upload receipts or IDs to preview CDR and reminders.</SheetDescription>\n        </SheetHeader>\n        <div className=\"mt-6 space-y-6\">\n          <FileDrop onFiles={handleFiles} />\n          <div className=\"space-y-4\">\n            {docs.map((doc, index) => (\n              <div key={doc.id} className=\"rounded-lg border border-border/70 p-4\">\n                <div className=\"flex items-center justify-between text-sm font-medium\">\n                  <span>{doc.filename}</span>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={() => setDocs((prev) => prev.filter((_, idx) => idx !== index))}\n                  >\n                    Remove\n                  </Button>\n                </div>\n                <div className=\"mt-4 grid gap-3 md:grid-cols-2\">\n                  <label className=\"space-y-1 text-xs uppercase text-muted-foreground\">\n                    Type\n                    <select\n                      className=\"w-full rounded border border-border/60 bg-background px-2 py-2 text-sm\"\n                      value={doc.type}\n                      onChange={(event) => updateDoc(index, { type: event.target.value as DocType })}\n                    >\n                      {docTypes.map((type) => (\n                        <option key={type} value={type}>\n                          {type}\n                        </option>\n                      ))}\n                    </select>\n                  </label>\n                  <label className=\"space-y-1 text-xs uppercase text-muted-foreground\">\n                    Expiry\n                    <Input\n                      type=\"date\"\n                      value={doc.expiresAt ?? \"\"}\n                      onChange={(event) => updateDoc(index, { expiresAt: event.target.value || null })}\n                    />\n                  </label>\n                </div>\n                <div className=\"mt-3 space-y-1 text-xs uppercase text-muted-foreground\">\n                  Tags\n                  <Input\n                    placeholder=\"Comma separated tags\"\n                    value={doc.tags.join(\", \")}\n                    onChange={(event) =>\n                      updateDoc(index, {\n                        tags: event.target.value\n                          .split(\",\")\n                          .map((tag) => tag.trim())\n                          .filter(Boolean),\n                      })\n                    }\n                  />\n                </div>\n              </div>\n            ))}\n            {!docs.length && (\n              <p className=\"text-sm text-muted-foreground\">\n                Upload files to populate automations and reminder drafts.\n              </p>\n            )}\n          </div>\n          <Textarea value={notes} onChange={(event) => setNotes(event.target.value)} rows={3} />\n        </div>\n        <SheetFooter className=\"mt-8\">\n          <Button variant=\"ghost\" onClick={onClose} disabled={saving}>\n            Discard\n          </Button>\n          <Button onClick={handleSave} disabled={saving}>\n            Save & close\n          </Button>\n        </SheetFooter>\n      </SheetContent>\n    </Sheet>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3233, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/checkbox.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,yBAAW,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAG9B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,uKAAA,CAAA,OAAsB;QACrB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,kTACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,uKAAA,CAAA,YAA2B;YAC1B,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE;sBAEd,cAAA,6LAAC,uMAAA,CAAA,QAAK;gBAAC,WAAU;;;;;;;;;;;;;;;;;AAIvB,SAAS,WAAW,GAAG,uKAAA,CAAA,OAAsB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 3285, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/onboarding/steps/HouseholdDrawer.tsx"],"sourcesContent":["\"use client\";\n\nimport { useCallback, useEffect, useState } from \"react\";\nimport { Sheet, SheetContent, SheetDescription, SheetFooter, SheetHeader, SheetTitle } from \"@/components/ui/sheet\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { InlineTable } from \"../common/InlineTable\";\nimport { useOnboardingStore } from \"@/lib/onboarding/state\";\nimport { persistSetup, requestPreview } from \"@/lib/onboarding/client\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface HouseholdDrawerProps {\n  open: boolean;\n  onClose: () => void;\n}\n\ntype AssetForm = {\n  id: string;\n  label: string;\n  category: \"appliance\" | \"electronics\" | \"vehicle\" | \"furniture\" | \"other\";\n  serial?: string;\n  warrantyEnd: string | null;\n};\n\nconst utilityOptions = [\"internet\", \"electricity\", \"water\", \"gas\"] as const;\nconst assetCategories: AssetForm[\"category\"][] = [\n  \"appliance\",\n  \"electronics\",\n  \"vehicle\",\n  \"furniture\",\n  \"other\",\n];\n\nexport function HouseholdDrawer({ open, onClose }: HouseholdDrawerProps) {\n  const { toast } = useToast();\n  const setup = useOnboardingStore((state) => state.setup);\n  const updateData = useOnboardingStore((state) => state.updateData);\n  const setPreview = useOnboardingStore((state) => state.setPreview);\n\n  const [name, setName] = useState(\"\");\n  const [address, setAddress] = useState(\"\");\n  const [utilities, setUtilities] = useState<string[]>([]);\n  const [assets, setAssets] = useState<AssetForm[]>([]);\n  const [saving, setSaving] = useState(false);\n\n  useEffect(() => {\n    if (!open) return;\n    const household = setup.data.household;\n    setName(household?.name ?? \"\");\n    setAddress(household?.address ?? \"\");\n    setUtilities(household?.utilities ?? []);\n    setAssets(\n      household?.assets?.map((asset) => ({\n        id: asset.id,\n        label: asset.label,\n        category: asset.category,\n        serial: asset.serial,\n        warrantyEnd: asset.warrantyEnd ?? null,\n      })) ?? []\n    );\n  }, [open, setup.data.household]);\n\n  const toggleUtility = (value: string) => {\n    setUtilities((prev) =>\n      prev.includes(value) ? prev.filter((item) => item !== value) : [...prev, value]\n    );\n  };\n\n  const createEmptyAsset = (): AssetForm => ({\n    id: crypto.randomUUID?.() ?? Math.random().toString(36).slice(2),\n    label: \"\",\n    category: \"appliance\",\n    serial: \"\",\n    warrantyEnd: null,\n  });\n\n  const updateAsset = (index: number, patch: Partial<AssetForm>) => {\n    setAssets((prev) => {\n      const next = [...prev];\n      next[index] = { ...next[index], ...patch };\n      return next;\n    });\n  };\n\n  const handleSave = useCallback(async () => {\n    setSaving(true);\n    try {\n      updateData(\"household\", {\n        household: {\n          name,\n          address,\n          utilities,\n          assets: assets.filter((asset) => asset.label.trim()).map((asset) => ({\n            id: asset.id,\n            label: asset.label,\n            category: asset.category,\n            serial: asset.serial,\n            warrantyEnd: asset.warrantyEnd,\n          })),\n        },\n      } as any);\n      const latest = useOnboardingStore.getState().setup;\n      const response = await persistSetup(latest, false);\n      const preview = await requestPreview(response.setup);\n      setPreview({\n        readiness: preview.readiness,\n        financeForecast: preview.finance?.forecast ?? [],\n        upcomingBills: preview.finance?.bills ?? [],\n        care: preview.care ?? [],\n        rules: preview.rules ?? [],\n      });\n      toast({ title: \"Household saved\", description: \"Household profile updated.\" });\n      onClose();\n    } catch (error) {\n      toast({\n        title: \"Failed to save\",\n        description: error instanceof Error ? error.message : \"Unknown error\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setSaving(false);\n    }\n  }, [address, assets, name, onClose, setPreview, toast, updateData, utilities]);\n\n  useEffect(() => {\n    const listener = () => {\n      if (open) {\n        handleSave();\n      }\n    };\n    window.addEventListener(\"onboarding-save\" as any, listener);\n    return () => window.removeEventListener(\"onboarding-save\" as any, listener);\n  }, [handleSave, open]);\n\n  return (\n    <Sheet open={open} onOpenChange={(value) => !value && onClose()}>\n      <SheetContent className=\"w-full overflow-y-auto sm:max-w-2xl\">\n        <SheetHeader>\n          <SheetTitle>Household</SheetTitle>\n          <SheetDescription>Define your household profile and utilities.</SheetDescription>\n        </SheetHeader>\n        <div className=\"mt-6 space-y-6\">\n          <div className=\"grid gap-4 md:grid-cols-2\">\n            <Input value={name} onChange={(event) => setName(event.target.value)} placeholder=\"Household name\" />\n            <Input value={address} onChange={(event) => setAddress(event.target.value)} placeholder=\"Address (optional)\" />\n          </div>\n          <section className=\"space-y-3\">\n            <h3 className=\"text-sm font-semibold\">Utilities</h3>\n            <div className=\"grid gap-2 md:grid-cols-2\">\n              {utilityOptions.map((utility) => (\n                <label key={utility} className=\"flex items-center gap-2 text-sm\">\n                  <Checkbox\n                    checked={utilities.includes(utility)}\n                    onCheckedChange={() => toggleUtility(utility)}\n                    id={`utility-${utility}`}\n                  />\n                  {utility}\n                </label>\n              ))}\n            </div>\n          </section>\n          <section className=\"space-y-3\">\n            <h3 className=\"text-sm font-semibold\">Assets</h3>\n            <InlineTable<AssetForm>\n              data={assets}\n              onAdd={() => setAssets((prev) => [...prev, createEmptyAsset()])}\n              onRemove={(index) => setAssets((prev) => prev.filter((_, idx) => idx !== index))}\n              columns={[\n                {\n                  key: \"label\",\n                  label: \"Label\",\n                  render: (item, index) => (\n                    <Input\n                      value={item.label}\n                      onChange={(event) => updateAsset(index, { label: event.target.value })}\n                    />\n                  ),\n                },\n                {\n                  key: \"category\",\n                  label: \"Category\",\n                  render: (item, index) => (\n                    <select\n                      className=\"w-full rounded border border-border/60 bg-background px-2 py-1 text-sm\"\n                      value={item.category}\n                      onChange={(event) =>\n                        updateAsset(index, { category: event.target.value as AssetForm[\"category\"] })\n                      }\n                    >\n                      {assetCategories.map((category) => (\n                        <option key={category} value={category}>\n                          {category}\n                        </option>\n                      ))}\n                    </select>\n                  ),\n                },\n                {\n                  key: \"serial\",\n                  label: \"Serial\",\n                  render: (item, index) => (\n                    <Input\n                      value={item.serial ?? \"\"}\n                      onChange={(event) => updateAsset(index, { serial: event.target.value })}\n                    />\n                  ),\n                },\n                {\n                  key: \"warrantyEnd\",\n                  label: \"Warranty end\",\n                  render: (item, index) => (\n                    <Input\n                      type=\"date\"\n                      value={item.warrantyEnd ?? \"\"}\n                      onChange={(event) => updateAsset(index, { warrantyEnd: event.target.value || null })}\n                    />\n                  ),\n                },\n              ]}\n            />\n          </section>\n        </div>\n        <SheetFooter className=\"mt-8\">\n          <Button variant=\"ghost\" onClick={onClose} disabled={saving}>\n            Discard\n          </Button>\n          <Button onClick={handleSave} disabled={saving}>\n            Save & close\n          </Button>\n        </SheetFooter>\n      </SheetContent>\n    </Sheet>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3725, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/onboarding/steps/FinanceDrawer.tsx"],"sourcesContent":["\"use client\";\n\nimport { useCallback, useEffect, useState } from \"react\";\nimport { Sheet, SheetContent, SheetDescription, SheetFooter, SheetHeader, SheetTitle } from \"@/components/ui/sheet\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { InlineTable } from \"../common/InlineTable\";\nimport { useOnboardingStore } from \"@/lib/onboarding/state\";\nimport { persistSetup, requestPreview } from \"@/lib/onboarding/client\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface FinanceDrawerProps {\n  open: boolean;\n  onClose: () => void;\n}\n\ntype IncomeForm = {\n  name: string;\n  amount: number;\n  frequency: \"weekly\" | \"biweekly\" | \"monthly\";\n  nextDate: string;\n};\n\ntype BillForm = {\n  name: string;\n  amount: number;\n  dueDay: number;\n  autopay: boolean;\n  tag?: string;\n};\n\ntype BudgetRow = {\n  category: string;\n  percent: number;\n};\n\nconst frequencyOptions: IncomeForm[\"frequency\"][] = [\"weekly\", \"biweekly\", \"monthly\"];\n\nexport function FinanceDrawer({ open, onClose }: FinanceDrawerProps) {\n  const { toast } = useToast();\n  const setup = useOnboardingStore((state) => state.setup);\n  const updateData = useOnboardingStore((state) => state.updateData);\n  const setPreview = useOnboardingStore((state) => state.setPreview);\n\n  const [currency, setCurrency] = useState(\"CAD\");\n  const [income, setIncome] = useState<IncomeForm[]>([]);\n  const [bills, setBills] = useState<BillForm[]>([]);\n  const [budget, setBudget] = useState<BudgetRow[]>([]);\n  const [saving, setSaving] = useState(false);\n  const [localPreview, setLocalPreview] = useState<{ forecast: number[]; bills: BillForm[] }>({\n    forecast: [],\n    bills: [],\n  });\n\n  useEffect(() => {\n    if (!open) return;\n    const finance = setup.data.finance;\n    setCurrency(finance?.currency ?? \"CAD\");\n    setIncome(finance?.income ?? []);\n    setBills(finance?.bills ?? []);\n    setBudget(finance?.budgetTemplate ?? []);\n  }, [open, setup.data.finance]);\n\n  const createIncome = (): IncomeForm => ({\n    name: \"\",\n    amount: 0,\n    frequency: \"monthly\",\n    nextDate: new Date().toISOString().slice(0, 10),\n  });\n\n  const createBill = (): BillForm => ({\n    name: \"\",\n    amount: 0,\n    dueDay: 1,\n    autopay: false,\n    tag: \"\",\n  });\n\n  const createBudget = (): BudgetRow => ({\n    category: \"\",\n    percent: 10,\n  });\n\n  const updateIncome = (index: number, patch: Partial<IncomeForm>) => {\n    setIncome((prev) => {\n      const next = [...prev];\n      next[index] = { ...next[index], ...patch };\n      return next;\n    });\n  };\n\n  const updateBill = (index: number, patch: Partial<BillForm>) => {\n    setBills((prev) => {\n      const next = [...prev];\n      next[index] = { ...next[index], ...patch };\n      return next;\n    });\n  };\n\n  const updateBudget = (index: number, patch: Partial<BudgetRow>) => {\n    setBudget((prev) => {\n      const next = [...prev];\n      next[index] = { ...next[index], ...patch };\n      return next;\n    });\n  };\n\n  const handleSave = useCallback(async () => {\n    setSaving(true);\n    try {\n      const financePayload = {\n        currency,\n        income: income.filter((item) => item.name.trim().length),\n        bills: bills.filter((item) => item.name.trim().length),\n        budgetTemplate: budget.filter((row) => row.category.trim().length),\n      };\n      updateData(\"finance\", { finance: financePayload } as any);\n      const latest = useOnboardingStore.getState().setup;\n      const response = await persistSetup(latest, false);\n      const preview = await requestPreview(response.setup);\n      setPreview({\n        readiness: preview.readiness,\n        financeForecast: preview.finance?.forecast ?? [],\n        upcomingBills: preview.finance?.bills ?? [],\n        care: preview.care ?? [],\n        rules: preview.rules ?? [],\n      });\n      setLocalPreview({\n        forecast: preview.finance?.forecast ?? [],\n        bills: (preview.finance?.bills ?? []).map((bill) => ({\n          name: bill.name,\n          amount: bill.amount,\n          dueDay: parseInt(bill.due.replace(/\\D+/g, \"\")) || 1,\n          autopay: false,\n          tag: bill.name,\n        })),\n      });\n      toast({ title: \"Finance saved\", description: \"Income and bills captured.\" });\n      onClose();\n    } catch (error) {\n      toast({\n        title: \"Failed to save\",\n        description: error instanceof Error ? error.message : \"Unknown error\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setSaving(false);\n    }\n  }, [bills, budget, currency, income, onClose, setPreview, toast, updateData]);\n\n  useEffect(() => {\n    const listener = () => {\n      if (open) {\n        handleSave();\n      }\n    };\n    window.addEventListener(\"onboarding-save\" as any, listener);\n    return () => window.removeEventListener(\"onboarding-save\" as any, listener);\n  }, [handleSave, open]);\n\n  const budgetSum = budget.reduce((acc, row) => acc + Number(row.percent || 0), 0);\n\n  return (\n    <Sheet open={open} onOpenChange={(value) => !value && onClose()}>\n      <SheetContent className=\"w-full overflow-y-auto sm:max-w-2xl\">\n        <SheetHeader>\n          <SheetTitle>Finance & Bills</SheetTitle>\n          <SheetDescription>Enter income streams, recurring bills and budgets.</SheetDescription>\n        </SheetHeader>\n        <div className=\"mt-6 space-y-6\">\n          <section className=\"space-y-3\">\n            <h3 className=\"text-sm font-semibold\">Currency</h3>\n            <Input value={currency} onChange={(event) => setCurrency(event.target.value)} className=\"w-32\" />\n          </section>\n          <section className=\"space-y-3\">\n            <h3 className=\"text-sm font-semibold\">Income</h3>\n            <InlineTable<IncomeForm>\n              data={income}\n              onAdd={() => setIncome((prev) => [...prev, createIncome()])}\n              onRemove={(index) => setIncome((prev) => prev.filter((_, idx) => idx !== index))}\n              columns={[\n                {\n                  key: \"name\",\n                  label: \"Name\",\n                  render: (item, index) => (\n                    <Input\n                      value={item.name}\n                      onChange={(event) => updateIncome(index, { name: event.target.value })}\n                    />\n                  ),\n                },\n                {\n                  key: \"amount\",\n                  label: \"Amount\",\n                  render: (item, index) => (\n                    <Input\n                      type=\"number\"\n                      value={item.amount}\n                      onChange={(event) => updateIncome(index, { amount: Number(event.target.value) })}\n                    />\n                  ),\n                },\n                {\n                  key: \"frequency\",\n                  label: \"Frequency\",\n                  render: (item, index) => (\n                    <select\n                      className=\"w-full rounded border border-border/60 bg-background px-2 py-1 text-sm\"\n                      value={item.frequency}\n                      onChange={(event) =>\n                        updateIncome(index, { frequency: event.target.value as IncomeForm[\"frequency\"] })\n                      }\n                    >\n                      {frequencyOptions.map((option) => (\n                        <option key={option} value={option}>\n                          {option}\n                        </option>\n                      ))}\n                    </select>\n                  ),\n                },\n                {\n                  key: \"nextDate\",\n                  label: \"Next date\",\n                  render: (item, index) => (\n                    <Input\n                      type=\"date\"\n                      value={item.nextDate}\n                      onChange={(event) => updateIncome(index, { nextDate: event.target.value })}\n                    />\n                  ),\n                },\n              ]}\n            />\n          </section>\n          <section className=\"space-y-3\">\n            <h3 className=\"text-sm font-semibold\">Bills</h3>\n            <InlineTable<BillForm>\n              data={bills}\n              onAdd={() => setBills((prev) => [...prev, createBill()])}\n              onRemove={(index) => setBills((prev) => prev.filter((_, idx) => idx !== index))}\n              columns={[\n                {\n                  key: \"name\",\n                  label: \"Name\",\n                  render: (item, index) => (\n                    <Input\n                      value={item.name}\n                      onChange={(event) => updateBill(index, { name: event.target.value })}\n                    />\n                  ),\n                },\n                {\n                  key: \"amount\",\n                  label: \"Amount\",\n                  render: (item, index) => (\n                    <Input\n                      type=\"number\"\n                      value={item.amount}\n                      onChange={(event) => updateBill(index, { amount: Number(event.target.value) })}\n                    />\n                  ),\n                },\n                {\n                  key: \"dueDay\",\n                  label: \"Due day\",\n                  render: (item, index) => (\n                    <Input\n                      type=\"number\"\n                      value={item.dueDay}\n                      onChange={(event) => updateBill(index, { dueDay: Number(event.target.value) })}\n                    />\n                  ),\n                },\n                {\n                  key: \"autopay\",\n                  label: \"Autopay\",\n                  render: (item, index) => (\n                    <select\n                      className=\"w-full rounded border border-border/60 bg-background px-2 py-1 text-sm\"\n                      value={item.autopay ? \"true\" : \"false\"}\n                      onChange={(event) => updateBill(index, { autopay: event.target.value === \"true\" })}\n                    >\n                      <option value=\"true\">Enabled</option>\n                      <option value=\"false\">Disabled</option>\n                    </select>\n                  ),\n                },\n                {\n                  key: \"tag\",\n                  label: \"Tag\",\n                  render: (item, index) => (\n                    <Input\n                      value={item.tag ?? \"\"}\n                      onChange={(event) => updateBill(index, { tag: event.target.value })}\n                    />\n                  ),\n                },\n              ]}\n            />\n          </section>\n          <section className=\"space-y-3\">\n            <h3 className=\"text-sm font-semibold\">Budget template</h3>\n            <InlineTable<BudgetRow>\n              data={budget}\n              onAdd={() => setBudget((prev) => [...prev, createBudget()])}\n              onRemove={(index) => setBudget((prev) => prev.filter((_, idx) => idx !== index))}\n              columns={[\n                {\n                  key: \"category\",\n                  label: \"Category\",\n                  render: (item, index) => (\n                    <Input\n                      value={item.category}\n                      onChange={(event) => updateBudget(index, { category: event.target.value })}\n                    />\n                  ),\n                },\n                {\n                  key: \"percent\",\n                  label: \"%\",\n                  render: (item, index) => (\n                    <Input\n                      type=\"number\"\n                      value={item.percent}\n                      onChange={(event) => updateBudget(index, { percent: Number(event.target.value) })}\n                    />\n                  ),\n                },\n              ]}\n            >\n              <div className=\"text-xs text-muted-foreground\">Total {budgetSum}%</div>\n            </InlineTable>\n            {budgetSum > 100 && (\n              <p className=\"text-sm text-destructive\">Budget allocation exceeds 100%.</p>\n            )}\n          </section>\n          {localPreview.forecast.length > 0 && (\n            <section className=\"rounded-lg border border-border/70 p-4 text-sm\">\n              <h3 className=\"font-semibold\">Preview</h3>\n              <p className=\"mt-2 text-muted-foreground\">\n                First 3 months cashflow: {localPreview.forecast.map((value) => value.toFixed(0)).join(\", \")}\n              </p>\n            </section>\n          )}\n        </div>\n        <SheetFooter className=\"mt-8\">\n          <Button variant=\"ghost\" onClick={onClose} disabled={saving}>\n            Discard\n          </Button>\n          <Button onClick={handleSave} disabled={saving || budgetSum > 100}>\n            Save & close\n          </Button>\n        </SheetFooter>\n      </SheetContent>\n    </Sheet>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AATA;;;;;;;;;AAoCA,MAAM,mBAA8C;IAAC;IAAU;IAAY;CAAU;AAE9E,SAAS,cAAc,EAAE,IAAI,EAAE,OAAO,EAAsB;;IACjE,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,+HAAA,CAAA,WAAQ,AAAD;IACzB,MAAM,QAAQ,CAAA,GAAA,oIAAA,CAAA,qBAAkB,AAAD;mDAAE,CAAC,QAAU,MAAM,KAAK;;IACvD,MAAM,aAAa,CAAA,GAAA,oIAAA,CAAA,qBAAkB,AAAD;wDAAE,CAAC,QAAU,MAAM,UAAU;;IACjE,MAAM,aAAa,CAAA,GAAA,oIAAA,CAAA,qBAAkB,AAAD;wDAAE,CAAC,QAAU,MAAM,UAAU;;IAEjE,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAgB,EAAE;IACrD,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAc,EAAE;IACjD,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAe,EAAE;IACpD,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACrC,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAA6C;QAC1F,UAAU,EAAE;QACZ,OAAO,EAAE;IACX;IAEA,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;mCAAE;YACR,IAAI,CAAC,MAAM;YACX,MAAM,UAAU,MAAM,IAAI,CAAC,OAAO;YAClC,YAAY,SAAS,YAAY;YACjC,UAAU,SAAS,UAAU,EAAE;YAC/B,SAAS,SAAS,SAAS,EAAE;YAC7B,UAAU,SAAS,kBAAkB,EAAE;QACzC;kCAAG;QAAC;QAAM,MAAM,IAAI,CAAC,OAAO;KAAC;IAE7B,MAAM,eAAe,IAAkB,CAAC;YACtC,MAAM;YACN,QAAQ;YACR,WAAW;YACX,UAAU,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,GAAG;QAC9C,CAAC;IAED,MAAM,aAAa,IAAgB,CAAC;YAClC,MAAM;YACN,QAAQ;YACR,QAAQ;YACR,SAAS;YACT,KAAK;QACP,CAAC;IAED,MAAM,eAAe,IAAiB,CAAC;YACrC,UAAU;YACV,SAAS;QACX,CAAC;IAED,MAAM,eAAe,CAAC,OAAe;QACnC,UAAU,CAAC;YACT,MAAM,OAAO;mBAAI;aAAK;YACtB,IAAI,CAAC,MAAM,GAAG;gBAAE,GAAG,IAAI,CAAC,MAAM;gBAAE,GAAG,KAAK;YAAC;YACzC,OAAO;QACT;IACF;IAEA,MAAM,aAAa,CAAC,OAAe;QACjC,SAAS,CAAC;YACR,MAAM,OAAO;mBAAI;aAAK;YACtB,IAAI,CAAC,MAAM,GAAG;gBAAE,GAAG,IAAI,CAAC,MAAM;gBAAE,GAAG,KAAK;YAAC;YACzC,OAAO;QACT;IACF;IAEA,MAAM,eAAe,CAAC,OAAe;QACnC,UAAU,CAAC;YACT,MAAM,OAAO;mBAAI;aAAK;YACtB,IAAI,CAAC,MAAM,GAAG;gBAAE,GAAG,IAAI,CAAC,MAAM;gBAAE,GAAG,KAAK;YAAC;YACzC,OAAO;QACT;IACF;IAEA,MAAM,aAAa,CAAA,GAAA,6JAAA,CAAA,cAAW,AAAD;iDAAE;YAC7B,UAAU;YACV,IAAI;gBACF,MAAM,iBAAiB;oBACrB;oBACA,QAAQ,OAAO,MAAM;iEAAC,CAAC,OAAS,KAAK,IAAI,CAAC,IAAI,GAAG,MAAM;;oBACvD,OAAO,MAAM,MAAM;iEAAC,CAAC,OAAS,KAAK,IAAI,CAAC,IAAI,GAAG,MAAM;;oBACrD,gBAAgB,OAAO,MAAM;iEAAC,CAAC,MAAQ,IAAI,QAAQ,CAAC,IAAI,GAAG,MAAM;;gBACnE;gBACA,WAAW,WAAW;oBAAE,SAAS;gBAAe;gBAChD,MAAM,SAAS,oIAAA,CAAA,qBAAkB,CAAC,QAAQ,GAAG,KAAK;gBAClD,MAAM,WAAW,MAAM,CAAA,GAAA,qIAAA,CAAA,eAAY,AAAD,EAAE,QAAQ;gBAC5C,MAAM,UAAU,MAAM,CAAA,GAAA,qIAAA,CAAA,iBAAc,AAAD,EAAE,SAAS,KAAK;gBACnD,WAAW;oBACT,WAAW,QAAQ,SAAS;oBAC5B,iBAAiB,QAAQ,OAAO,EAAE,YAAY,EAAE;oBAChD,eAAe,QAAQ,OAAO,EAAE,SAAS,EAAE;oBAC3C,MAAM,QAAQ,IAAI,IAAI,EAAE;oBACxB,OAAO,QAAQ,KAAK,IAAI,EAAE;gBAC5B;gBACA,gBAAgB;oBACd,UAAU,QAAQ,OAAO,EAAE,YAAY,EAAE;oBACzC,OAAO,CAAC,QAAQ,OAAO,EAAE,SAAS,EAAE,EAAE,GAAG;iEAAC,CAAC,OAAS,CAAC;gCACnD,MAAM,KAAK,IAAI;gCACf,QAAQ,KAAK,MAAM;gCACnB,QAAQ,SAAS,KAAK,GAAG,CAAC,OAAO,CAAC,QAAQ,QAAQ;gCAClD,SAAS;gCACT,KAAK,KAAK,IAAI;4BAChB,CAAC;;gBACH;gBACA,MAAM;oBAAE,OAAO;oBAAiB,aAAa;gBAA6B;gBAC1E;YACF,EAAE,OAAO,OAAO;gBACd,MAAM;oBACJ,OAAO;oBACP,aAAa,iBAAiB,QAAQ,MAAM,OAAO,GAAG;oBACtD,SAAS;gBACX;YACF,SAAU;gBACR,UAAU;YACZ;QACF;gDAAG;QAAC;QAAO;QAAQ;QAAU;QAAQ;QAAS;QAAY;QAAO;KAAW;IAE5E,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;mCAAE;YACR,MAAM;oDAAW;oBACf,IAAI,MAAM;wBACR;oBACF;gBACF;;YACA,OAAO,gBAAgB,CAAC,mBAA0B;YAClD;2CAAO,IAAM,OAAO,mBAAmB,CAAC,mBAA0B;;QACpE;kCAAG;QAAC;QAAY;KAAK;IAErB,MAAM,YAAY,OAAO,MAAM,CAAC,CAAC,KAAK,MAAQ,MAAM,OAAO,IAAI,OAAO,IAAI,IAAI;IAE9E,qBACE,6LAAC,oIAAA,CAAA,QAAK;QAAC,MAAM;QAAM,cAAc,CAAC,QAAU,CAAC,SAAS;kBACpD,cAAA,6LAAC,oIAAA,CAAA,eAAY;YAAC,WAAU;;8BACtB,6LAAC,oIAAA,CAAA,cAAW;;sCACV,6LAAC,oIAAA,CAAA,aAAU;sCAAC;;;;;;sCACZ,6LAAC,oIAAA,CAAA,mBAAgB;sCAAC;;;;;;;;;;;;8BAEpB,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAQ,WAAU;;8CACjB,6LAAC;oCAAG,WAAU;8CAAwB;;;;;;8CACtC,6LAAC,oIAAA,CAAA,QAAK;oCAAC,OAAO;oCAAU,UAAU,CAAC,QAAU,YAAY,MAAM,MAAM,CAAC,KAAK;oCAAG,WAAU;;;;;;;;;;;;sCAE1F,6LAAC;4BAAQ,WAAU;;8CACjB,6LAAC;oCAAG,WAAU;8CAAwB;;;;;;8CACtC,6LAAC,4JAAA,CAAA,cAAW;oCACV,MAAM;oCACN,OAAO,IAAM,UAAU,CAAC,OAAS;mDAAI;gDAAM;6CAAe;oCAC1D,UAAU,CAAC,QAAU,UAAU,CAAC,OAAS,KAAK,MAAM,CAAC,CAAC,GAAG,MAAQ,QAAQ;oCACzE,SAAS;wCACP;4CACE,KAAK;4CACL,OAAO;4CACP,QAAQ,CAAC,MAAM,sBACb,6LAAC,oIAAA,CAAA,QAAK;oDACJ,OAAO,KAAK,IAAI;oDAChB,UAAU,CAAC,QAAU,aAAa,OAAO;4DAAE,MAAM,MAAM,MAAM,CAAC,KAAK;wDAAC;;;;;;wCAG1E;wCACA;4CACE,KAAK;4CACL,OAAO;4CACP,QAAQ,CAAC,MAAM,sBACb,6LAAC,oIAAA,CAAA,QAAK;oDACJ,MAAK;oDACL,OAAO,KAAK,MAAM;oDAClB,UAAU,CAAC,QAAU,aAAa,OAAO;4DAAE,QAAQ,OAAO,MAAM,MAAM,CAAC,KAAK;wDAAE;;;;;;wCAGpF;wCACA;4CACE,KAAK;4CACL,OAAO;4CACP,QAAQ,CAAC,MAAM,sBACb,6LAAC;oDACC,WAAU;oDACV,OAAO,KAAK,SAAS;oDACrB,UAAU,CAAC,QACT,aAAa,OAAO;4DAAE,WAAW,MAAM,MAAM,CAAC,KAAK;wDAA4B;8DAGhF,iBAAiB,GAAG,CAAC,CAAC,uBACrB,6LAAC;4DAAoB,OAAO;sEACzB;2DADU;;;;;;;;;;wCAMrB;wCACA;4CACE,KAAK;4CACL,OAAO;4CACP,QAAQ,CAAC,MAAM,sBACb,6LAAC,oIAAA,CAAA,QAAK;oDACJ,MAAK;oDACL,OAAO,KAAK,QAAQ;oDACpB,UAAU,CAAC,QAAU,aAAa,OAAO;4DAAE,UAAU,MAAM,MAAM,CAAC,KAAK;wDAAC;;;;;;wCAG9E;qCACD;;;;;;;;;;;;sCAGL,6LAAC;4BAAQ,WAAU;;8CACjB,6LAAC;oCAAG,WAAU;8CAAwB;;;;;;8CACtC,6LAAC,4JAAA,CAAA,cAAW;oCACV,MAAM;oCACN,OAAO,IAAM,SAAS,CAAC,OAAS;mDAAI;gDAAM;6CAAa;oCACvD,UAAU,CAAC,QAAU,SAAS,CAAC,OAAS,KAAK,MAAM,CAAC,CAAC,GAAG,MAAQ,QAAQ;oCACxE,SAAS;wCACP;4CACE,KAAK;4CACL,OAAO;4CACP,QAAQ,CAAC,MAAM,sBACb,6LAAC,oIAAA,CAAA,QAAK;oDACJ,OAAO,KAAK,IAAI;oDAChB,UAAU,CAAC,QAAU,WAAW,OAAO;4DAAE,MAAM,MAAM,MAAM,CAAC,KAAK;wDAAC;;;;;;wCAGxE;wCACA;4CACE,KAAK;4CACL,OAAO;4CACP,QAAQ,CAAC,MAAM,sBACb,6LAAC,oIAAA,CAAA,QAAK;oDACJ,MAAK;oDACL,OAAO,KAAK,MAAM;oDAClB,UAAU,CAAC,QAAU,WAAW,OAAO;4DAAE,QAAQ,OAAO,MAAM,MAAM,CAAC,KAAK;wDAAE;;;;;;wCAGlF;wCACA;4CACE,KAAK;4CACL,OAAO;4CACP,QAAQ,CAAC,MAAM,sBACb,6LAAC,oIAAA,CAAA,QAAK;oDACJ,MAAK;oDACL,OAAO,KAAK,MAAM;oDAClB,UAAU,CAAC,QAAU,WAAW,OAAO;4DAAE,QAAQ,OAAO,MAAM,MAAM,CAAC,KAAK;wDAAE;;;;;;wCAGlF;wCACA;4CACE,KAAK;4CACL,OAAO;4CACP,QAAQ,CAAC,MAAM,sBACb,6LAAC;oDACC,WAAU;oDACV,OAAO,KAAK,OAAO,GAAG,SAAS;oDAC/B,UAAU,CAAC,QAAU,WAAW,OAAO;4DAAE,SAAS,MAAM,MAAM,CAAC,KAAK,KAAK;wDAAO;;sEAEhF,6LAAC;4DAAO,OAAM;sEAAO;;;;;;sEACrB,6LAAC;4DAAO,OAAM;sEAAQ;;;;;;;;;;;;wCAG5B;wCACA;4CACE,KAAK;4CACL,OAAO;4CACP,QAAQ,CAAC,MAAM,sBACb,6LAAC,oIAAA,CAAA,QAAK;oDACJ,OAAO,KAAK,GAAG,IAAI;oDACnB,UAAU,CAAC,QAAU,WAAW,OAAO;4DAAE,KAAK,MAAM,MAAM,CAAC,KAAK;wDAAC;;;;;;wCAGvE;qCACD;;;;;;;;;;;;sCAGL,6LAAC;4BAAQ,WAAU;;8CACjB,6LAAC;oCAAG,WAAU;8CAAwB;;;;;;8CACtC,6LAAC,4JAAA,CAAA,cAAW;oCACV,MAAM;oCACN,OAAO,IAAM,UAAU,CAAC,OAAS;mDAAI;gDAAM;6CAAe;oCAC1D,UAAU,CAAC,QAAU,UAAU,CAAC,OAAS,KAAK,MAAM,CAAC,CAAC,GAAG,MAAQ,QAAQ;oCACzE,SAAS;wCACP;4CACE,KAAK;4CACL,OAAO;4CACP,QAAQ,CAAC,MAAM,sBACb,6LAAC,oIAAA,CAAA,QAAK;oDACJ,OAAO,KAAK,QAAQ;oDACpB,UAAU,CAAC,QAAU,aAAa,OAAO;4DAAE,UAAU,MAAM,MAAM,CAAC,KAAK;wDAAC;;;;;;wCAG9E;wCACA;4CACE,KAAK;4CACL,OAAO;4CACP,QAAQ,CAAC,MAAM,sBACb,6LAAC,oIAAA,CAAA,QAAK;oDACJ,MAAK;oDACL,OAAO,KAAK,OAAO;oDACnB,UAAU,CAAC,QAAU,aAAa,OAAO;4DAAE,SAAS,OAAO,MAAM,MAAM,CAAC,KAAK;wDAAE;;;;;;wCAGrF;qCACD;8CAED,cAAA,6LAAC;wCAAI,WAAU;;4CAAgC;4CAAO;4CAAU;;;;;;;;;;;;gCAEjE,YAAY,qBACX,6LAAC;oCAAE,WAAU;8CAA2B;;;;;;;;;;;;wBAG3C,aAAa,QAAQ,CAAC,MAAM,GAAG,mBAC9B,6LAAC;4BAAQ,WAAU;;8CACjB,6LAAC;oCAAG,WAAU;8CAAgB;;;;;;8CAC9B,6LAAC;oCAAE,WAAU;;wCAA6B;wCACd,aAAa,QAAQ,CAAC,GAAG,CAAC,CAAC,QAAU,MAAM,OAAO,CAAC,IAAI,IAAI,CAAC;;;;;;;;;;;;;;;;;;;8BAK9F,6LAAC,oIAAA,CAAA,cAAW;oBAAC,WAAU;;sCACrB,6LAAC,qIAAA,CAAA,SAAM;4BAAC,SAAQ;4BAAQ,SAAS;4BAAS,UAAU;sCAAQ;;;;;;sCAG5D,6LAAC,qIAAA,CAAA,SAAM;4BAAC,SAAS;4BAAY,UAAU,UAAU,YAAY;sCAAK;;;;;;;;;;;;;;;;;;;;;;;AAO5E;GA/TgB;;QACI,+HAAA,CAAA,WAAQ;QACZ,oIAAA,CAAA,qBAAkB;QACb,oIAAA,CAAA,qBAAkB;QAClB,oIAAA,CAAA,qBAAkB;;;KAJvB","debugId":null}},
    {"offset": {"line": 4376, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/onboarding/steps/HealthDrawer.tsx"],"sourcesContent":["\"use client\";\n\nimport { useCallback, useEffect, useState } from \"react\";\nimport { Sheet, SheetContent, SheetDescription, SheetFooter, SheetHeader, SheetTitle } from \"@/components/ui/sheet\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { useOnboardingStore } from \"@/lib/onboarding/state\";\nimport { persistSetup, requestPreview } from \"@/lib/onboarding/client\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface HealthDrawerProps {\n  open: boolean;\n  onClose: () => void;\n}\n\ntype MedForm = {\n  name: string;\n  strengthMg?: number;\n  schedule: { type: \"fixed\" | \"interval\"; times?: string[]; hours?: number };\n  unitsPerDose: number;\n  pillsOnHand?: number;\n  lowStockDays: number;\n};\n\ntype CareForm = {\n  name: string;\n  relation: string;\n  meds: MedForm[];\n};\n\nexport function HealthDrawer({ open, onClose }: HealthDrawerProps) {\n  const { toast } = useToast();\n  const setup = useOnboardingStore((state) => state.setup);\n  const updateData = useOnboardingStore((state) => state.updateData);\n  const setPreview = useOnboardingStore((state) => state.setPreview);\n\n  const [profiles, setProfiles] = useState<CareForm[]>([]);\n  const [saving, setSaving] = useState(false);\n\n  useEffect(() => {\n    if (!open) return;\n    const current = setup.data.care ?? [];\n    setProfiles(\n      current.map((profile) => ({\n        name: profile.name,\n        relation: profile.relation,\n        meds: profile.meds.map((med) => ({\n          name: med.name,\n          strengthMg: med.strengthMg,\n          schedule: med.schedule,\n          unitsPerDose: med.unitsPerDose,\n          pillsOnHand: med.pillsOnHand,\n          lowStockDays: med.lowStockDays,\n        })),\n      }))\n    );\n  }, [open, setup.data.care]);\n\n  const createProfile = (): CareForm => ({ name: \"\", relation: \"\", meds: [] });\n  const createMed = (): MedForm => ({\n    name: \"\",\n    schedule: { type: \"fixed\", times: [\"08:00\", \"20:00\"] },\n    unitsPerDose: 1,\n    lowStockDays: 7,\n  });\n\n  const updateProfile = (index: number, patch: Partial<CareForm>) => {\n    setProfiles((prev) => {\n      const next = [...prev];\n      next[index] = { ...next[index], ...patch };\n      return next;\n    });\n  };\n\n  const updateMed = (profileIndex: number, medIndex: number, patch: Partial<MedForm>) => {\n    setProfiles((prev) => {\n      const next = [...prev];\n      const meds = [...next[profileIndex].meds];\n      meds[medIndex] = { ...meds[medIndex], ...patch };\n      next[profileIndex] = { ...next[profileIndex], meds };\n      return next;\n    });\n  };\n\n  const handleSave = useCallback(async () => {\n    setSaving(true);\n    try {\n      updateData(\"health\", {\n        care: profiles\n          .filter((profile) => profile.name.trim())\n          .map((profile) => ({\n            name: profile.name,\n            relation: profile.relation,\n            meds: profile.meds\n              .filter((med) => med.name.trim())\n              .map((med) => ({\n                name: med.name,\n                strengthMg: med.strengthMg,\n                schedule: med.schedule,\n                unitsPerDose: med.unitsPerDose,\n                pillsOnHand: med.pillsOnHand,\n                lowStockDays: med.lowStockDays,\n              })),\n          })),\n      } as any);\n      const latest = useOnboardingStore.getState().setup;\n      const response = await persistSetup(latest, false);\n      const preview = await requestPreview(response.setup);\n      setPreview({\n        readiness: preview.readiness,\n        financeForecast: preview.finance?.forecast ?? [],\n        upcomingBills: preview.finance?.bills ?? [],\n        care: preview.care ?? [],\n        rules: preview.rules ?? [],\n      });\n      toast({ title: \"Care saved\", description: \"Medication plan updated.\" });\n      onClose();\n    } catch (error) {\n      toast({\n        title: \"Failed to save\",\n        description: error instanceof Error ? error.message : \"Unknown error\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setSaving(false);\n    }\n  }, [onClose, profiles, setPreview, toast, updateData]);\n\n  useEffect(() => {\n    const listener = () => {\n      if (open) {\n        handleSave();\n      }\n    };\n    window.addEventListener(\"onboarding-save\" as any, listener);\n    return () => window.removeEventListener(\"onboarding-save\" as any, listener);\n  }, [handleSave, open]);\n\n  return (\n    <Sheet open={open} onOpenChange={(value) => !value && onClose()}>\n      <SheetContent className=\"w-full overflow-y-auto sm:max-w-2xl\">\n        <SheetHeader>\n          <SheetTitle>Health & Meds</SheetTitle>\n          <SheetDescription>Capture medication schedules for your household.</SheetDescription>\n        </SheetHeader>\n        <div className=\"mt-6 space-y-6\">\n          {profiles.map((profile, index) => (\n            <div key={`profile-${index}`} className=\"rounded-lg border border-border/70 p-4\">\n              <div className=\"flex items-center justify-between gap-3\">\n                <div className=\"grid flex-1 gap-2 md:grid-cols-2\">\n                  <Input\n                    value={profile.name}\n                    placeholder=\"Name\"\n                    onChange={(event) => updateProfile(index, { name: event.target.value })}\n                  />\n                  <Input\n                    value={profile.relation}\n                    placeholder=\"Relation\"\n                    onChange={(event) => updateProfile(index, { relation: event.target.value })}\n                  />\n                </div>\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={() => setProfiles((prev) => prev.filter((_, idx) => idx !== index))}\n                >\n                  Remove\n                </Button>\n              </div>\n              <div className=\"mt-4 space-y-3\">\n                {profile.meds.map((med, medIndex) => (\n                  <div key={`med-${medIndex}`} className=\"rounded border border-border/60 p-3\">\n                    <div className=\"grid gap-2 md:grid-cols-2\">\n                      <Input\n                        value={med.name}\n                        placeholder=\"Medication\"\n                        onChange={(event) => updateMed(index, medIndex, { name: event.target.value })}\n                      />\n                      <Input\n                        type=\"number\"\n                        value={med.unitsPerDose}\n                        onChange={(event) =>\n                          updateMed(index, medIndex, { unitsPerDose: Number(event.target.value) })\n                        }\n                        placeholder=\"Units per dose\"\n                      />\n                    </div>\n                    <div className=\"mt-3 grid gap-2 md:grid-cols-2\">\n                      <select\n                        className=\"w-full rounded border border-border/60 bg-background px-2 py-1 text-sm\"\n                        value={med.schedule.type}\n                        onChange={(event) =>\n                          updateMed(index, medIndex, {\n                            schedule:\n                              event.target.value === \"fixed\"\n                                ? { type: \"fixed\", times: med.schedule.times ?? [\"08:00\"] }\n                                : { type: \"interval\", hours: med.schedule.hours ?? 8 },\n                          })\n                        }\n                      >\n                        <option value=\"fixed\">Fixed times</option>\n                        <option value=\"interval\">Interval</option>\n                      </select>\n                      {med.schedule.type === \"fixed\" ? (\n                        <Input\n                          value={(med.schedule.times ?? []).join(\", \")}\n                          onChange={(event) =>\n                            updateMed(index, medIndex, {\n                              schedule: {\n                                type: \"fixed\",\n                                times: event.target.value\n                                  .split(\",\")\n                                  .map((time) => time.trim())\n                                  .filter(Boolean),\n                              },\n                            })\n                          }\n                          placeholder=\"Times e.g. 08:00, 20:00\"\n                        />\n                      ) : (\n                        <Input\n                          type=\"number\"\n                          value={med.schedule.hours ?? 8}\n                          onChange={(event) =>\n                            updateMed(index, medIndex, {\n                              schedule: { type: \"interval\", hours: Number(event.target.value) },\n                            })\n                          }\n                          placeholder=\"Interval hours\"\n                        />\n                      )}\n                    </div>\n                    <div className=\"mt-3 grid gap-2 md:grid-cols-2\">\n                      <Input\n                        type=\"number\"\n                        value={med.pillsOnHand ?? 0}\n                        onChange={(event) =>\n                          updateMed(index, medIndex, { pillsOnHand: Number(event.target.value) })\n                        }\n                        placeholder=\"Pills on hand\"\n                      />\n                      <Input\n                        type=\"number\"\n                        value={med.lowStockDays}\n                        onChange={(event) =>\n                          updateMed(index, medIndex, { lowStockDays: Number(event.target.value) })\n                        }\n                        placeholder=\"Low stock days\"\n                      />\n                    </div>\n                  </div>\n                ))}\n                <Button\n                  size=\"sm\"\n                  variant=\"secondary\"\n                  onClick={() => updateProfile(index, { meds: [...profile.meds, createMed()] })}\n                >\n                  Add medication\n                </Button>\n              </div>\n            </div>\n          ))}\n          {!profiles.length && (\n            <p className=\"text-sm text-muted-foreground\">\n              Add a care profile to start scheduling medication reminders.\n            </p>\n          )}\n          <Button variant=\"secondary\" onClick={() => setProfiles((prev) => [...prev, createProfile()])}>\n            Add care profile\n          </Button>\n        </div>\n        <SheetFooter className=\"mt-8\">\n          <Button variant=\"ghost\" onClick={onClose} disabled={saving}>\n            Discard\n          </Button>\n          <Button onClick={handleSave} disabled={saving}>\n            Save & close\n          </Button>\n        </SheetFooter>\n      </SheetContent>\n    </Sheet>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4908, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/onboarding/common/RuleMiniBuilder.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\n\nexport interface RulePreset {\n  id: string;\n  title: string;\n  description: string;\n  enabled: boolean;\n  params: Record<string, string | number>;\n}\n\ninterface RuleMiniBuilderProps {\n  presets: RulePreset[];\n  onChange: (presets: RulePreset[]) => void;\n}\n\nexport function RuleMiniBuilder({ presets, onChange }: RuleMiniBuilderProps) {\n  const [local, setLocal] = useState(presets);\n\n  const updatePreset = (index: number, next: Partial<RulePreset>) => {\n    const updated = [...local];\n    updated[index] = { ...updated[index], ...next };\n    setLocal(updated);\n    onChange(updated);\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      {local.map((preset, index) => (\n        <div key={preset.id} className=\"rounded-lg border border-border/70 p-4\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm font-medium\">{preset.title}</p>\n              <p className=\"text-xs text-muted-foreground\">{preset.description}</p>\n            </div>\n            <Switch\n              checked={preset.enabled}\n              onCheckedChange={(value) => updatePreset(index, { enabled: value })}\n            />\n          </div>\n          {preset.enabled && (\n            <div className=\"mt-4 grid gap-3 md:grid-cols-2\">\n              {Object.entries(preset.params).map(([key, value]) => (\n                <div key={key} className=\"space-y-1\">\n                  <Label className=\"text-xs uppercase text-muted-foreground\">{key}</Label>\n                  <Input\n                    value={value as string | number}\n                    onChange={(event) =>\n                      updatePreset(index, {\n                        params: {\n                          ...preset.params,\n                          [key]: event.target.value,\n                        },\n                      })\n                    }\n                  />\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      ))}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAoBO,SAAS,gBAAgB,EAAE,OAAO,EAAE,QAAQ,EAAwB;;IACzE,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEnC,MAAM,eAAe,CAAC,OAAe;QACnC,MAAM,UAAU;eAAI;SAAM;QAC1B,OAAO,CAAC,MAAM,GAAG;YAAE,GAAG,OAAO,CAAC,MAAM;YAAE,GAAG,IAAI;QAAC;QAC9C,SAAS;QACT,SAAS;IACX;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACZ,MAAM,GAAG,CAAC,CAAC,QAAQ,sBAClB,6LAAC;gBAAoB,WAAU;;kCAC7B,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;;kDACC,6LAAC;wCAAE,WAAU;kDAAuB,OAAO,KAAK;;;;;;kDAChD,6LAAC;wCAAE,WAAU;kDAAiC,OAAO,WAAW;;;;;;;;;;;;0CAElE,6LAAC,qIAAA,CAAA,SAAM;gCACL,SAAS,OAAO,OAAO;gCACvB,iBAAiB,CAAC,QAAU,aAAa,OAAO;wCAAE,SAAS;oCAAM;;;;;;;;;;;;oBAGpE,OAAO,OAAO,kBACb,6LAAC;wBAAI,WAAU;kCACZ,OAAO,OAAO,CAAC,OAAO,MAAM,EAAE,GAAG,CAAC,CAAC,CAAC,KAAK,MAAM,iBAC9C,6LAAC;gCAAc,WAAU;;kDACvB,6LAAC,oIAAA,CAAA,QAAK;wCAAC,WAAU;kDAA2C;;;;;;kDAC5D,6LAAC,oIAAA,CAAA,QAAK;wCACJ,OAAO;wCACP,UAAU,CAAC,QACT,aAAa,OAAO;gDAClB,QAAQ;oDACN,GAAG,OAAO,MAAM;oDAChB,CAAC,IAAI,EAAE,MAAM,MAAM,CAAC,KAAK;gDAC3B;4CACF;;;;;;;+BAVI;;;;;;;;;;;eAdR,OAAO,EAAE;;;;;;;;;;AAmC3B;GAhDgB;KAAA","debugId":null}},
    {"offset": {"line": 5047, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/onboarding/steps/AutomationsDrawer.tsx"],"sourcesContent":["\"use client\";\n\nimport { useCallback, useEffect, useState } from \"react\";\nimport { Sheet, SheetContent, SheetDescription, SheetFooter, SheetHeader, SheetTitle } from \"@/components/ui/sheet\";\nimport { Button } from \"@/components/ui/button\";\nimport { RuleMiniBuilder, RulePreset } from \"../common/RuleMiniBuilder\";\nimport { useOnboardingStore } from \"@/lib/onboarding/state\";\nimport { persistSetup, requestPreview } from \"@/lib/onboarding/client\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface AutomationsDrawerProps {\n  open: boolean;\n  onClose: () => void;\n}\n\nconst basePresets: RulePreset[] = [\n  {\n    id: \"budget-threshold\",\n    title: \"Budget over 90%\",\n    description: \"Notify when spending exceeds 90% before month end.\",\n    enabled: false,\n    params: { threshold: 90, contact: \"Head of home\" },\n  },\n  {\n    id: \"bill-due\",\n    title: \"Bill due soon\",\n    description: \"Alert when a bill is due in 3 days and not autopay.\",\n    enabled: false,\n    params: { days: 3, contact: \"Finance lead\" },\n  },\n  {\n    id: \"ocr-receipt\",\n    title: \"OCR receipt\",\n    description: \"Auto-categorize new receipts uploaded to Vault.\",\n    enabled: false,\n    params: { tag: \"receipt\", review: \"true\" },\n  },\n  {\n    id: \"dose-overdue\",\n    title: \"Dose overdue\",\n    description: \"WhatsApp reminder when dose overdue by 30 minutes.\",\n    enabled: false,\n    params: { minutes: 30, contact: \"Care lead\" },\n  },\n];\n\nexport function AutomationsDrawer({ open, onClose }: AutomationsDrawerProps) {\n  const { toast } = useToast();\n  const setup = useOnboardingStore((state) => state.setup);\n  const updateData = useOnboardingStore((state) => state.updateData);\n  const setPreview = useOnboardingStore((state) => state.setPreview);\n  const [presets, setPresets] = useState<RulePreset[]>(basePresets);\n  const [testResult, setTestResult] = useState<string>(\"\");\n  const [saving, setSaving] = useState(false);\n\n  useEffect(() => {\n    if (!open) return;\n    const rules = setup.data.rules ?? [];\n    if (rules.length) {\n      setPresets(\n        basePresets.map((preset) => ({\n          ...preset,\n          enabled: rules.some((rule) => rule.id === preset.id),\n        }))\n      );\n    } else {\n      setPresets(basePresets);\n    }\n  }, [open, setup.data.rules]);\n\n  const handleSave = useCallback(async () => {\n    setSaving(true);\n    try {\n      const rules = presets\n        .filter((preset) => preset.enabled)\n        .map((preset) => ({\n          id: preset.id,\n          trigger: `${preset.title} (${JSON.stringify(preset.params)})`,\n          action: \"Send Beno notification\",\n        }));\n      updateData(\"automations\", { rules } as any);\n      const latest = useOnboardingStore.getState().setup;\n      const response = await persistSetup(latest, false);\n      const preview = await requestPreview(response.setup);\n      setPreview({\n        readiness: preview.readiness,\n        financeForecast: preview.finance?.forecast ?? [],\n        upcomingBills: preview.finance?.bills ?? [],\n        care: preview.care ?? [],\n        rules: preview.rules ?? [],\n      });\n      toast({ title: \"Automations saved\", description: `${rules.length} presets enabled.` });\n      onClose();\n    } catch (error) {\n      toast({\n        title: \"Failed to save\",\n        description: error instanceof Error ? error.message : \"Unknown error\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setSaving(false);\n    }\n  }, [onClose, presets, setPreview, toast, updateData]);\n\n  useEffect(() => {\n    const listener = () => {\n      if (open) {\n        handleSave();\n      }\n    };\n    window.addEventListener(\"onboarding-save\" as any, listener);\n    return () => window.removeEventListener(\"onboarding-save\" as any, listener);\n  }, [handleSave, open]);\n\n  const runTest = () => {\n    const enabled = presets.filter((preset) => preset.enabled);\n    if (!enabled.length) {\n      setTestResult(\"No rules enabled yet.\");\n      return;\n    }\n    setTestResult(`${enabled.length} rules would have triggered 5 times in the last 30 days.`);\n  };\n\n  return (\n    <Sheet open={open} onOpenChange={(value) => !value && onClose()}>\n      <SheetContent className=\"w-full overflow-y-auto sm:max-w-2xl\">\n        <SheetHeader>\n          <SheetTitle>Automations</SheetTitle>\n          <SheetDescription>Configure quick automation rules for common scenarios.</SheetDescription>\n        </SheetHeader>\n        <div className=\"mt-6 space-y-6\">\n          <RuleMiniBuilder presets={presets} onChange={setPresets} />\n          <Button variant=\"outline\" onClick={runTest}>\n            Test on last 30d\n          </Button>\n          {testResult && <p className=\"text-sm text-muted-foreground\">{testResult}</p>}\n        </div>\n        <SheetFooter className=\"mt-8\">\n          <Button variant=\"ghost\" onClick={onClose} disabled={saving}>\n            Discard\n          </Button>\n          <Button onClick={handleSave} disabled={saving}>\n            Save & close\n          </Button>\n        </SheetFooter>\n      </SheetContent>\n    </Sheet>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5342, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/onboarding/steps/GoalsDrawer.tsx"],"sourcesContent":["\"use client\";\n\nimport { useCallback, useEffect, useState } from \"react\";\nimport { Sheet, SheetContent, SheetDescription, SheetFooter, SheetHeader, SheetTitle } from \"@/components/ui/sheet\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { useOnboardingStore } from \"@/lib/onboarding/state\";\nimport { persistSetup, requestPreview } from \"@/lib/onboarding/client\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface GoalsDrawerProps {\n  open: boolean;\n  onClose: () => void;\n}\n\ntype GoalForm = {\n  name: string;\n  target: number;\n  deadline?: string;\n  priority: number;\n  allocation?: number;\n};\n\nconst quickGoals: Array<{ name: string; target: number; description: string }> = [\n  { name: \"Emergency fund\", target: 5000, description: \"Cover 3 months of expenses.\" },\n  { name: \"Travel\", target: 3000, description: \"Plan your next adventure.\" },\n  { name: \"New car\", target: 20000, description: \"Start saving for your next vehicle.\" },\n];\n\nexport function GoalsDrawer({ open, onClose }: GoalsDrawerProps) {\n  const { toast } = useToast();\n  const setup = useOnboardingStore((state) => state.setup);\n  const updateData = useOnboardingStore((state) => state.updateData);\n  const setPreview = useOnboardingStore((state) => state.setPreview);\n\n  const [goals, setGoals] = useState<GoalForm[]>([]);\n  const [saving, setSaving] = useState(false);\n\n  useEffect(() => {\n    if (!open) return;\n    const current = setup.data.goals ?? [];\n    setGoals(current.map((goal) => ({ ...goal, allocation: 10 })));\n  }, [open, setup.data.goals]);\n\n  const addGoal = (goal?: GoalForm) => {\n    setGoals((prev) => [...prev, goal ?? { name: \"\", target: 0, priority: 3 }]);\n  };\n\n  const updateGoal = (index: number, patch: Partial<GoalForm>) => {\n    setGoals((prev) => {\n      const next = [...prev];\n      next[index] = { ...next[index], ...patch };\n      return next;\n    });\n  };\n\n  const handleSave = useCallback(async () => {\n    setSaving(true);\n    try {\n      const formatted = goals.filter((goal) => goal.name.trim()).map((goal) => ({\n        name: goal.name,\n        target: goal.target,\n        deadline: goal.deadline,\n        priority: goal.priority,\n      }));\n      updateData(\"goals\", { goals: formatted } as any);\n      const latest = useOnboardingStore.getState().setup;\n      const response = await persistSetup(latest, false);\n      const preview = await requestPreview(response.setup);\n      setPreview({\n        readiness: preview.readiness,\n        financeForecast: preview.finance?.forecast ?? [],\n        upcomingBills: preview.finance?.bills ?? [],\n        care: preview.care ?? [],\n        rules: preview.rules ?? [],\n      });\n      toast({ title: \"Goals saved\", description: `${formatted.length} goals configured.` });\n      onClose();\n    } catch (error) {\n      toast({\n        title: \"Failed to save\",\n        description: error instanceof Error ? error.message : \"Unknown error\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setSaving(false);\n    }\n  }, [goals, onClose, setPreview, toast, updateData]);\n\n  useEffect(() => {\n    const listener = () => {\n      if (open) {\n        handleSave();\n      }\n    };\n    window.addEventListener(\"onboarding-save\" as any, listener);\n    return () => window.removeEventListener(\"onboarding-save\" as any, listener);\n  }, [handleSave, open]);\n\n  return (\n    <Sheet open={open} onOpenChange={(value) => !value && onClose()}>\n      <SheetContent className=\"w-full overflow-y-auto sm:max-w-2xl\">\n        <SheetHeader>\n          <SheetTitle>Goals</SheetTitle>\n          <SheetDescription>Create savings goals and optional auto-funding.</SheetDescription>\n        </SheetHeader>\n        <div className=\"mt-6 space-y-6\">\n          <section className=\"grid gap-3 md:grid-cols-3\">\n            {quickGoals.map((quick) => (\n              <button\n                key={quick.name}\n                type=\"button\"\n                onClick={() =>\n                  addGoal({\n                    name: quick.name,\n                    target: quick.target,\n                    priority: 2,\n                    allocation: 15,\n                  })\n                }\n                className=\"rounded-lg border border-border/60 bg-background/60 p-4 text-left text-sm hover:border-emerald-400\"\n              >\n                <div className=\"font-semibold\">{quick.name}</div>\n                <div className=\"text-xs text-muted-foreground\">{quick.description}</div>\n              </button>\n            ))}\n          </section>\n          <section className=\"space-y-4\">\n            {goals.map((goal, index) => (\n              <div key={`goal-${index}`} className=\"rounded-lg border border-border/70 p-4\">\n                <div className=\"grid gap-2 md:grid-cols-2\">\n                  <Input\n                    value={goal.name}\n                    placeholder=\"Goal name\"\n                    onChange={(event) => updateGoal(index, { name: event.target.value })}\n                  />\n                  <Input\n                    type=\"number\"\n                    value={goal.target}\n                    onChange={(event) => updateGoal(index, { target: Number(event.target.value) })}\n                    placeholder=\"Target amount\"\n                  />\n                  <Input\n                    type=\"date\"\n                    value={goal.deadline ?? \"\"}\n                    onChange={(event) => updateGoal(index, { deadline: event.target.value })}\n                  />\n                  <Input\n                    type=\"number\"\n                    value={goal.priority}\n                    onChange={(event) => updateGoal(index, { priority: Number(event.target.value) })}\n                    placeholder=\"Priority 1-5\"\n                  />\n                </div>\n                <div className=\"mt-3 flex items-center justify-between\">\n                  <label className=\"text-xs uppercase text-muted-foreground\">\n                    Auto-fund on payday (% allocation)\n                  </label>\n                  <Input\n                    type=\"number\"\n                    className=\"w-24\"\n                    value={goal.allocation ?? 0}\n                    onChange={(event) => updateGoal(index, { allocation: Number(event.target.value) })}\n                  />\n                </div>\n                <div className=\"mt-3 text-right\">\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={() => setGoals((prev) => prev.filter((_, idx) => idx !== index))}\n                  >\n                    Remove\n                  </Button>\n                </div>\n              </div>\n            ))}\n            {!goals.length && <p className=\"text-sm text-muted-foreground\">No goals yet.</p>}\n            <Button variant=\"secondary\" onClick={() => addGoal()}>\n              Add manual goal\n            </Button>\n          </section>\n        </div>\n        <SheetFooter className=\"mt-8\">\n          <Button variant=\"ghost\" onClick={onClose} disabled={saving}>\n            Discard\n          </Button>\n          <Button onClick={handleSave} disabled={saving}>\n            Save & close\n          </Button>\n        </SheetFooter>\n      </SheetContent>\n    </Sheet>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5770, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/onboarding/steps/SummaryDialog.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { useOnboardingStore } from \"@/lib/onboarding/state\";\nimport { persistSetup } from \"@/lib/onboarding/client\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface SummaryDialogProps {\n  open: boolean;\n  onClose: () => void;\n}\n\nconst moduleLinks: Array<{ label: string; href: string }> = [\n  { label: \"Finance\", href: \"/finance\" },\n  { label: \"Vault\", href: \"/vault\" },\n  { label: \"Schedule\", href: \"/schedule\" },\n  { label: \"Household\", href: \"/household\" },\n  { label: \"Goals\", href: \"/goals\" },\n];\n\nexport function SummaryDialog({ open, onClose }: SummaryDialogProps) {\n  const router = useRouter();\n  const { toast } = useToast();\n  const setup = useOnboardingStore((state) => state.setup);\n  const setPreview = useOnboardingStore((state) => state.setPreview);\n  const setSetup = useOnboardingStore((state) => state.setSetup);\n  const [enableAutomations, setEnableAutomations] = useState(true);\n  const [saving, setSaving] = useState(false);\n\n  const stats = {\n    accounts: Object.keys(setup.data.integrations ?? {}).length,\n    contacts: setup.data.contacts?.length ?? 0,\n    docs: setup.data.docs?.length ?? 0,\n    bills: setup.data.finance?.bills?.length ?? 0,\n    meds: setup.data.care?.reduce((acc, profile) => acc + profile.meds.length, 0) ?? 0,\n    rules: setup.data.rules?.length ?? 0,\n    goals: setup.data.goals?.length ?? 0,\n  };\n\n  const handleFinish = async () => {\n    setSaving(true);\n    try {\n      const response = await persistSetup(setup, true, enableAutomations);\n      setSetup(response.setup);\n      setPreview({\n        readiness: 100,\n        financeForecast: response.setup.data.finance?.income?.map((income) => income.amount) ?? [],\n        upcomingBills: response.setup.data.finance?.bills?.map((bill) => ({\n          name: bill.name,\n          due: `Day ${bill.dueDay}`,\n          amount: bill.amount,\n        })) ?? [],\n        care: response.setup.data.care?.flatMap((profile) =>\n          profile.meds.map((med) => ({ person: profile.name, nextDose: med.name }))\n        ) ?? [],\n        rules: response.setup.data.rules?.map((rule) => ({ id: rule.id, count: 1 })) ?? [],\n      });\n      toast({ title: \"Setup complete\", description: \"Your launch console is ready.\" });\n      onClose();\n    } catch (error) {\n      toast({\n        title: \"Failed to finish\",\n        description: error instanceof Error ? error.message : \"Unknown error\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const openModule = (href: string) => {\n    router.push(href);\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={(value) => !value && onClose()}>\n      <DialogContent className=\"max-w-2xl\">\n        <DialogHeader>\n          <DialogTitle>Ready to launch</DialogTitle>\n          <DialogDescription>\n            Readiness score {setup.progress}% Â· Review what will be created across modules.\n          </DialogDescription>\n        </DialogHeader>\n        <div className=\"mt-4 space-y-4 text-sm\">\n          <div className=\"grid gap-3 md:grid-cols-2\">\n            <div className=\"rounded border border-border/60 p-3\">\n              <div className=\"font-semibold\">Accounts linked</div>\n              <div className=\"text-muted-foreground\">{stats.accounts}</div>\n            </div>\n            <div className=\"rounded border border-border/60 p-3\">\n              <div className=\"font-semibold\">Contacts</div>\n              <div className=\"text-muted-foreground\">{stats.contacts}</div>\n            </div>\n            <div className=\"rounded border border-border/60 p-3\">\n              <div className=\"font-semibold\">Documents</div>\n              <div className=\"text-muted-foreground\">{stats.docs}</div>\n            </div>\n            <div className=\"rounded border border-border/60 p-3\">\n              <div className=\"font-semibold\">Bills</div>\n              <div className=\"text-muted-foreground\">{stats.bills}</div>\n            </div>\n            <div className=\"rounded border border-border/60 p-3\">\n              <div className=\"font-semibold\">Medications</div>\n              <div className=\"text-muted-foreground\">{stats.meds}</div>\n            </div>\n            <div className=\"rounded border border-border/60 p-3\">\n              <div className=\"font-semibold\">Automations</div>\n              <div className=\"text-muted-foreground\">{stats.rules}</div>\n            </div>\n            <div className=\"rounded border border-border/60 p-3 md:col-span-2\">\n              <div className=\"font-semibold\">Goals</div>\n              <div className=\"text-muted-foreground\">{stats.goals}</div>\n            </div>\n          </div>\n          <div className=\"flex items-center justify-between rounded border border-border/60 p-3\">\n            <div>\n              <div className=\"font-semibold\">Enable automations</div>\n              <div className=\"text-xs text-muted-foreground\">\n                Keep toggled on to activate budget nudges and reminders.\n              </div>\n            </div>\n            <Switch checked={enableAutomations} onCheckedChange={setEnableAutomations} />\n          </div>\n          <div>\n            <p className=\"text-xs uppercase text-muted-foreground\">Open moduleâ¦</p>\n            <div className=\"mt-2 flex flex-wrap gap-2\">\n              {moduleLinks.map((module) => (\n                <Button key={module.href} variant=\"secondary\" size=\"sm\" onClick={() => openModule(module.href)}>\n                  {module.label}\n                </Button>\n              ))}\n            </div>\n          </div>\n        </div>\n        <DialogFooter className=\"mt-6\">\n          <Button variant=\"ghost\" onClick={onClose} disabled={saving}>\n            Cancel\n          </Button>\n          <Button onClick={handleFinish} disabled={saving}>\n            Finish setup\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAQA;AACA;AACA;AACA;AACA;;;AAhBA;;;;;;;;;AAuBA,MAAM,cAAsD;IAC1D;QAAE,OAAO;QAAW,MAAM;IAAW;IACrC;QAAE,OAAO;QAAS,MAAM;IAAS;IACjC;QAAE,OAAO;QAAY,MAAM;IAAY;IACvC;QAAE,OAAO;QAAa,MAAM;IAAa;IACzC;QAAE,OAAO;QAAS,MAAM;IAAS;CAClC;AAEM,SAAS,cAAc,EAAE,IAAI,EAAE,OAAO,EAAsB;;IACjE,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,+HAAA,CAAA,WAAQ,AAAD;IACzB,MAAM,QAAQ,CAAA,GAAA,oIAAA,CAAA,qBAAkB,AAAD;mDAAE,CAAC,QAAU,MAAM,KAAK;;IACvD,MAAM,aAAa,CAAA,GAAA,oIAAA,CAAA,qBAAkB,AAAD;wDAAE,CAAC,QAAU,MAAM,UAAU;;IACjE,MAAM,WAAW,CAAA,GAAA,oIAAA,CAAA,qBAAkB,AAAD;sDAAE,CAAC,QAAU,MAAM,QAAQ;;IAC7D,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC3D,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAErC,MAAM,QAAQ;QACZ,UAAU,OAAO,IAAI,CAAC,MAAM,IAAI,CAAC,YAAY,IAAI,CAAC,GAAG,MAAM;QAC3D,UAAU,MAAM,IAAI,CAAC,QAAQ,EAAE,UAAU;QACzC,MAAM,MAAM,IAAI,CAAC,IAAI,EAAE,UAAU;QACjC,OAAO,MAAM,IAAI,CAAC,OAAO,EAAE,OAAO,UAAU;QAC5C,MAAM,MAAM,IAAI,CAAC,IAAI,EAAE,OAAO,CAAC,KAAK,UAAY,MAAM,QAAQ,IAAI,CAAC,MAAM,EAAE,MAAM;QACjF,OAAO,MAAM,IAAI,CAAC,KAAK,EAAE,UAAU;QACnC,OAAO,MAAM,IAAI,CAAC,KAAK,EAAE,UAAU;IACrC;IAEA,MAAM,eAAe;QACnB,UAAU;QACV,IAAI;YACF,MAAM,WAAW,MAAM,CAAA,GAAA,qIAAA,CAAA,eAAY,AAAD,EAAE,OAAO,MAAM;YACjD,SAAS,SAAS,KAAK;YACvB,WAAW;gBACT,WAAW;gBACX,iBAAiB,SAAS,KAAK,CAAC,IAAI,CAAC,OAAO,EAAE,QAAQ,IAAI,CAAC,SAAW,OAAO,MAAM,KAAK,EAAE;gBAC1F,eAAe,SAAS,KAAK,CAAC,IAAI,CAAC,OAAO,EAAE,OAAO,IAAI,CAAC,OAAS,CAAC;wBAChE,MAAM,KAAK,IAAI;wBACf,KAAK,CAAC,IAAI,EAAE,KAAK,MAAM,EAAE;wBACzB,QAAQ,KAAK,MAAM;oBACrB,CAAC,MAAM,EAAE;gBACT,MAAM,SAAS,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,QAAQ,CAAC,UACvC,QAAQ,IAAI,CAAC,GAAG,CAAC,CAAC,MAAQ,CAAC;4BAAE,QAAQ,QAAQ,IAAI;4BAAE,UAAU,IAAI,IAAI;wBAAC,CAAC,OACpE,EAAE;gBACP,OAAO,SAAS,KAAK,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,OAAS,CAAC;wBAAE,IAAI,KAAK,EAAE;wBAAE,OAAO;oBAAE,CAAC,MAAM,EAAE;YACpF;YACA,MAAM;gBAAE,OAAO;gBAAkB,aAAa;YAAgC;YAC9E;QACF,EAAE,OAAO,OAAO;YACd,MAAM;gBACJ,OAAO;gBACP,aAAa,iBAAiB,QAAQ,MAAM,OAAO,GAAG;gBACtD,SAAS;YACX;QACF,SAAU;YACR,UAAU;QACZ;IACF;IAEA,MAAM,aAAa,CAAC;QAClB,OAAO,IAAI,CAAC;IACd;IAEA,qBACE,6LAAC,qIAAA,CAAA,SAAM;QAAC,MAAM;QAAM,cAAc,CAAC,QAAU,CAAC,SAAS;kBACrD,cAAA,6LAAC,qIAAA,CAAA,gBAAa;YAAC,WAAU;;8BACvB,6LAAC,qIAAA,CAAA,eAAY;;sCACX,6LAAC,qIAAA,CAAA,cAAW;sCAAC;;;;;;sCACb,6LAAC,qIAAA,CAAA,oBAAiB;;gCAAC;gCACA,MAAM,QAAQ;gCAAC;;;;;;;;;;;;;8BAGpC,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAI,WAAU;sDAAgB;;;;;;sDAC/B,6LAAC;4CAAI,WAAU;sDAAyB,MAAM,QAAQ;;;;;;;;;;;;8CAExD,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAI,WAAU;sDAAgB;;;;;;sDAC/B,6LAAC;4CAAI,WAAU;sDAAyB,MAAM,QAAQ;;;;;;;;;;;;8CAExD,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAI,WAAU;sDAAgB;;;;;;sDAC/B,6LAAC;4CAAI,WAAU;sDAAyB,MAAM,IAAI;;;;;;;;;;;;8CAEpD,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAI,WAAU;sDAAgB;;;;;;sDAC/B,6LAAC;4CAAI,WAAU;sDAAyB,MAAM,KAAK;;;;;;;;;;;;8CAErD,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAI,WAAU;sDAAgB;;;;;;sDAC/B,6LAAC;4CAAI,WAAU;sDAAyB,MAAM,IAAI;;;;;;;;;;;;8CAEpD,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAI,WAAU;sDAAgB;;;;;;sDAC/B,6LAAC;4CAAI,WAAU;sDAAyB,MAAM,KAAK;;;;;;;;;;;;8CAErD,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAI,WAAU;sDAAgB;;;;;;sDAC/B,6LAAC;4CAAI,WAAU;sDAAyB,MAAM,KAAK;;;;;;;;;;;;;;;;;;sCAGvD,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;;sDACC,6LAAC;4CAAI,WAAU;sDAAgB;;;;;;sDAC/B,6LAAC;4CAAI,WAAU;sDAAgC;;;;;;;;;;;;8CAIjD,6LAAC,qIAAA,CAAA,SAAM;oCAAC,SAAS;oCAAmB,iBAAiB;;;;;;;;;;;;sCAEvD,6LAAC;;8CACC,6LAAC;oCAAE,WAAU;8CAA0C;;;;;;8CACvD,6LAAC;oCAAI,WAAU;8CACZ,YAAY,GAAG,CAAC,CAAC,uBAChB,6LAAC,qIAAA,CAAA,SAAM;4CAAmB,SAAQ;4CAAY,MAAK;4CAAK,SAAS,IAAM,WAAW,OAAO,IAAI;sDAC1F,OAAO,KAAK;2CADF,OAAO,IAAI;;;;;;;;;;;;;;;;;;;;;;8BAOhC,6LAAC,qIAAA,CAAA,eAAY;oBAAC,WAAU;;sCACtB,6LAAC,qIAAA,CAAA,SAAM;4BAAC,SAAQ;4BAAQ,SAAS;4BAAS,UAAU;sCAAQ;;;;;;sCAG5D,6LAAC,qIAAA,CAAA,SAAM;4BAAC,SAAS;4BAAc,UAAU;sCAAQ;;;;;;;;;;;;;;;;;;;;;;;AAO3D;GA7HgB;;QACC,qIAAA,CAAA,YAAS;QACN,+HAAA,CAAA,WAAQ;QACZ,oIAAA,CAAA,qBAAkB;QACb,oIAAA,CAAA,qBAAkB;QACpB,oIAAA,CAAA,qBAAkB;;;KALrB","debugId":null}},
    {"offset": {"line": 6239, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/onboarding/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { LaunchHeader } from \"@/components/onboarding/LaunchHeader\";\nimport { StepCard } from \"@/components/onboarding/StepCard\";\nimport { SideAssistant } from \"@/components/onboarding/SideAssistant\";\nimport { AccountsDrawer } from \"@/components/onboarding/steps/AccountsDrawer\";\nimport { PeopleDrawer } from \"@/components/onboarding/steps/PeopleDrawer\";\nimport { DocumentsDrawer } from \"@/components/onboarding/steps/DocumentsDrawer\";\nimport { HouseholdDrawer } from \"@/components/onboarding/steps/HouseholdDrawer\";\nimport { FinanceDrawer } from \"@/components/onboarding/steps/FinanceDrawer\";\nimport { HealthDrawer } from \"@/components/onboarding/steps/HealthDrawer\";\nimport { AutomationsDrawer } from \"@/components/onboarding/steps/AutomationsDrawer\";\nimport { GoalsDrawer } from \"@/components/onboarding/steps/GoalsDrawer\";\nimport { SummaryDialog } from \"@/components/onboarding/steps/SummaryDialog\";\nimport { StepDefinitions } from \"@/lib/onboarding/types\";\nimport { useOnboardingStore, getFocusedStep } from \"@/lib/onboarding/state\";\nimport { detectSetup, requestPreview } from \"@/lib/onboarding/client\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Button } from \"@/components/ui/button\";\n\nfunction metricForStep(step: string, setup: ReturnType<typeof useOnboardingStore.getState>[\"setup\"]) {\n  switch (step) {\n    case \"accounts\":\n      return `${Object.keys(setup.data.integrations ?? {}).length}/5 connected`;\n    case \"people\":\n      return `${setup.data.contacts?.length ?? 0} contacts`;\n    case \"documents\":\n      return `${setup.data.docs?.length ?? 0} docs`;\n    case \"household\":\n      return `${setup.data.household?.assets?.length ?? 0} assets`;\n    case \"finance\":\n      return `${(setup.data.finance?.income?.length ?? 0) + (setup.data.finance?.bills?.length ?? 0)} items`;\n    case \"health\":\n      return `${setup.data.care?.length ?? 0} profiles`;\n    case \"automations\":\n      return `${setup.data.rules?.length ?? 0} rules`;\n    case \"goals\":\n      return `${setup.data.goals?.length ?? 0} goals`;\n    default:\n      return \"--\";\n  }\n}\n\nexport default function OnboardingPage() {\n  const { toast } = useToast();\n  const router = useRouter();\n  const setup = useOnboardingStore((state) => state.setup);\n  const loadFromServer = useOnboardingStore((state) => state.loadFromServer);\n  const openDrawer = useOnboardingStore((state) => state.openDrawer);\n  const closeDrawer = useOnboardingStore((state) => state.closeDrawer);\n  const drawer = useOnboardingStore((state) => state.drawer);\n  const focusedStepIndex = useOnboardingStore((state) => state.focusedStepIndex);\n  const nextStep = useOnboardingStore((state) => state.nextStep);\n  const prevStep = useOnboardingStore((state) => state.prevStep);\n  const setPreview = useOnboardingStore((state) => state.setPreview);\n\n  const [initializing, setInitializing] = useState(true);\n  const [summaryOpen, setSummaryOpen] = useState(false);\n\n  useEffect(() => {\n    const initialize = async () => {\n      const existing = await detectSetup();\n      if (existing) {\n        loadFromServer(existing);\n        const preview = await requestPreview(existing);\n        setPreview({\n          readiness: preview.readiness,\n          financeForecast: preview.finance?.forecast ?? [],\n          upcomingBills: preview.finance?.bills ?? [],\n          care: preview.care ?? [],\n          rules: preview.rules ?? [],\n        });\n      }\n      setInitializing(false);\n    };\n    initialize();\n  }, [loadFromServer, setPreview]);\n\n  useEffect(() => {\n    const handleKey = (event: KeyboardEvent) => {\n      if (event.key === \"Tab\" && !event.shiftKey) {\n        event.preventDefault();\n        nextStep();\n        return;\n      }\n      if (event.key === \"Tab\" && event.shiftKey) {\n        event.preventDefault();\n        prevStep();\n        return;\n      }\n      if (event.key.toLowerCase() === \"n\") {\n        event.preventDefault();\n        nextStep();\n        return;\n      }\n      if (event.key === \"Enter\" && !drawer.open) {\n        event.preventDefault();\n        const step = getFocusedStep(useOnboardingStore.getState().focusedStepIndex);\n        openDrawer(step);\n        return;\n      }\n      if (event.key.toLowerCase() === \"s\" && (event.metaKey || event.ctrlKey)) {\n        event.preventDefault();\n        window.dispatchEvent(new Event(\"onboarding-save\"));\n        return;\n      }\n      if (\n        event.key.toLowerCase() === \"f\" &&\n        (event.metaKey || event.ctrlKey) &&\n        event.shiftKey\n      ) {\n        event.preventDefault();\n        setSummaryOpen(true);\n      }\n    };\n    window.addEventListener(\"keydown\", handleKey);\n    return () => window.removeEventListener(\"keydown\", handleKey);\n  }, [drawer.open, nextStep, openDrawer, prevStep]);\n\n  const metrics = useMemo(() => {\n    const state = useOnboardingStore.getState().setup;\n    return StepDefinitions.reduce<Record<string, string>>((acc, step) => {\n      acc[step.key] = metricForStep(step.key, state);\n      return acc;\n    }, {});\n  }, [setup]);\n\n  const handleSkip = () => {\n    toast({\n      title: \"Onboarding skipped\",\n      description: \"You can return to the launch console at any time.\",\n    });\n    router.push(\"/\");\n  };\n\n  const handleStart = () => {\n    const step = getFocusedStep(focusedStepIndex);\n    openDrawer(step);\n  };\n\n  if (initializing) {\n    return (\n      <div className=\"space-y-6 p-8\">\n        <Skeleton className=\"h-40 w-full\" />\n        <div className=\"grid gap-4 md:grid-cols-3\">\n          {Array.from({ length: 6 }).map((_, index) => (\n            <Skeleton key={index} className=\"h-40 w-full\" />\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-8 p-6 lg:p-10\">\n      <LaunchHeader onStart={handleStart} onSkip={handleSkip} />\n      <div className=\"grid gap-6 lg:grid-cols-[2fr,1fr]\">\n        <div className=\"grid gap-4 md:grid-cols-2\">\n          {StepDefinitions.map((definition) => (\n            <StepCard\n              key={definition.key}\n              definition={definition}\n              metrics={metrics[definition.key]}\n              onOpen={openDrawer}\n            />\n          ))}\n          <Button\n            variant=\"outline\"\n            className=\"md:col-span-2\"\n            onClick={() => setSummaryOpen(true)}\n          >\n            Review readiness summary\n          </Button>\n        </div>\n        <SideAssistant />\n      </div>\n\n      <AccountsDrawer open={drawer.open && drawer.step === \"accounts\"} onClose={closeDrawer} />\n      <PeopleDrawer open={drawer.open && drawer.step === \"people\"} onClose={closeDrawer} />\n      <DocumentsDrawer open={drawer.open && drawer.step === \"documents\"} onClose={closeDrawer} />\n      <HouseholdDrawer open={drawer.open && drawer.step === \"household\"} onClose={closeDrawer} />\n      <FinanceDrawer open={drawer.open && drawer.step === \"finance\"} onClose={closeDrawer} />\n      <HealthDrawer open={drawer.open && drawer.step === \"health\"} onClose={closeDrawer} />\n      <AutomationsDrawer open={drawer.open && drawer.step === \"automations\"} onClose={closeDrawer} />\n      <GoalsDrawer open={drawer.open && drawer.step === \"goals\"} onClose={closeDrawer} />\n      <SummaryDialog open={summaryOpen} onClose={() => setSummaryOpen(false)} />\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}